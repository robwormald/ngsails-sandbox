(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var _=require("lodash"),async=require("async"),Schema=require("waterline-schema"),Connections=require("./waterline/connections"),CollectionLoader=require("./waterline/collection/loader"),hasOwnProperty=require("./waterline/utils/helpers").object.hasOwnProperty,Waterline=module.exports=function(){return this instanceof Waterline?(this._collections=[],this._connections={},this):new Waterline};Waterline.Collection=require("./waterline/collection"),Waterline.Model=require("./waterline/model"),Waterline.prototype.loadCollection=function(e){return this._collections.push(e),this._collections},Waterline.prototype.initialize=function(e,n){function t(e,n){var t=new CollectionLoader(e,o.connections,c),i=t.initialize(o);o.collections[i.identity.toLowerCase()]=i,n()}var o=this;if(!e)throw new Error("Usage Error: function(options, callback)");if(!e.adapters)throw new Error("Options object must contain an adapters object");if(!e.connections)throw new Error("Options object must contain a connections object");if(e.collections){for(var i in e.collections)this.loadCollection(_.cloneDeep(e.collections[i]));delete e.collections}this.collections={},this.connections=new Connections(e.adapters,e.connections);var c=e.defaults||{};this.schema=new Schema(this._collections,this.connections,c),async.auto({loadCollections:function(e){async.each(o._collections,t,function(n){if(n)return e(n);var i=[];Object.keys(o.schema).forEach(function(e){o.schema[e].junctionTable&&i.push(Waterline.Collection.extend(o.schema[e]))}),async.each(i,t,function(n){return n?e(n):void e(null,o.collections)})})},buildCollectionSchemas:["loadCollections",function(e){var n=o.collections,t={};Object.keys(n).forEach(function(e){var o=n[e],i=_.clone(o._schema.schema);Object.keys(i).forEach(function(e){hasOwnProperty(i[e],"type")||delete i[e]});var c=o.meta||{};c.junctionTable=hasOwnProperty(o.waterline.schema[o.identity],"junctionTable")?o.waterline.schema[o.identity].junctionTable:!1,t[o.identity]=o,t[o.identity].definition=i,t[o.identity].meta=c}),e(null,t)}],registerConnections:["buildCollectionSchemas",function(e,n){async.each(Object.keys(o.connections),function(e,t){var i=o.connections[e],c={},r={};return hasOwnProperty(i._adapter,"registerConnection")?(Object.keys(i.config).forEach(function(e){c[e]=i.config[e]}),c.identity=e,i._collections.forEach(function(e){var t=e;hasOwnProperty(o.collections[e].__proto__,"tableName")&&(t=o.collections[e].__proto__.tableName),r[t]=n.buildCollectionSchemas[e]}),void i._adapter.registerConnection(_.cloneDeep(c),r,function(e){return e?t(e):void t()})):t()},e)}]},function(e){return e?n(e):void o.bootstrap(function(e){return e?n(e):void n(null,{collections:o.collections,connections:o.connections})})})},Waterline.prototype.teardown=function(e){var n=this;async.each(Object.keys(this.connections),function(e,t){var o=n.connections[e];return hasOwnProperty(o._adapter,"teardown")?void o._adapter.teardown(e,t):t()},e)},Waterline.prototype.bootstrap=function(e){var n=_.reduce(this.collections,function(e,n){return e.push(n),e},[]);async.eachSeries(n,function(e,n){e.sync(n)},e)};
},{"./waterline/collection":14,"./waterline/collection/loader":15,"./waterline/connections":16,"./waterline/model":27,"./waterline/utils/helpers":70,"async":90,"lodash":126,"waterline-schema":185}],2:[function(require,module,exports){
var _=require("lodash"),async=require("async"),normalize=require("../utils/normalize"),hasOwnProperty=require("../utils/helpers").object.hasOwnProperty;module.exports={createEach:function(r,e){var t,n,a=this;e=normalize.callback(e);var i="No createEach() or create() method defined in adapter!";if(hasOwnProperty(this.dictionary,"createEach")&&(t=this.dictionary.createEach,n=this.connections[t]._adapter,hasOwnProperty(n,"createEach")))return n.createEach(t,this.collection,r,e);var c=[];return hasOwnProperty(this.dictionary,"create")?(t=this.dictionary.create,n=this.connections[t]._adapter,hasOwnProperty(n,"create")?void async.forEachSeries(r,function(r,e){n.create(t,a.collection,r,function(r,t){return r?e(r):(c.push(t),void e())})},function(r){return r?e(r):void e(null,c)}):e(new Error(i))):e(new Error(i))},findOrCreateEach:function(r,e,t){var n,a,i=this;if(t=normalize.callback(t),r=_.clone(r),e=_.clone(e),hasOwnProperty(this.dictionary,"findOrCreateEach")&&(n=this.dictionary.findOrCreateEach,a=this.connections[n]._adapter,hasOwnProperty(a,"findOrCreateEach")))return a.findOrCreateEach(n,this.collection,e,t);var c=[];async.forEachSeries(e,function(e,t){if(!_.isObject(e))return t(new Error("findOrCreateEach: Unexpected value in valuesList."));var n={};return r.forEach(function(r){n[r]=e[r]}),i.findOrCreate.call(i,n,e,function(r,e){return r?t(r):(e&&c.push(e),void t(null,e))})},function(r){return r?t(r):void t(null,c)})}};
},{"../utils/helpers":70,"../utils/normalize":76,"async":90,"lodash":126}],3:[function(require,module,exports){
var _=require("lodash"),normalize=require("../utils/normalize"),hasOwnProperty=require("../utils/helpers").object.hasOwnProperty;module.exports={findOrCreate:function(r,e,i){var t,n,a=this;e||(e=r.where?r.where:r),r=normalize.criteria(r),i=normalize.callback(i);return hasOwnProperty(this.dictionary,"findOrCreate")&&(t=this.dictionary.findOrCreate,n=this.connections[t]._adapter,hasOwnProperty(n,"findOrCreate"))?n.findOrCreate(t,this.collection,e,i):void this.findOne(r,function(r,t){return r?i(r):t?i(null,t[0]):void a.create(e,i)})}};
},{"../utils/helpers":70,"../utils/normalize":76,"lodash":126}],4:[function(require,module,exports){
var _=require("lodash"),normalize=require("../../utils/normalize"),getRelations=require("../../utils/getRelations"),hasOwnProperty=require("../../utils/helpers").object.hasOwnProperty;module.exports={define:function(e){var r=this;e=normalize.callback(e);{var i="No define() method defined in adapter!",t=_.clone(this.query._schema.schema)||{};getRelations({schema:r.query.waterline.schema,parentCollection:r.collection})}this.describe(function(n,o){if(n)return e(n);if(o)return e(new Error("Trying to define a collection ("+r.collection+") which already exists."));if(Object.keys(t).forEach(function(e){t[e].type||delete t[e]}),!hasOwnProperty(r.dictionary,"define"))return e();var a=r.dictionary.define,c=r.connections[a]._adapter;return hasOwnProperty(c,"define")?void c.define(a,r.collection,t,e):e(new Error(i))})},describe:function(e){e=normalize.callback(e);var r="No describe() method defined in adapter!";if(!hasOwnProperty(this.dictionary,"describe"))return e();var i=this.dictionary.describe,t=this.connections[i]._adapter;return hasOwnProperty(t,"describe")?void t.describe(i,this.collection,e):e(new Error(r))},drop:function(e,r){"function"==typeof e&&(r=e,e=[]),e=[],r=normalize.callback(r);var i="No drop() method defined in adapter!";if(!hasOwnProperty(this.dictionary,"drop"))return r(new Error(i));var t=this.dictionary.drop,n=this.connections[t]._adapter;return hasOwnProperty(n,"drop")?void n.drop(t,this.collection,e,r):r(new Error(i))},alter:function(e){e=normalize.callback(e);var r="No alter() method defined in adapter!";if(!hasOwnProperty(this.dictionary,"alter"))return e(new Error(r));var i=this.dictionary.alter,t=this.connections[i]._adapter;return hasOwnProperty(t,"alter")?void t.alter(i,this.collection,e):e(new Error(r))}};
},{"../../utils/getRelations":69,"../../utils/helpers":70,"../../utils/normalize":76,"lodash":126}],5:[function(require,module,exports){
var normalize=require("../utils/normalize"),schema=require("../utils/schema"),hasOwnProperty=require("../utils/helpers").object.hasOwnProperty;module.exports={hasJoin:function(){return hasOwnProperty(this.dictionary,"join")},join:function(r,i){r=normalize.criteria(r),i=normalize.callback(i);var e="No join() method defined in adapter!";if(!hasOwnProperty(this.dictionary,"join"))return i(new Error(e));var t=this.dictionary.join,n=this.connections[t]._adapter;return hasOwnProperty(n,"join")?(r=schema.serializeJoins(r,this.query.waterline.schema),void n.join(t,this.collection,r,i)):i(new Error(e))},create:function(r,i){var e=this.query.globalId;if(i=normalize.callback(i),Array.isArray(r))return this.createEach.call(this,r,i);var t="No create() method defined in adapter!";if(!hasOwnProperty(this.dictionary,"create"))return i(new Error(t));var n=this.dictionary.create,o=this.connections[n]._adapter;return hasOwnProperty(o,"create")?void o.create(n,this.collection,r,normalize.callback(function(r,t){return r?("object"==typeof r&&(r.model=e),i(r)):i(null,t)})):i(new Error(t))},find:function(r,i){r=normalize.criteria(r),i=normalize.callback(i);var e="No find() method defined in adapter!";if(!hasOwnProperty(this.dictionary,"find"))return i(new Error(e));var t=this.dictionary.find,n=this.connections[t]._adapter;return n.find?void n.find(t,this.collection,r,i):i(new Error(e))},findOne:function(r,i){i=normalize.callback(i);var e=".findOne() requires a criteria. If you want the first record try .find().limit(1)";return r&&null!==r.where?(r.limit=1,void this.find(r,function(r,e){return e?e.length<1?i(r):void i(null,e):i(r)})):i(new Error(e))},count:function(r,i){var e;i=normalize.callback(i),r=normalize.criteria(r);var t=".count() requires the adapter define either a count method or a find method";if(!hasOwnProperty(this.dictionary,"count")){if(!hasOwnProperty(this.dictionary,"find"))return i(new Error(t));e=this.dictionary.find}e||(e=this.dictionary.count);var n=this.connections[e]._adapter;return hasOwnProperty(n,"count")?n.count(e,this.collection,r,i):void this.find(r,function(r,e){i(r,e.length)})},update:function(r,i,e){var t=this.query.globalId;if(e=normalize.callback(e),r=normalize.criteria(r),r===!1)return e(null,[]);if(!r)return e(new Error("No criteria or id specified!"));var n="No update() method defined in adapter!";if(!hasOwnProperty(this.dictionary,"update"))return e(new Error(n));var o=this.dictionary.update,a=this.connections[o]._adapter;a.update(o,this.collection,r,i,normalize.callback(function(r,i){return r?("object"==typeof r&&(r.model=t),e(r)):e(null,i)}))},destroy:function(r,i){if(i=normalize.callback(i),r=normalize.criteria(r),!r)return i(new Error("No criteria or id specified!"));var e="No destroy() method defined in adapter!";if(!hasOwnProperty(this.dictionary,"destroy"))return i(new Error(e));var t=this.dictionary.destroy,n=this.connections[t]._adapter;n.destroy(t,this.collection,r,i)}};
},{"../utils/helpers":70,"../utils/normalize":76,"../utils/schema":77}],6:[function(require,module,exports){
var _=require("lodash"),Adapter=module.exports=function(e){return this.connections=e.connections||{},this.dictionary=e.dictionary||{},this.query=e.query||{},this.collection=e.collection||"",this.identity=e.identity||"",this};_.extend(Adapter.prototype,require("./dql"),require("./ddl"),require("./compoundQueries"),require("./aggregateQueries"),require("./setupTeardown"),require("./sync"),require("./stream"));
},{"./aggregateQueries":2,"./compoundQueries":3,"./ddl":4,"./dql":5,"./setupTeardown":7,"./stream":8,"./sync":9,"lodash":126}],7:[function(require,module,exports){
module.exports={teardown:function(t){return this.adapter.teardown?this.adapter.teardown.apply(this,arguments):void t()}};
},{}],8:[function(require,module,exports){
var normalize=require("../utils/normalize"),hasOwnProperty=require("../utils/helpers").object.hasOwnProperty;module.exports={stream:function(r,e){r=normalize.criteria(r);var t="No stream() method defined in adapter!";if(!hasOwnProperty(this.dictionary,"stream"))return e.end(new Error(t));var i=this.dictionary.stream,a=this.connections[i]._adapter;return hasOwnProperty(a,"stream")?void a.stream(i,this.collection,r,e):e.end(new Error(t))}};
},{"../utils/helpers":70,"../utils/normalize":76}],9:[function(require,module,exports){
module.exports={migrateDrop:require("./strategies/drop.js"),migrateAlter:require("./strategies/alter.js"),migrateSafe:require("./strategies/safe.js")};
},{"./strategies/alter.js":10,"./strategies/drop.js":11,"./strategies/safe.js":12}],10:[function(require,module,exports){
function uhoh(e,r,o){console.error("Waterline encountered a fatal error when trying to perform the `alter` auto-migration strategy."),console.error("In a couple of seconds, the data (cached in memory) will be logged to stdout."),console.error("(a failsafe put in place to preserve development data)"),console.error(),console.error("In the mean time, here's the error:"),console.error(),console.error(e),console.error(),console.error(),setTimeout(function(){return console.error("================================"),console.error("Data backup:"),console.error("================================"),console.error(""),console.log(r),o(e)},1200)}var _=require("lodash"),async=require("async"),getRelations=require("../../../utils/getRelations");module.exports=function(e){var r,o=this,n=getRelations({schema:o.query.waterline.schema,parentCollection:o.collection});o.describe(function(t,i){return t?e(t):i?void o.find({},function(t,i){if(t)return e(t);if(0===i.length)return e();r=_.cloneDeep(i);var a=o.query.waterline.collections[o.identity]._attributes,l=o.query.waterline.collections[o.identity].primaryKey,u=_.reduce(_.cloneDeep(a),function(e,r,o){return r.name=o,e.push(r),e},[]),c=_.where(u,{unique:!0});async.each(c,function(e,n){var t=_.uniq(_.pluck(i,e.name)),a=_.filter(i,function(r){return[void 0,null].indexOf(r[e.name])<0}),u=_.filter(t,function(e){return[void 0,null].indexOf(e)<0});return u.length<a.length?(prompt=require("prompt"),prompt.start(),console.log("One or more existing records in your database violate a new uniqueness constraint\non `"+e.name+"` in your `"+o.identity+"` model."),console.log(),console.log("Should we automatically remove duplicates?"),console.log(),console.log('** WARNING: DO NOT TYPE "y" IF YOU ARE WORKING WITH PRODUCTION DATA **'),prompt.get(["y/n"],function(o,t){if(o)return n(o);var a=_.isString(t["y/n"])&&t["y/n"].match(/y/);if(a){var u=_.difference(i,_.uniq(i,!1,e.name)),c={};return c[l]=_.pluck(u,l),r=_.remove(r,function(e){return!_.contains(c[l],e[l])}),n()}return n(new Error("Auto-migration aborted. Please migrate your data manually and then try this again."))}),void 0):n()},function(t){return t?e(t):void o.drop(n,function(n){return n?uhoh(n,r,e):void o.define(function(n){return n?uhoh(n,r,e):void o.createEach(r,function(o){return o?uhoh(o,r,e):e()})})})})}):o.define(e)})};
},{"../../../utils/getRelations":69,"async":90,"lodash":126,"prompt":133}],11:[function(require,module,exports){
var _=require("lodash"),getRelations=require("../../../utils/getRelations");module.exports=function(e){var t=this;this.drop(function(r){return r?e(r):void t.define(function(){e.apply(null,Array.prototype.slice.call(arguments))})})};
},{"../../../utils/getRelations":69,"lodash":126}],12:[function(require,module,exports){
var _=require("lodash");module.exports=function(e){e()};
},{"lodash":126}],13:[function(require,module,exports){
module.exports={migrate:"alter"};
},{}],14:[function(require,module,exports){
var _=require("lodash"),extend=require("../utils/extend"),inherits=require("util").inherits,Core=require("../core"),Query=require("../query"),Collection=module.exports=function(e,t){return this.connections=t||{},this.waterline=e,this.attributes=this.attributes||{},Core.call(this),Query.call(this),this};inherits(Collection,Core),inherits(Collection,Query),Collection.extend=extend;
},{"../core":18,"../query":56,"../utils/extend":68,"lodash":126,"util":124}],15:[function(require,module,exports){
var hasOwnProperty=require("../utils/helpers").object.hasOwnProperty,CollectionLoader=module.exports=function(t,o,e){return this.defaults=e,this.collection=this._validate(t,o),this.namedConnections=this._getConnections(t,o),this};CollectionLoader.prototype.initialize=function(t){return new this.collection(t,this.namedConnections)},CollectionLoader.prototype._validate=function(t,o){if(!hasOwnProperty(t.prototype,"tableName")&&!hasOwnProperty(t.prototype,"identity"))throw new Error("A tableName or identity property must be set.");if(t.prototype.identity=t.prototype.identity.toLowerCase(),t.prototype.defaults=this.defaults,!hasOwnProperty(t.prototype,"connection")){if(!hasOwnProperty(o,"default"))throw new Error("No adapter was specified for collection: "+t.prototype.identity);t.prototype.connection="default"}return t},CollectionLoader.prototype._getConnections=function(t,o){var e={};return Array.isArray(t.prototype.connection)||(t.prototype.connection=[t.prototype.connection]),t.prototype.connection.forEach(function(n){if(!hasOwnProperty(o,n)){var r="The connection "+n+" specified in "+t.prototype.identity+" does not exists.";throw new Error(r)}e[n]=o[n]}),e};
},{"../utils/helpers":70}],16:[function(require,module,exports){
var _=require("lodash"),util=require("util"),hasOwnProperty=require("../utils/helpers").object.hasOwnProperty,Connections=module.exports=function(e,t){return this._connections={},this._build(e,t),this._connections};Connections.prototype._build=function(e,t){var o=this;Object.keys(t).forEach(function(r){var n,a,i=t[r];if(!hasOwnProperty(i,"adapter"))throw n=util.format('Connection ("%s") is missing a required property (`adapter`).  You should indicate the name of one of your adapters.',r),new Error(n);if(!hasOwnProperty(e,i.adapter))throw n="string"!=typeof i.adapter?util.format("Invalid `adapter` property in connection `%s`.  It should be a string (the name of one of the adapters you passed into `waterline.initialize()`)",r):util.format('Unknown adapter "%s" for connection `%s`.  You should double-check that the connection\'s `adapter` property matches the name of one of your adapters.  Or perhaps you forgot to include your "%s" adapter when you called `waterline.initialize()`...',i.adapter,r,i.adapter),new Error(n);a={config:_.merge({},e[i.adapter].defaults,i),_adapter:_.cloneDeep(e[i.adapter]),_collections:[]},o._connections[r]=a})};
},{"../utils/helpers":70,"lodash":126,"util":124}],17:[function(require,module,exports){
var _=require("lodash"),Dictionary=module.exports=function(r,t){this.dictionary={},this._build(r);var i=this._smash(t);return i};Dictionary.prototype._build=function(r){var t=this;Object.keys(r).forEach(function(i){var o=r[i],e={},n=o._adapter||{};Object.keys(n).forEach(function(r){e[r]=i}),t.dictionary[i]=_.cloneDeep(e)})},Dictionary.prototype._smash=function(r){var t=this;r=r||[];var i={};return r.reverse(),r.forEach(function(r){i=_.merge(i,t.dictionary[r])}),i};
},{"lodash":126}],18:[function(require,module,exports){
var _=require("lodash"),schemaUtils=require("../utils/schema"),COLLECTION_DEFAULTS=require("../collection/defaults"),Model=require("../model"),Cast=require("./typecast"),Schema=require("./schema"),Dictionary=require("./dictionary"),Validator=require("./validations"),Transformer=require("./transformations"),hasOwnProperty=require("../utils/helpers").object.hasOwnProperty,Core=module.exports=function(t){return t=t||{},this.adapter=this.adapter||{},this._attributes=_.clone(this.attributes),this.connections=this.connections||{},this.defaults=_.merge(COLLECTION_DEFAULTS,this.defaults),this._cast=new Cast,this._schema=new Schema(this),this._validator=new Validator,this._callbacks=schemaUtils.normalizeCallbacks(this),this._instanceMethods=schemaUtils.instanceMethods(this.attributes),this._attributes=schemaUtils.normalizeAttributes(this._attributes),this.hasSchema=Core._normalizeSchemaFlag.call(this),this.migrate=Object.getPrototypeOf(this).hasOwnProperty("migrate")?this.migrate:this.defaults.migrate,Core._initialize.call(this,t),this};Core._initialize=function(t){var e=this;t=t||{},this._model=new Model(this,this._instanceMethods);var i=this.waterline.schema[this.identity].attributes,s=_.clone(this._attributes);this.autoPK&&delete s.id,this.autoCreatedAt&&delete s.createdAt,this.autoUpdatedAt&&delete s.updatedAt;var a=Array.isArray(this.connection)?this.connection[0]:this.connection,r={};this.connections[a]&&this.connections[a]._adapter&&(r=this.connections[a]._adapter);var n=r.reservedAttributes||{};this._schema.initialize(this._attributes,this.hasSchema,n),this._cast.initialize(this._schema.schema),this._validator.initialize(s,this.types),Object.keys(i).forEach(function(t){hasOwnProperty(i[t],"primaryKey")&&(e.primaryKey=t)}),this._transformer=new Transformer(i,this.waterline.schema),this._schema.schema=this._transformer.serialize(this._schema.schema),this.adapterDictionary=new Dictionary(_.cloneDeep(this.connections),this.connection),Object.keys(this.connections).forEach(function(t){e.connections[t]._collections=e.connections[t]._collections||[],e.connections[t]._collections.push(e.identity)}),delete this.attributes},Core._normalizeSchemaFlag=function(){if(hasOwnProperty(Object.getPrototypeOf(this),"schema"))return Object.getPrototypeOf(this).schema;if(!this.connection||!Array.isArray(this.connection))return!0;var t=this.connections[this.connection[0]];return hasOwnProperty(t,"config")&&hasOwnProperty(t.config,"schema")?t.config.schema:hasOwnProperty(t,"_adapter")&&hasOwnProperty(t._adapter,"schema")?t._adapter.schema:!0};
},{"../collection/defaults":13,"../model":27,"../utils/helpers":70,"../utils/schema":77,"./dictionary":17,"./schema":19,"./transformations":20,"./typecast":21,"./validations":22,"lodash":126}],19:[function(require,module,exports){
var _=require("lodash"),types=require("../utils/types"),utils=require("../utils/helpers"),hasOwnProperty=utils.object.hasOwnProperty,Schema=module.exports=function(e){return this.context=e||{},this.schema={},this};Schema.prototype.initialize=function(e,r,t){var a=this;Object.keys(e).forEach(function(r){hasOwnProperty(e[r],"collection")||(a.schema[r]=a.objectAttribute(e[r]))}),Array.isArray(t)&&t.forEach(function(e){a.schema[e]={}}),this.hasSchema="undefined"!=typeof r?r:!0},Schema.prototype.objectAttribute=function(e){var r={};for(var t in e)switch(t){case"type":r.type=~types.indexOf(e[t])?e[t]:"string";break;case"defaultsTo":r.defaultsTo=e[t];break;case"primaryKey":r.primaryKey=e[t],r.unique=!0;break;case"foreignKey":r.foreignKey=e[t];break;case"references":r.references=e[t];break;case"on":r.on=e[t];break;case"via":r.via=e[t];break;case"autoIncrement":r.autoIncrement=e[t],r.type="integer";break;case"unique":r.unique=e[t];break;case"index":r.index=e[t];break;case"enum":r.enum=e[t];break;case"size":r.size=e[t];break;case"model":var a,s=this.context.waterline.schema[e[t].toLowerCase()].attributes;for(var i in s)hasOwnProperty(s[i],"primaryKey")&&(a=s[i].type);r.type=a.toLowerCase(),r.model=e[t].toLowerCase(),r.foreignKey=!0}return r},Schema.prototype.cleanValues=function(e){var r={};if(!this.hasSchema)return e;for(var t in e)hasOwnProperty(this.schema,t)&&(r[t]=e[t]);return r};
},{"../utils/helpers":70,"../utils/types":81,"lodash":126}],20:[function(require,module,exports){
var _=require("lodash"),utils=require("../utils/helpers"),hasOwnProperty=utils.object.hasOwnProperty,Transformation=module.exports=function(t,r){return this._transformations={},this.initialize(t,r),this};Transformation.prototype.initialize=function(t){var r=this;Object.keys(t).forEach(function(n){["function","string"].indexOf(typeof t[n])>-1||t[n]===Object(t[n])&&Object.keys(t[n]).forEach(function(o){if("columnName"===o){if("string"!=typeof t[n][o])throw new Error("columnName transformation must be a string");if("columnName"===o){if(n===t[n][o])return;r._transformations[n]=t[n][o]}}})})},Transformation.prototype.serialize=function(t){function r(t){if(t)if("string"!=typeof t)Object.keys(t).forEach(function(o){return hasOwnProperty(t,o)?Array.isArray(t[o])&&"or"===o?r(t[o]):"[object Date]"!==toString.call(t[o])&&_.isPlainObject(t[o])?hasOwnProperty(n._transformations,o)?(t[n._transformations[o]]=_.clone(t[o]),delete t[o],r(t[n._transformations[o]])):r(t[o]):void(hasOwnProperty(n._transformations,o)&&(t[n._transformations[o]]=t[o],delete t[o])):void 0});else if(hasOwnProperty(n._transformations,t))return void(o=n._transformations[t])}var n=this,o=_.clone(t);return r(o),o},Transformation.prototype.unserialize=function(t){var r=this,n=_.clone(t);return Object.keys(this._transformations).forEach(function(o){var i=r._transformations[o];hasOwnProperty(t,i)&&(n[o]=t[i],i!==o&&delete n[i])}),n};
},{"../utils/helpers":70,"lodash":126}],21:[function(require,module,exports){
var types=require("../utils/types"),utils=require("../utils/helpers"),hasOwnProperty=utils.object.hasOwnProperty,_=require("lodash"),Cast=module.exports=function(){return this._types={},this};Cast.prototype.initialize=function(t){var e=this;Object.keys(t).forEach(function(r){e._types[r]=~types.indexOf(t[r].type)?t[r].type:"string"})},Cast.prototype.run=function(t){var e=this;return Object.keys(t).forEach(function(r){if(_.isUndefined(t[r])&&(t[r]=null),hasOwnProperty(e._types,r)&&null!==t[r]&&hasOwnProperty(t,r)&&!_.isPlainObject(t[r])){var a=e._types[r];switch(a){case"string":case"text":t[r]=e.string(t[r]);break;case"integer":t[r]=e.integer(r,t[r]);break;case"float":t[r]=e.float(t[r]);break;case"date":case"time":case"datetime":t[r]=e.date(t[r]);break;case"boolean":t[r]=e.boolean(t[r]);break;case"array":t[r]=e.array(t[r])}}}),t},Cast.prototype.string=function(t){return"undefined"!=typeof t.toString?t.toString():""+t},Cast.prototype.integer=function(t,e){var r;if(utils.matchMongoId(e))return e.toString();try{r=parseInt(e,10)}catch(a){return e}return r},Cast.prototype.float=function(t){var e;try{e=parseFloat(t)}catch(r){return t}return e},Cast.prototype.boolean=function(t){var e;if(_.isString(t))return"true"===t?!0:"false"===t?!1:!1;try{e=parseInt(t,10)}catch(r){return!1}return 0===e?!1:1===e?!0:t===!0||t===!1?t:!1},Cast.prototype.date=function(t){var e;return e=new Date(t.__proto__==Date.prototype?t.getTime():Date.parse(t)),"Invalid Date"===e.toString()?t:e},Cast.prototype.array=function(t){return Array.isArray(t)?t:[t]};
},{"../utils/helpers":70,"../utils/types":81,"lodash":126}],22:[function(require,module,exports){
var _=require("lodash"),anchor=require("anchor"),async=require("async"),utils=require("../utils/helpers"),hasOwnProperty=utils.object.hasOwnProperty,WLValidationError=require("../error/WLValidationError"),Validator=module.exports=function(){this.validations={}};Validator.prototype.initialize=function(e,t){var n=this;t=t||{},anchor.define(t),Object.keys(e).forEach(function(t){n.validations[t]={},Object.keys(e[t]).forEach(function(a){return null===e[t][a]||["defaultsTo","primaryKey","autoIncrement","unique","index","collection","dominant","columnName","foreignKey","references","on","groupKey","model","via","size","example","validationMessage","validations","populateSettings"].indexOf(a)>-1?void 0:"enum"===a?void(n.validations[t]["in"]=e[t][a]):void(n.validations[t][a]=e[t][a])})})},Validator.prototype.validate=function(e,t,n){function a(t,n){var a=i.validations[t],r=anchor(a),l=e[t];return"undefined"==typeof l&&(l=null),(a.required||null!==l&&""!==l)&&(!a.required||"boolean"!==a.type||"undefined"==typeof l||null===l||"true"!=l.toString()&&"false"!=l.toString())?hasOwnProperty(i.validations[t],"type")&&"integer"===i.validations[t].type&&utils.matchMongoId(l)?n():void async.each(Object.keys(r.data),function(t,n){return"function"!=typeof r.data[t]?n():r.data[t].length<1?(r.data[t]=r.data[t].apply(e,[]),n()):void r.data[t].call(e,function(e){r.data[t]=e,n()})},function(){var a=anchor(l).to(r.data,e);return a?(o[t]=[],a.forEach(function(e){e.property&&delete e.property,o[t].push({rule:e.rule,message:e.message})}),n()):n()}):n()}var i=this,o={},r=Object.keys(this.validations);"function"==typeof t?n=t:t&&(r=_.intersection(r,Object.keys(e))),async.each(r,a,function(){return 0===Object.keys(o).length?n():void n(o)})};
},{"../error/WLValidationError":25,"../utils/helpers":70,"anchor":83,"async":90,"lodash":126}],23:[function(require,module,exports){
function WLError(r){WLError.super_.call(this),r=r||{},_.extend(this,r),this._e=_.isObject(this.originalError)&&this.originalError instanceof Error?this.originalError:new Error,this.rawStack=this._e.stack.replace(/^Error(\r|\n)*(\r|\n)*/,""),"string"==typeof this.originalError?this.details=this.originalError:this.originalError&&util.isError(this.originalError)?this.details=this.originalError.toString():this.originalError&&(this.details=util.inspect(this.originalError)),this.details&&(this.details="Details:  "+this.details+"\n")}var util=require("util"),_=require("lodash");util.inherits(WLError,Error),WLError.prototype.status=500,WLError.prototype.code="E_UNKNOWN",WLError.prototype.reason="Encountered an unexpected error",WLError.prototype.details="",WLError.prototype.toJSON=WLError.prototype.toPOJO=function(){var r={error:this.code,status:this.status,summary:this.reason,raw:this.originalError};return r.raw||delete r.raw,r},WLError.prototype.toLog=function(){return this.inspect()},WLError.prototype.inspect=function(){return util.format("Error (%s) :: %s\n%s\n\n%s",this.code,this.reason,this.rawStack,this.details)},WLError.prototype.toString=function(){return util.format("[Error (%s) %s]",this.code,this.reason,this.details)},module.exports=WLError;
},{"lodash":126,"util":124}],24:[function(require,module,exports){
function WLUsageError(r){WLUsageError.super_.call(this,r)}var WLError=require("./WLError"),util=require("util"),_=require("lodash");util.inherits(WLUsageError,WLError),WLUsageError.prototype.code="E_USAGE",WLUsageError.prototype.status=0,WLUsageError.prototype.reason="Invalid usage",module.exports=WLUsageError;
},{"./WLError":23,"lodash":126,"util":124}],25:[function(require,module,exports){
function WLValidationError(t){if(WLValidationError.super_.call(this,t),"object"!=typeof this.invalidAttributes)return new WLUsageError({reason:"An `invalidAttributes` object must be passed into the constructor for `WLValidationError`"});var r=1===this.length;this.reason=util.format("%d attribute%s %s invalid",this.length,r?"":"s",r?"is":"are"),this.code="E_VALIDATION",this.status=t.status||400,this.model=t.model,this.invalidAttributes=_.mapValues(this.invalidAttributes,function(t,r){return _.map(t,function(t){return t.message||(t.message=util.format("A record with that `%s` already exists (`%s`).",r,t.value)),t})}),this.details=util.format("Invalid attributes sent to %s:\n",this.model)+_.reduce(this.messages,function(t,r,e){return t+=" • "+e+"\n",t+=_.reduce(r,function(t,r){return t+="   • "+r+"\n"},"")},"")}var WLError=require("./WLError"),WLUsageError=require("./WLUsageError"),util=require("util"),_=require("lodash");util.inherits(WLValidationError,WLError),WLValidationError.prototype.__defineGetter__("rules",function(){return _.mapValues(this.invalidAttributes,function(t){return _.pluck(t,"rule")})}),WLValidationError.prototype.__defineGetter__("messages",function(){return _.mapValues(this.invalidAttributes,function(t){return _.pluck(t,"message")})}),WLValidationError.prototype.__defineGetter__("errors",function(){return this.messages}),WLValidationError.prototype.__defineGetter__("attributes",function(){return _.keys(this.invalidAttributes)}),WLValidationError.prototype.__defineGetter__("keys",function(){return this.attributes}),WLValidationError.prototype.__defineGetter__("length",function(){return this.attributes.length}),WLValidationError.prototype.__defineGetter__("ValidationError",function(){return this.invalidAttributes}),WLValidationError.prototype.toJSON=WLValidationError.prototype.toPOJO=function(){return{error:this.code,status:this.status,summary:this.reason,model:this.model,invalidAttributes:this.invalidAttributes}},module.exports=WLValidationError;
},{"./WLError":23,"./WLUsageError":24,"lodash":126,"util":124}],26:[function(require,module,exports){
function duckType(r){return _isConstraintViolation(r)?new WLValidationError(r):new WLError({originalError:r})}function _isConstraintViolation(r){return r&&"object"==typeof r&&"E_UNIQUE"===r.code?!0:!1}var util=require("util"),_=require("lodash"),WLError=require("./WLError");WLValidationError=require("./WLValidationError"),module.exports=function(r){return"object"==typeof r&&r instanceof WLError?r:duckType(r)};
},{"./WLError":23,"./WLValidationError":25,"lodash":126,"util":124}],27:[function(require,module,exports){
var _=require("lodash"),Model=require("./lib/model"),defaultMethods=require("./lib/defaultMethods"),internalMethods=require("./lib/internalMethods");module.exports=function(t,e){var n={toObject:function(){return new defaultMethods.toObject(t,this)},save:function(e){return new defaultMethods.save(t,this,e)},destroy:function(e){return new defaultMethods.destroy(t,this,e)},_defineAssociations:function(){new internalMethods.defineAssociations(t,this)},_normalizeAssociations:function(){new internalMethods.normalizeAssociations(t,this)},validate:function(e){var n=this.toObject();t.validate(n,function(t){return t?e(t):void e()})}},o=_.compact(_.map(t._attributes,function(t,e){return t.protected?e:void 0}));n.toJSON=o.length?function(){var t=this.toObject();return _.each(o,function(e){delete t[e]}),t}:function(){return this.toObject()};var i=_.extend(n,e),r=Model.extend(i);return r};
},{"./lib/defaultMethods":33,"./lib/internalMethods":37,"./lib/model":39,"lodash":126}],28:[function(require,module,exports){
var Association=module.exports=function(){this.addModels=[],this.removeModels=[],this.value=[]};Association.prototype._setValue=function(o){return Array.isArray(o)?void(this.value=o):void(this.value=this.value=[o])},Association.prototype._getValue=function(){var o=this,e=this.value;return e.add=function(e){o.addModels.push(e)},e.remove=function(e){o.removeModels.push(e)},e};
},{}],29:[function(require,module,exports){
var _=require("lodash"),async=require("async"),utils=require("../../../utils/helpers"),hasOwnProperty=utils.object.hasOwnProperty,Add=module.exports=function(e,t,r,i){this.collection=e,this.proto=t,this.failedTransactions=[],this.primaryKey=null;var o=t.toObject(),n=e.waterline.schema[e.identity].attributes;return this.primaryKey=this.findPrimaryKey(n,o),this.primaryKey?t.toObject()[this.primaryKey]?void this.createCollectionAssociations(r,i):i(new Error("No Primary Key set to associate the record with! Primary Key must have a value, it can't be an optional value.")):i(new Error("No Primary Key set to associate the record with! Try setting an attribute as a primary key or include an ID property."))};Add.prototype.findPrimaryKey=function(e,t){var r=null;for(var i in e)hasOwnProperty(e[i],"primaryKey")&&(r=i);return!r&&hasOwnProperty(t,"id")&&(r="id"),r},Add.prototype.createCollectionAssociations=function(e,t){var r=this;async.eachSeries(Object.keys(e),function(t,i){r.createAssociations(t,e[t],i)},function(e){return e||r.failedTransactions.length>0?t(null,r.failedTransactions):void t()})},Add.prototype.createAssociations=function(e,t,r){var i=this,o=this.collection._attributes[e],n=o.collection.toLowerCase(),a=this.collection.waterline.collections[n],c=this.collection.waterline.schema[this.collection.identity].attributes[e];async.eachLimit(t,10,function(e,t){if("object"==typeof e&&Object.keys(e).length>0){if(hasOwnProperty(e,a.primaryKey)){var r=a.primaryKey;return i.updateRecord(a,c,e[r],t)}return i.createNewRecord(a,c,e,t)}i.updateRecord(a,c,e,t)},r)},Add.prototype.createNewRecord=function(e,t,r,i){var o=this,n=this.collection.waterline.schema[t.collection.toLowerCase()],a=n.junctionTable||!1;a||(r[t.on]=this.proto[this.primaryKey]),e.create(r,function(n,c){if(n&&o.failedTransactions.push({type:"insert",collection:e.identity,values:r,err:n.message}),!a)return i();if(n)return i();var s=o.findPrimaryKey(e._attributes,c.toObject());s||o.failedTransactions.push({type:"insert",collection:e.identity,values:{},err:new Error("No Primary Key value was found on the joined collection").message});var l=o.collection.waterline.collections[t.collection.toLowerCase()];o.createManyToMany(l,t,c[s],i)})},Add.prototype.updateRecord=function(e,t,r,i){var o=this.collection.waterline.schema[t.collection.toLowerCase()],n=o.junctionTable||!1;if(n){var a=this.collection.waterline.collections[t.collection.toLowerCase()];return this.createManyToMany(a,t,r,i)}var c=this.collection.waterline.schema[e.identity].attributes,s=this.findPrimaryKey(c,c);if(!s)return i(new Error("No Primary Key defined on the child record you are trying to associate the record with! Try setting an attribute as a primary key or include an ID property."));var l={},y={};l[s]=r,y[t.on]=this.proto[this.primaryKey],e.update(l,y,function(t){t&&self.failedTransactions.push({type:"update",collection:e.identity,criteria:l,values:y,err:t.message}),i()})},Add.prototype.createManyToMany=function(e,t,r,i){var o=this,n=this.collection.waterline.schema[t.collection.toLowerCase()],a=n.attributes[t.on].via;if(!a)return i(new Error("No Primary Key set on the child record you are trying to associate the record with! Try setting an attribute as a primary key or include an ID property."));var c={},s={};c[a]=r,c[t.on]=this.proto[this.primaryKey],s=_.clone(c),async.auto({validateAssociation:function(e){var t=n.attributes[a].references,i=o.collection.waterline.collections[t],c=o.findPrimaryKey(i.attributes,{}),s={};s[c]=r,i.findOne(s,function(i,o){return i?e(i):o?void e():e(new Error("Associated Record For "+t+" with "+c+" = "+r+" No Longer Exists"))})},validateRecord:function(t){e.findOne(c,function(e,r){return e||r?t(new Error("Trying to '.add()' an instance which already exists!")):void t()})},createRecord:["validateAssociation","validateRecord",function(t){e.create(s,t)}]},function(t){return t&&o.failedTransactions.push({type:"insert",collection:e.identity,criteria:c,values:s,err:t.message}),i()})},Add.prototype.findAssociationKey=function(e){var t=null;for(var r in e.attributes){var i=e.attributes[r],o=this.collection.identity;if(hasOwnProperty(i,"references")){var n=i.references;n!==o&&(t=i.columnName)}}return t};
},{"../../../utils/helpers":70,"async":90,"lodash":126}],30:[function(require,module,exports){
var _=require("lodash"),async=require("async"),utils=require("../../../utils/helpers"),hasOwnProperty=utils.object.hasOwnProperty,Remove=module.exports=function(e,t,r,i){this.collection=e,this.proto=t,this.failedTransactions=[],this.primaryKey=null;var o=t.toObject(),a=e.waterline.schema[e.identity].attributes;return this.primaryKey=this.findPrimaryKey(a,o),this.primaryKey?t.toObject()[this.primaryKey]?void this.removeCollectionAssociations(r,i):i(new Error("No Primary Key set to associate the record with! Primary Key must have a value, it can't be an optional value.")):i(new Error("No Primary Key set to associate the record with! Try setting an attribute as a primary key or include an ID property."))};Remove.prototype.findPrimaryKey=function(e,t){var r=null;for(var i in e)hasOwnProperty(e[i],"primaryKey")&&(r=i);return!r&&hasOwnProperty(t,"id")&&(r="id"),r},Remove.prototype.removeCollectionAssociations=function(e,t){var r=this;async.eachSeries(Object.keys(e),function(t,i){r.removeAssociations(t,e[t],i)},function(e){return e||r.failedTransactions.length>0?t(null,r.failedTransactions):void t()})},Remove.prototype.removeAssociations=function(e,t,r){var i=this,o=this.collection._attributes[e],a=o.collection.toLowerCase(),n=this.collection.waterline.collections[a],s=this.collection.waterline.schema[this.collection.identity].attributes[e];async.eachLimit(t,10,function(e,t){i.removeRecord(n,s,e,t)},r)},Remove.prototype.removeRecord=function(e,t,r,i){var o=this,a=this.validatePrimaryKey(r);if(!a)return this.failedTransactions.push({type:"remove",collection:e.identity,values:r,err:new Error("Remove association only accepts a single primary key value").message}),i();var n=this.collection.waterline.schema[t.collection.toLowerCase()],s=n.junctionTable||!1;if(s){var c=this.collection.waterline.collections[t.collection.toLowerCase()];return this.removeManyToMany(c,t,r,i)}var l=this.collection.waterline.schema[e.identity].attributes,y=this.findPrimaryKey(l,l);if(!y)return i(new Error("No Primary Key defined on the child record you are trying to un-associate the record with! Try setting an attribute as a primary key or include an ID property."));var u={},h={};u[y]=r,h[t.on]=null,e.update(u,h,function(t){t&&o.failedTransactions.push({type:"update",collection:e.identity,criteria:u,values:h,err:t.message}),i()})},Remove.prototype.validatePrimaryKey=function(e){var t=!1;return _.isString(e)&&utils.matchMongoId(e)&&(t=!0),"[object Object]"!==e.toString()&&(t=!0),t},Remove.prototype.removeManyToMany=function(e,t,r,i){var o=this,a=this.collection.waterline.schema[t.collection.toLowerCase()],n=a.attributes[t.on].via;if(!n)return i(new Error("No Primary Key set on the child record you are trying to associate the record with! Try setting an attribute as a primary key or include an ID property."));var s={};s[n]=r,s[t.on]=this.proto[this.primaryKey],e.destroy(s,function(t){t&&o.failedTransactions.push({type:"destroy",collection:e.identity,criteria:s,err:t.message}),i()})},Remove.prototype.findAssociationKey=function(e){var t=null;for(var r in e.attributes){var i=e.attributes[r],o=this.collection.identity;if(hasOwnProperty(i,"references")){var a=i.references.toLowerCase();a!==o&&(t=i.columnName)}}return t};
},{"../../../utils/helpers":70,"async":90,"lodash":126}],31:[function(require,module,exports){
var _=require("lodash"),utils=require("../../../utils/helpers"),nestedOperations=require("../../../utils/nestedOperations"),hop=utils.object.hasOwnProperty,Update=module.exports=function(e,r,t,i){var a="function"==typeof r.toObject?r.toObject():r,n=e.waterline.schema[e.identity].attributes,o=this.findPrimaryKey(n,a);if(!o)return i(new Error("No Primary Key set to update the record with! Try setting an attribute as a primary key or include an ID property."));if(!a[o])return i(new Error("No Primary Key set to update the record with! Primary Key must have a value, it can't be an optional value."));var s={};s[o]=a[o];var u=_.cloneDeep(a),p=_.keys(u);p.forEach(function(r){if(-1===t.indexOf(r)){var i={};i[r]=u[r],delete u[r];var a=nestedOperations.reduceAssociations(e.identity,e.waterline.schema,i);u=_.merge(u,a)}}),e.update(s,u,i)};Update.prototype.findPrimaryKey=function(e,r){var t=null;for(var i in e)hop(e[i],"primaryKey")&&(t=i);return!t&&hop(r,"id")&&(t="id"),t};
},{"../../../utils/helpers":70,"../../../utils/nestedOperations":72,"lodash":126}],32:[function(require,module,exports){
var utils=require("../../../utils/helpers"),hasOwnProperty=utils.object.hasOwnProperty,Q=require("q"),noop=function(){},Destroy=module.exports=function(r,e,t){var i,o,a,n,y;if(t=t||noop,n=Q.defer(),i=e.toObject(),o=r.waterline.schema[r.identity].attributes,a=this.findPrimaryKey(o,i),!a)return y=new Error("No Primary Key set to update the record with! Try setting an attribute as a primary key or include an ID property."),n.reject(y),t(y);if(!i[a])return y=new Error("No Primary Key set to update the record with! Primary Key must have a value, it can't be an optional value."),n.reject(y),t(y);var u={};return u[a]=i[a],r.destroy(u,function(r,e){return r?(n.reject(r),t(r)):(n.resolve(e),void t.apply(this,arguments))}),n.promise};Destroy.prototype.findPrimaryKey=function(r,e){var t=null;for(var i in r)hasOwnProperty(r[i],"primaryKey")&&(t=i);return!t&&hasOwnProperty(e,"id")&&(t="id"),t};
},{"../../../utils/helpers":70,"q":172}],33:[function(require,module,exports){
module.exports={toObject:require("./toObject"),destroy:require("./destroy"),save:require("./save")};
},{"./destroy":32,"./save":34,"./toObject":35}],34:[function(require,module,exports){
var _=require("lodash"),async=require("async"),deep=require("deep-diff"),updateInstance=require("../associationMethods/update"),addAssociation=require("../associationMethods/add"),removeAssociation=require("../associationMethods/remove"),hop=require("../../../utils/helpers").object.hasOwnProperty,Q=require("q"),noop=function(){};module.exports=function(o,e,s){var i=Q.defer();s=s||noop;var a=[];return async.auto({compareModelValues:function(o){var s=Object.keys(e.associationsCache);async.each(s,function(o,s){if(!hop(e,o)||void 0===e[o])return s();var i=e[o],n=e.associationsCache[o];Array.isArray(n)&&(n=n[0]),deep(i,n)&&a.push(o),s()},o)},updateRecord:["compareModelValues",function(s){var i=_.clone(e.toObject());new updateInstance(o,i,a,function(o,e){s(o,e)})}],buildAssociationOperations:["compareModelValues",function(o){var s={addKeys:{},removeKeys:{}};return Object.keys(e.associations).forEach(function(o){e.associations[o].hasOwnProperty("model")||(e.associations[o].addModels.length>0&&(s.addKeys[o]=e.associations[o].addModels),e.associations[o].removeModels.length>0&&(s.removeKeys[o]=e.associations[o].removeModels))}),o(null,s)}],addAssociations:["buildAssociationOperations","updateRecord",function(s,i){var a=i.buildAssociationOperations.addKeys;return new addAssociation(o,e,a,function(o,a){if(o)return s(o);for(var n in i.buildAssociationOperations.addKeys)e.associations[n].addModels=[];s(null,a)})}],removeAssociations:["buildAssociationOperations","addAssociations",function(s,i){var a=i.buildAssociationOperations.removeKeys;return new removeAssociation(o,e,a,function(o,a){if(o)return s(o);for(var n in i.buildAssociationOperations.removeKeys)e.associations[n].removeModels=[];s(null,a)})}]},function(a,n){if(a)return i.reject(a),s(a);var r=[];if(n.addAssociations&&(r=r.concat(n.addAssociations)),n.removeAssociations&&(r=r.concat(n.removeAssociations)),r.length>0)return i.reject(r),s(r);var t=o.primaryKey,c=n.updateRecord[0].toObject(),d=Object.keys(e.associations),u={};u[t]=c[t];var l=o.findOne(u);d.forEach(function(o){l.populate(o)}),l.exec(function(o,e){return o?s(o):(i.resolve(e),void s(null,e))})}),i.promise};
},{"../../../utils/helpers":70,"../associationMethods/add":29,"../associationMethods/remove":30,"../associationMethods/update":31,"async":90,"deep-diff":125,"lodash":126,"q":172}],35:[function(require,module,exports){
var _=require("lodash"),utils=require("../../../utils/helpers"),hasOwnProperty=utils.object.hasOwnProperty,toObject=module.exports=function(t,o){return this.context=t,this.proto=o,this.usedJoins=[],this.object=Object.create(o.__proto__),this.addAssociations(),this.addProperties(),this.makeObject(),this.filterJoins(),this.filterFunctions(),this.object};toObject.prototype.addAssociations=function(){if(this.proto._properties&&this.proto._properties.showJoins)for(var t in this.proto.associations)if(hasOwnProperty(this.proto.associations[t],"value")){var o=[],e=this.proto.associations[t].value;e.forEach(function(t){if("object"==typeof t){var e=Object.create(t.__proto__);Object.keys(t).forEach(function(o){e[o]=_.cloneDeep(t[o])}),o.push(e)}}),this.object[t]=o}else{var r=this.proto[t];if(_.isObject(r)&&!Array.isArray(r)){var i=Object.create(r.__proto__);Object.keys(r).forEach(function(t){i[t]=_.cloneDeep(r[t])}),this.object[t]=i}else this.object[t]=r}},toObject.prototype.addProperties=function(){var t=this;Object.keys(this.proto).forEach(function(o){hasOwnProperty(t.object,o)||(t.object[o]=_.cloneDeep(t.proto[o]))})},toObject.prototype.makeObject=function(){var t=this;this.proto._properties&&this.proto._properties.showJoins&&Object.keys(this.proto.associations).forEach(function(o){if(t.proto._properties&&t.proto._properties.joins){var e=o;if(t.context._attributes[o].model&&(e=t.context._attributes[o].model.toLowerCase()),t.context._attributes[o].collection&&(e=t.context._attributes[o].collection.toLowerCase()),!(t.proto._properties.joins.indexOf(e)<0&&t.proto._properties.joins.indexOf(o)<0)){if(t.usedJoins.push(o),Array.isArray(t.object[o])){var r=[];return t.object[o].forEach(function(t){hasOwnProperty(t.__proto__,"toJSON")&&r.push(t.toJSON())}),void(t.object[o]=r)}if(t.object[o])return"object"!=typeof t.object[o]?void(t.object[o]=t.object[o]):void(hasOwnProperty(t.object[o].__proto__,"toJSON")&&(t.object[o]=t.object[o].toJSON()))}}})},toObject.prototype.filterJoins=function(){var t=this.context._attributes,o=this.proto._properties;for(var e in t)(hasOwnProperty(t[e],"model")||hasOwnProperty(t[e],"collection"))&&(o||!hasOwnProperty(t[e],"collection")?(o&&!o.showJoins&&(t[e].model||delete this.object[e]),o&&o.joins&&this.usedJoins.indexOf(e)<0&&(t[e].model||delete this.object[e])):delete this.object[e])},toObject.prototype.filterFunctions=function(){for(var t in this.object)"function"==typeof this.object[t]&&delete this.object[t]};
},{"../../../utils/helpers":70,"lodash":126}],36:[function(require,module,exports){
var _=require("lodash"),Association=require("../association"),utils=require("../../../utils/helpers"),hasOwnProperty=utils.object.hasOwnProperty,Define=module.exports=function(e,o){var t=this;this.proto=o,Object.defineProperty(o,"associations",{enumerable:!1,writable:!0,value:{}}),Object.defineProperty(o,"associationsCache",{enumerable:!1,writable:!0,value:{}});var r=_.cloneDeep(e._attributes)||{},i=this.collectionKeys(r),n=this.modelKeys(r);(0!==i.length||0!==n.length)&&(i.forEach(function(e){t.buildHasManyProperty(e)}),n.forEach(function(e){t.buildBelongsToProperty(e)}))};Define.prototype.collectionKeys=function(e){var o=[];for(var t in e)hasOwnProperty(e[t],"collection")&&o.push(t);return o},Define.prototype.modelKeys=function(e){var o=[];for(var t in e)hasOwnProperty(e[t],"model")&&o.push({key:t,val:e[t]});return o},Define.prototype.buildHasManyProperty=function(e){var o=this;this.proto.associations[e]=new Association,Object.defineProperty(this.proto,e,{set:function(t){o.proto.associations[e]._setValue(t)},get:function(){return o.proto.associations[e]._getValue()},enumerable:!0,configurable:!0})},Define.prototype.buildBelongsToProperty=function(e){this.proto.associations[e.key]=e.val,this.proto.associationsCache[e.key]={}};
},{"../../../utils/helpers":70,"../association":28,"lodash":126}],37:[function(require,module,exports){
module.exports={normalizeAssociations:require("./normalizeAssociations"),defineAssociations:require("./defineAssociations")};
},{"./defineAssociations":36,"./normalizeAssociations":38}],38:[function(require,module,exports){
var Normalize=module.exports=function(o,t){this.proto=t;var r=o.waterline.collections[o.identity].attributes||{};this.collections(r),this.models(r)};Normalize.prototype.collections=function(o){for(var t in o)o[t].collection&&this.proto[t]&&!Array.isArray(this.proto[t])&&(this.proto[t]=[this.proto[t]])},Normalize.prototype.models=function(o){for(var t in o)o[t].model&&this.proto[t]&&Array.isArray(this.proto[t])&&(this.proto[t]=this.proto[t][0])};
},{}],39:[function(require,module,exports){
var extend=require("../../utils/extend"),_=require("lodash"),util=require("util"),Model=module.exports=function(e,t){var i=this;e=e||{},t=t||{},Object.defineProperty(this,"_properties",{enumerable:!1,writable:!1,value:t}),this._defineAssociations();for(var s in e)this[s]=e[s],this.associationsCache.hasOwnProperty(s)&&(this.associationsCache[s]=_.cloneDeep(e[s]));return this._normalizeAssociations(),this.inspect=function(){var e;try{e=i.toObject()}catch(t){}return e?util.inspect(e):i},this};Model.extend=extend;
},{"../../utils/extend":68,"lodash":126,"util":124}],40:[function(require,module,exports){
module.exports=function(){var t=this;Object.keys(this.connections).forEach(function(n){var e=t.connections[n]._adapter||{};Object.keys(e).forEach(function(o){return["identity","tableName"].indexOf(o)>=0||t[o]?void 0:"function"!=typeof e[o]?void(t[o]=e[o]):void(t[o]=function(){var i=t.tableName||t.identity,c=[n,i].concat(Array.prototype.slice.call(arguments));e[o].apply(t,c)})})})};
},{}],41:[function(require,module,exports){
function _validateValues(r){for(var e,a=0;a<r.length;a++)r[a]!==Object(r[a])&&(e="Invalid valuesList specified (should be an array of valid values objects!)");return e}function _validate(r,e){var a=this;for(var i in a.attributes)if(!r[i]&&r[i]!==!1&&hasOwnProperty(a.attributes[i],"defaultsTo")){var t=a.attributes[i].defaultsTo;r[i]="function"==typeof t?t.call(r):_.clone(t)}r=a._cast.run(r),async.series([function(e){callbacks.validate(a,r,!0,e)},function(e){callbacks.beforeCreate(a,r,e)}],function(i){return i?e(i):(a.autoCreatedAt&&(r.createdAt=new Date),a.autoUpdatedAt&&(r.updatedAt=new Date),void e())})}var async=require("async"),_=require("lodash"),usageError=require("../utils/usageError"),utils=require("../utils/helpers"),normalize=require("../utils/normalize"),callbacks=require("../utils/callbacksRunner"),Deferred=require("./deferred"),hasOwnProperty=utils.object.hasOwnProperty;module.exports={createEach:function(r,e){function a(r,e){i.create(r,function(r,a){return r?e(r):(s.push(a),void e())})}var i=this;if(3===arguments.length){var t=Array.prototype.slice.call(arguments);e=t.pop(),r=t.pop()}if("function"!=typeof e)return new Deferred(this,this.createEach,{},r);var n=utils.capitalize(this.identity)+".createEach(valuesList, callback)";if(!r)return usageError("No valuesList specified!",n,e);if(!Array.isArray(r))return usageError("Invalid valuesList specified (should be an array!)",n,e);if("function"!=typeof e)return usageError("Invalid callback specified!",n,e);var u=_validateValues(r);if(u)return usageError(u,n,e);var s=[];async.each(r,a,function(r){return r?e(r):void e(null,s)})},findOrCreateEach:function(r,e,a){var i=this;if("function"==typeof e&&(a=e,e=null),r=normalize.criteria(r),"function"!=typeof a)return new Deferred(this,this.findOrCreateEach,r,e);var t=utils.capitalize(this.identity)+".findOrCreateEach(criteria, valuesList, callback)";if("function"!=typeof a)return usageError("Invalid callback specified!",t,a);if(!r)return usageError("No criteria specified!",t,a);if(!Array.isArray(r))return usageError("No criteria specified!",t,a);if(!e)return usageError("No valuesList specified!",t,a);if(!Array.isArray(e))return usageError("Invalid valuesList specified (should be an array!)",t,a);var n=_validateValues(e);return n?usageError(n,t,a):void async.each(e,function(r,e){_validate.call(i,r,e)},function(t){if(t)return a(t);var n=[];e.forEach(function(r){r=i._transformer.serialize(r),r=i._schema.cleanValues(r),n.push(r)}),e=n;var u=[];r.forEach(function(r){r=i._transformer.serialize(r),u.push(r)}),r=u,i.adapter.findOrCreateEach(r,e,function(r,e){if(r)return a(r);var t=[];e.forEach(function(r){r=i._transformer.unserialize(r),t.push(r)}),e=t,async.each(e,function(r,e){callbacks.afterCreate(i,r,e)},function(r){if(r)return a(r);var t=[];e.forEach(function(r){t.push(new i._model(r))}),a(null,t)})})})}};
},{"../utils/callbacksRunner":67,"../utils/helpers":70,"../utils/normalize":76,"../utils/usageError":82,"./deferred":44,"async":90,"lodash":126}],42:[function(require,module,exports){
var async=require("async"),_=require("lodash"),usageError=require("../utils/usageError"),utils=require("../utils/helpers"),normalize=require("../utils/normalize"),Deferred=require("./deferred"),hasOwnProperty=utils.object.hasOwnProperty;module.exports={findOrCreate:function(r,e,i){var t=this;"function"==typeof e&&(i=e,e=null);var n=utils.capitalize(this.identity)+".findOrCreate([criteria], values, callback)";return"function"!=typeof i||r?(r=normalize.criteria(r),"function"!=typeof i?new Deferred(this,this.findOrCreate,r,e):Array.isArray(r)&&Array.isArray(e)?this.findOrCreateEach(r,e,i):"function"!=typeof i?usageError("Invalid callback specified!",n,i):void this.find(r).exec(function(r,n){if(r)return i(r);if(n&&0!==n.length){n=t._transformer.unserialize(n[0]);var a=new t._model(n);return i(null,a)}t.create(e).exec(function(r,e){return r?i(r):i(null,e)})})):usageError("No criteria option specified!",n,i)}};
},{"../utils/helpers":70,"../utils/normalize":76,"../utils/usageError":82,"./deferred":44,"async":90,"lodash":126}],43:[function(require,module,exports){
module.exports={describe:function(t){this.adapter.describe(t)},alter:function(t,e){this.adapter.alter(t,e)},drop:function(t){this.adapter.drop(t)}};
},{}],44:[function(require,module,exports){
function buildAggregate(e,t){t[0]instanceof Array&&(t=t[0]),this._criteria[e]=t||{}}var Q=require("q"),_=require("lodash"),normalize=require("../utils/normalize"),utils=require("../utils/helpers"),acyclicTraversal=require("../utils/acyclicTraversal"),hasOwnProperty=utils.object.hasOwnProperty,Deferred=module.exports=function(e,t,r,i){return e?t?(this._context=e,this._method=t,this._criteria=r,this._values=i||null,this):new Error("Must supply a method to a new Deferred object. Usage: new Deferred(context, method, criteria)"):new Error("Must supply a context to a new Deferred object. Usage: new Deferred(context, method, criteria)")};Deferred.prototype.populateDeep=function(e){{var t=this._context.identity,r=this._context.waterline.schema;acyclicTraversal(r,t,e)}return this},Deferred.prototype.populateAll=function(e){var t=this;return this._context.associations.forEach(function(r){t.populate(r.alias,e)}),this},Deferred.prototype.populate=function(e,t){var r,i,o=this,n=this._criteria.joins||[],a="id";if(r=this._context.waterline.schema[this._context.identity].attributes[e],Object.keys(this._context._attributes).forEach(function(e){hasOwnProperty(o._context._attributes[e],"primaryKey")&&(a=o._context._attributes[e].columnName||e)}),!r)throw new Error("Attempting to populate an attribute that doesn't exist");var s=this._context.waterline.collections[this._context.identity].attributes[e];i={parent:this._context.identity,parentKey:r.columnName||a,child:r.references,childKey:r.on,select:Object.keys(this._context.waterline.schema[r.references].attributes),alias:e,removeParentKey:s.model?!0:!1,model:hasOwnProperty(s,"model")?!0:!1,collection:hasOwnProperty(s,"collection")?!0:!1};var c=[];if(Object.keys(this._context.waterline.schema[r.references].attributes).forEach(function(e){var t=o._context.waterline.schema[r.references].attributes[e];return hasOwnProperty(t,"columnName")?void c.push(t.columnName):void c.push(e)}),i.select=c,this._context.waterline.schema[r.references].junctionTable&&(i.select=!1),n.push(i),this._context.waterline.schema[r.references].junctionTable&&hasOwnProperty(r,"on")){var l=_.clone(this._context.waterline.schema[r.references].attributes);Object.keys(l).forEach(function(e){var t=l[e];return hasOwnProperty(t,"references")?hasOwnProperty(t,"columnName")&&t.columnName===r.on?void delete l[e]:void(hasOwnProperty(t,"columnName")&&t.columnName!==r.on||e!==r.on&&delete l[e]):void delete l[e]});var u=Object.keys(l)[0];u&&(i={parent:r.references,parentKey:l[u].columnName,child:l[u].references,childKey:l[u].on,select:Object.keys(this._context.waterline.schema[l[u].references].attributes),alias:e,junctionTable:!0,removeParentKey:s.model?!0:!1,model:!1,collection:!0},n.push(i))}return t&&n.length>1?n[1].criteria=t:t&&(n[0].criteria=t),this._criteria.joins=n,this},Deferred.prototype.where=function(e){if(!e)return this;if(e=normalize.criteria(e),e===!1&&(this._criteria=!1),!e||!e.where)return this;this._criteria||(this._criteria={});var t=this._criteria.where||{};return Object.keys(e.where).forEach(function(r){t[r]=e.where[r]}),this._criteria.where=t,this},Deferred.prototype.limit=function(e){return this._criteria.limit=e,this},Deferred.prototype.skip=function(e){return this._criteria.skip=e,this},Deferred.prototype.paginate=function(e){var t=10;void 0===e&&(e={page:0,limit:t});var r=e.page||0,i=e.limit||t,o=0;return r>0&&0===i&&(o=r-1),r>0&&i>0&&(o=r*i-i),this.skip(o).limit(i),this},Deferred.prototype.groupBy=function(){return buildAggregate.call(this,"groupBy",Array.prototype.slice.call(arguments)),this},Deferred.prototype.sort=function(e){if(!e)return this;e=normalize.criteria({sort:e});var t=this._criteria.sort||{};return Object.keys(e.sort).forEach(function(r){t[r]=e.sort[r]}),this._criteria.sort=t,this},Deferred.prototype.sum=function(){return buildAggregate.call(this,"sum",Array.prototype.slice.call(arguments)),this},Deferred.prototype.average=function(){return buildAggregate.call(this,"average",Array.prototype.slice.call(arguments)),this},Deferred.prototype.min=function(){return buildAggregate.call(this,"min",Array.prototype.slice.call(arguments)),this},Deferred.prototype.max=function(){return buildAggregate.call(this,"max",Array.prototype.slice.call(arguments)),this},Deferred.prototype.set=function(e){return this._values=e,this},Deferred.prototype.exec=function(e){if(!e)return void console.log(new Error("Error: No Callback supplied, you must define a callback.").message);e=normalize.callback(e);var t=[this._criteria,e];this._values&&t.splice(1,0,this._values),this._method.apply(this._context,t)},Deferred.prototype.toPromise=function(){var e=Q.defer();return this.exec(e.makeNodeResolver()),e.promise},Deferred.prototype.then=function(e,t){return this.toPromise().then(e,t)},Deferred.prototype.spread=function(e){return this.toPromise().spread(e)},Deferred.prototype.fail=function(e){return this.toPromise().fail(e)};
},{"../utils/acyclicTraversal":65,"../utils/helpers":70,"../utils/normalize":76,"lodash":126,"q":172}],45:[function(require,module,exports){
var _=require("lodash"),usageError=require("../../utils/usageError"),utils=require("../../utils/helpers"),normalize=require("../../utils/normalize"),Deferred=require("../deferred");module.exports=function(e,i,r){var t=utils.capitalize(this.identity)+".count([criteria],[options],callback)";return"function"==typeof e&&(r=e,e=null,i=null),"function"==typeof i&&(r=i,i=null),"function"!=typeof r?new Deferred(this,this.count,e):(e=normalize.criteria(e),_.isObject(i)&&_.isObject(e)&&(e=_.extend({},e,i)),_.isFunction(e)||_.isFunction(i)?usageError("Invalid options specified!",t,r):(e=this._transformer.serialize(e),void this.adapter.count(e,r)))};
},{"../../utils/helpers":70,"../../utils/normalize":76,"../../utils/usageError":82,"../deferred":44,"lodash":126}],46:[function(require,module,exports){
function processValues(e){for(var a in this.attributes)if(!hasOwnProperty(e,a)&&hasOwnProperty(this.attributes[a],"defaultsTo")){var t=this.attributes[a].defaultsTo;e[a]="function"==typeof t?t.call(e):_.clone(t)}var r=_.cloneDeep(e),s=nestedOperations.valuesParser.call(this,this.identity,this.waterline.schema,e);return e=nestedOperations.reduceAssociations.call(this,this.identity,this.waterline.schema,e),e=this._cast.run(e),{values:e,originalValues:r,associations:s}}function createBelongsTo(e,a){var t=this;async.each(e.associations.models,function(a,r){if(!_.isPlainObject(e.values[a]))return r();var s,i=t._schema.schema[a];if(hasOwnProperty(i,"collection")&&(s=i.collection),hasOwnProperty(i,"model")&&(s=i.model),!s)return r();var n=t.waterline.collections[s],l=e.originalValues[a][n.primaryKey],o={};o[n.primaryKey]=l;var c;c=l?n.findOrCreate(o,e.values[a]):n.create(e.values[a]),c.exec(function(t,s){if(t)return r(t);var i=s[n.primaryKey];e.values[a]=i,r()})},a)}function beforeCallbacks(e,a){var t=this;async.series([function(a){callbacks.validate(t,e.values,!1,a)},function(a){callbacks.beforeCreate(t,e.values,a)}],a)}function createValues(e,a){var t=this;t.autoCreatedAt&&!e.values.createdAt&&(e.values.createdAt=new Date),t.autoUpdatedAt&&!e.values.updatedAt&&(e.values.updatedAt=new Date),e.values=t._transformer.serialize(e.values),e.values=t._schema.cleanValues(e.values),t.adapter.create(e.values,function(r,s){function i(e){callbacks.afterCreate(t,e,function(r){if(r)return a(r);var s=new t._model(e);a(null,s)})}if(r)return"object"==typeof r&&(r.model=t._model.globalId),a(r);if(s=t._transformer.unserialize(s),0===e.associations.collections.length)return i(s);var n=new t._model(s);nestedOperations.create.call(t,n,e.originalValues,e.associations.collections,function(e){return e?a(e):i(n.toObject())})})}var async=require("async"),_=require("lodash"),utils=require("../../utils/helpers"),Deferred=require("../deferred"),callbacks=require("../../utils/callbacksRunner"),nestedOperations=require("../../utils/nestedOperations"),hasOwnProperty=utils.object.hasOwnProperty;module.exports=function(e,a){var t=this;if(3===arguments.length){var r=Array.prototype.slice.call(arguments);a=r.pop(),e=r.pop()}if("function"!=typeof a)return new Deferred(this,this.create,{},e);if(Array.isArray(e))return this.createEach(e,a);var s=processValues.call(this,e);createBelongsTo.call(this,s,function(e){return e?a(e):void beforeCallbacks.call(t,s,function(e){return e?a(e):void createValues.call(t,s,a)})})};
},{"../../utils/callbacksRunner":67,"../../utils/helpers":70,"../../utils/nestedOperations":72,"../deferred":44,"async":90,"lodash":126}],47:[function(require,module,exports){
var async=require("async"),_=require("lodash"),usageError=require("../../utils/usageError"),utils=require("../../utils/helpers"),normalize=require("../../utils/normalize"),Deferred=require("../deferred"),getRelations=require("../../utils/getRelations"),callbacks=require("../../utils/callbacksRunner"),hasOwnProperty=utils.object.hasOwnProperty;module.exports=function(e,r){var t,i=this;if("function"==typeof e&&(r=e,e={}),e=normalize.expandPK(i,e),e=normalize.criteria(e),"function"!=typeof r)return new Deferred(this,this.destroy,e);var n=utils.capitalize(this.identity)+".destroy([options], callback)";return e?"function"!=typeof r?usageError("Invalid callback specified!",n,r):void callbacks.beforeDestroy(i,e,function(n){return n?r(n):(e=i._transformer.serialize(e),void i.adapter.destroy(e,function(e,n){function a(e,r){var a,o=i.waterline.collections[e];if(Object.keys(o._attributes).forEach(function(e){var r=o._attributes[e];r.references===i.identity&&(a=e)}),!a)return r();var s=n.map(function(e){return e[t]}),u={};u[a]=s,o.destroy(u).exec(r)}function o(){callbacks.afterDestroy(i,n,function(e){return e?r(e):void r(null,n)})}if(e)return r(e);var s=getRelations({schema:i.waterline.schema,parentCollection:i.identity});if(0===s.length)return o();for(var u in i.attributes)if(i.attributes[u].hasOwnProperty("primaryKey")&&i.attributes[u].primaryKey){t=u;break}async.each(s,a,function(e){return e?r(e):void o()})}))}):usageError("No options were defined!",n,r)};
},{"../../utils/callbacksRunner":67,"../../utils/getRelations":69,"../../utils/helpers":70,"../../utils/normalize":76,"../../utils/usageError":82,"../deferred":44,"async":90,"lodash":126}],48:[function(require,module,exports){
module.exports={create:require("./create"),update:require("./update"),destroy:require("./destroy"),count:require("./count"),join:require("./join")};
},{"./count":45,"./create":46,"./destroy":47,"./join":49,"./update":50}],49:[function(require,module,exports){
module.exports=function(o,t,e,i){this._adapter.join(o,t,e,i)};
},{}],50:[function(require,module,exports){
function prepareArguments(e,r){e=normalize.expandPK(this,e),e=normalize.criteria(e);var a=_.cloneDeep(r),t=nestedOperations.valuesParser.call(this,this.identity,this.waterline.schema,r);return r=nestedOperations.reduceAssociations.call(this,this.identity,this.waterline.schema,r),r=this._cast.run(r),{criteria:e,values:r,originalValues:a,associations:t}}function createBelongsTo(e,r){var a=this;async.each(e.associations.models,function(r,t){if(!_.isPlainObject(e.values[r]))return t();var i,s=a._schema.schema[r];if(hasOwnProperty(s,"collection")&&(i=s.collection),hasOwnProperty(s,"model")&&(i=s.model),!i)return t();var n=a.waterline.collections[i],l=e.originalValues[r][n.primaryKey],o={};o[n.primaryKey]=l;var u;u=l?n.findOrCreate(o,e.values[r]):n.create(e.values[r]),u.exec(function(a,i){if(a)return t(a);var s=i[n.primaryKey];e.values[r]=s,t()})},r)}function beforeCallbacks(e,r){var a=this;async.series([function(r){callbacks.validate(a,e,!0,r)},function(r){callbacks.beforeUpdate(a,e,r)}],r)}function updateRecords(e,r){var a=this;this.autoUpdatedAt&&(e.values.updatedAt=new Date),e.values=this._transformer.serialize(e.values),e.values=this._schema.cleanValues(e.values),e.criteria=a._transformer.serialize(e.criteria),a.adapter.update(e.criteria,e.values,function(t,i){if(t)return"object"==typeof t&&(t.model=a._model.globalId),r(t);Array.isArray(i)||(i=[i]);var s=i.map(function(e){return a._transformer.unserialize(e)});updatedNestedAssociations.call(a,e,s,function(e){return e?r(e):void async.each(s,function(e,r){callbacks.afterUpdate(a,e,r)},function(e){if(e)return r(e);var t=s.map(function(e){return new a._model(e)});r(null,t)})})})}function updatedNestedAssociations(e,r,a){var t=this,i=e.associations||{};if(i.models=_.filter(i.models,function(r){var a=e.originalValues[r];return _.isPlainObject(a)||Array.isArray(a)?!0:!1}),0===i.collections.length&&0===i.models.length)return a();var s=r.map(function(e){return new t._model(e)}),n=[s,e.originalValues,e.associations,a];nestedOperations.update.apply(t,n)}var async=require("async"),_=require("lodash"),usageError=require("../../utils/usageError"),utils=require("../../utils/helpers"),normalize=require("../../utils/normalize"),Deferred=require("../deferred"),callbacks=require("../../utils/callbacksRunner"),nestedOperations=require("../../utils/nestedOperations"),hasOwnProperty=utils.object.hasOwnProperty;module.exports=function(e,r,a){var t=this;if("function"==typeof e&&(a=e,e=null),"function"!=typeof a)return new Deferred(this,this.update,e,r);var i=utils.capitalize(this.identity)+".update(criteria, values, callback)";if(!r)return usageError("No updated values specified!",i,a);var s=prepareArguments.call(this,e,r);createBelongsTo.call(this,s,function(e){return e?a(e):void beforeCallbacks.call(t,s.values,function(e){return e?a(e):void updateRecords.call(t,s,a)})})};
},{"../../utils/callbacksRunner":67,"../../utils/helpers":70,"../../utils/nestedOperations":72,"../../utils/normalize":76,"../../utils/usageError":82,"../deferred":44,"async":90,"lodash":126}],51:[function(require,module,exports){
var usageError=require("../../utils/usageError"),utils=require("../../utils/helpers"),normalize=require("../../utils/normalize"),sorter=require("../../utils/sorter"),Deferred=require("../deferred"),Joins=require("./joins"),Operations=require("./operations"),Integrator=require("../integrator"),waterlineCriteria=require("waterline-criteria"),_=require("lodash"),async=require("async"),hasOwnProperty=utils.object.hasOwnProperty;module.exports={findOne:function(r,e){var i=this;if("function"==typeof r&&(e=r,r=null),r=normalize.expandPK(i,r),r=normalize.criteria(r),"function"!=typeof e)return new Deferred(this,this.findOne,r);if(r=i._transformer.serialize(r),r===!1)return e(null,null);var n=new Operations(i,r,"findOne");n.run(function(n,t){function a(n){if(!n)return e();!Array.isArray(n)&&n&&(n=[n]);var t=[];n.forEach(function(r){t.push(i._transformer.unserialize(r))});var a=[],o=r.joins?r.joins:[],s=new Joins(o,t,i._schema.schema,i.waterline.collections);return s&&s.models&&s.models.forEach?(s.models.forEach(function(r){a.push(new i._model(r,s.options))}),void e(null,a[0])):e(new Error("Values returned from operations set are not an array..."))}if(n)return e(n);if(!t.cache)return e();if(!r.joins)return t=t.cache[i.identity],a(t);if(t.combined)return a(t.cache[i.identity]);var o="id";Object.keys(i._schema.schema).forEach(function(r){i._schema.schema[r].hasOwnProperty("primaryKey")&&(o=r)}),Integrator(t.cache,r.joins,o,function(n,t){if(n)return e(n);if(!t)return e();var o=_.cloneDeep(r.where);o||(o={}),r.joins.forEach(function(r){return hasOwnProperty(r,"alias")?hasOwnProperty(o,"or")?void o.or.forEach(function(e){hasOwnProperty(e,r.alias)&&delete e[r.alias]}):void(hasOwnProperty(o,r.alias)&&delete o[r.alias]):void 0});var s={where:o};t=waterlineCriteria("parent",{parent:t},s).results;var c=[];t.forEach(function(e){r.joins.forEach(function(r){if(r.criteria){var i=normalize.criteria(r.criteria);if(i.sort){var n=r.alias;e[n]=sorter(e[n],i.sort)}}});var n=i._transformer.serialize(e);c.push(n)}),a(c)})})},find:function(r,e,i){var n=this,t=utils.capitalize(this.identity)+".find([criteria],[options]).exec(callback|switchback)";if("function"==typeof r&&(i=r,r=null,e=null),"function"==typeof e&&(i=e,e=null),r=normalize.expandPK(n,r),r=normalize.criteria(r),"function"==typeof r||"criteria"==typeof e)return usageError("Invalid options specified!",t,i);if("function"!=typeof i)return new Deferred(this,this.find,r);if(r===!1)return i(null,[]);if(e===Object(e)&&r===Object(r)&&(r=_.extend({},r,e)),!n._transformer)throw new Error("Waterline can not access transformer-- maybe the context of the method is being overridden?");r=n._transformer.serialize(r);var a=new Operations(n,r,"find");a.run(function(e,t){function a(e){if(!e)return i(null,[]);!Array.isArray(e)&&e&&(e=[e]);var t=[];e&&e.forEach(function(r){t.push(n._transformer.unserialize(r))});var a=[],o=r.joins?r.joins:[],s=new Joins(o,t,n._schema.schema,n.waterline.collections);return s&&s.models&&s.models.forEach?(s.models.forEach(function(r){a.push(new n._model(r,s.options))}),void i(null,a)):i(new Error("Values returned from operations set are not an array..."))}if(e)return i(e);if(!t.cache)return i();if(!r.joins)return t=t.cache[n.identity],a(t);if(t.combined)return a(t.cache[n.identity]);var o="id";Object.keys(n._schema.schema).forEach(function(r){n._schema.schema[r].hasOwnProperty("primaryKey")&&(o=r)}),Integrator(t.cache,r.joins,o,function(e,t){if(e)return i(e);if(!t)return i();var o=_.cloneDeep(r.where);o||(o={}),r.joins.forEach(function(r){return hasOwnProperty(r,"alias")?hasOwnProperty(o,"or")?void o.or.forEach(function(e){hasOwnProperty(e,r.alias)&&delete e[r.alias]}):void(hasOwnProperty(o,r.alias)&&delete o[r.alias]):void 0});var s={where:o};t=waterlineCriteria("parent",{parent:t},s).results;var c=[];t.forEach(function(e){r.joins.forEach(function(r){if(r.criteria){var i=normalize.criteria(r.criteria);if(i.sort){var n=r.alias;e[n]=sorter(e[n],i.sort)}}});var i=n._transformer.serialize(e);c.push(i)}),a(c)})})},where:function(){this.find.apply(this,Array.prototype.slice.call(arguments))},select:function(){this.find.apply(this,Array.prototype.slice.call(arguments))},findAll:function(r,e,i){return"function"==typeof r&&(i=r,r=null,e=null),"function"==typeof e&&(i=e,e=null),"function"!=typeof i?new Deferred(this,this.findAll,r):void i(new Error("In Waterline >= 0.9, findAll() has been deprecated in favor of find().\nPlease visit the migration guide at http://sailsjs.org for help upgrading."))}};
},{"../../utils/helpers":70,"../../utils/normalize":76,"../../utils/sorter":78,"../../utils/usageError":82,"../deferred":44,"../integrator":59,"./joins":54,"./operations":55,"async":90,"lodash":126,"waterline-criteria":173}],52:[function(require,module,exports){
function buildJoin(){var e,i,n=this;if(i=n.waterline.schema[n.identity].attributes[name],Object.keys(n._attributes).forEach(function(i){hasOwnProperty(n._attributes[i],"primaryKey")&&(e=i)}),!i)throw new Error("Attempting to populate an attribute that doesn't exist");var t=n.waterline.collections[n.identity].attributes[name],r={parent:n._tableName,parentKey:i.columnName||e,child:i.references,childKey:i.on,select:!0,removeParentKey:t.model?!0:!1};return r}function associationQueryCriteria(e,i,n){var t={where:{},joins:[]},r=buildJoin.call(e);return t.joins.push(r),t.where[n]=i,t}var _=require("lodash"),usageError=require("../../utils/usageError"),utils=require("../../utils/helpers"),normalize=require("../../utils/normalize"),hasOwnProperty=utils.object.hasOwnProperty,finder=module.exports={};finder.buildDynamicFinders=function(){var e=this;Object.keys(this._schema.schema).forEach(function(i){if(hasOwnProperty(e._schema.schema[i],"foreignKey"))return void e.generateAssociationFinders(i);var n=["findOneBy*","findOneBy*In","findOneBy*Like","findBy*","findBy*In","findBy*Like","countBy*","countBy*In","countBy*Like"],t=["*StartsWith","*Contains","*EndsWith"];n.forEach(function(n){e.generateDynamicFinder(i,n)}),t.forEach(function(n){e.generateDynamicFinder(i,n,!0)})})},finder.generateDynamicFinder=function(e,i,n){var t,r=this,a=n?e:utils.capitalize(e),s=i.replace(/\*/g,a);this[s]=function(n,a,o){"function"==typeof a&&(o=a,a=null),a=a||{};var u=utils.capitalize(r.identity)+"."+s+"(someValue,[options],callback)";if("undefined"==typeof n)return usageError("No value specified!",u,o);if(a.where)return usageError("Cannot specify `where` option in a dynamic "+i+"*() query!",u,o);switch(a.where={},a.where[e]=n,i){case"findOneBy*":case"findOneBy*In":return r.findOne(a,o);case"findOneBy*Like":return t=_.extend(a,{where:{like:a.where}}),r.findOne(t,o);case"findBy*":case"findBy*In":return r.find(a,o);case"findBy*Like":return t=_.extend(a,{where:{like:a.where}}),r.find(t,o);case"countBy*":case"countBy*In":return r.count(a,o);case"countBy*Like":return t=_.extend(a,{where:{like:a.where}}),r.count(t,o);case"*StartsWith":return r.startsWith(a,o);case"*Contains":return r.contains(a,o);case"*EndsWith":return r.endsWith(a,o)}}},finder.generateAssociationFinders=function(e){var i,n,t=this;for(var r in this._attributes){var a=this._attributes[r];hasOwnProperty(a,"model")&&a.model.toLowerCase()+"_id"===e&&(i=r,n=a.model)}i&&n&&(this["findOneBy"+utils.capitalize(i)]=function(n,r){var a=utils.capitalize(t.identity)+".findBy"+utils.capitalize(i)+"(someValue, callback)";if("undefined"==typeof n)return usageError("No value specified!",a,r);if("function"==typeof n)return usageError("No value specified!",a,r);var s=associationQueryCriteria(t,n,e);return this.findOne(s,r)},this["findBy"+utils.capitalize(i)]=function(n,r){var a=utils.capitalize(t.identity)+".findBy"+utils.capitalize(i)+"(someValue, callback)";if("undefined"==typeof n)return usageError("No value specified!",a,r);if("function"==typeof n)return usageError("No value specified!",a,r);var s=associationQueryCriteria(t,n,e);return this.find(s,r)})};
},{"../../utils/helpers":70,"../../utils/normalize":76,"../../utils/usageError":82,"lodash":126}],53:[function(require,module,exports){
var usageError=require("../../utils/usageError"),utils=require("../../utils/helpers"),normalize=require("../../utils/normalize");module.exports={findOneLike:function(i,t,r){var e=utils.capitalize(this.identity)+".findOneLike([criteria],[options],callback)";return(i=normalize.likeCriteria(i,this._schema.schema))?void this.findOne(i,t,r):usageError("Criteria must be an object!",e,r)},findLike:function(i,t,r){var e=utils.capitalize(this.identity)+".findLike([criteria],[options],callback)";return(i=normalize.likeCriteria(i,this._schema.schema))?void this.find(i,t,r):usageError("Criteria must be an object!",e,r)},startsWith:function(i,t,r){var e=utils.capitalize(this.identity)+".startsWith([criteria],[options],callback)";return(i=normalize.likeCriteria(i,this._schema.schema,function(i){return i+"%"}))?void this.find(i,t,r):usageError("Criteria must be an object!",e,r)},endsWith:function(i,t,r){var e=utils.capitalize(this.identity)+".startsWith([criteria],[options],callback)";return(i=normalize.likeCriteria(i,this._schema.schema,function(i){return"%"+i}))?void this.find(i,t,r):usageError("Criteria must be an object!",e,r)},contains:function(i,t,r){var e=utils.capitalize(this.identity)+".startsWith([criteria],[options],callback)";return(i=normalize.likeCriteria(i,this._schema.schema,function(i){return"%"+i+"%"}))?void this.find(i,t,r):usageError("Criteria must be an object!",e,r)}};
},{"../../utils/helpers":70,"../../utils/normalize":76,"../../utils/usageError":82}],54:[function(require,module,exports){
var _=require("lodash"),Joins=module.exports=function(o,i,s,n){return this.joins=o||[],this.values=i||[],this.schema=s||{},this.collections=n||{},this.modelOptions(),this.models=this.makeModels(),this};Joins.prototype.modelOptions=function(){var o,i=this;this.options={showJoins:this.joins?!0:!1},this.joins&&(o=this.joins.filter(function(o){return o.select?o:!1}),this.options.joins=o.map(function(o){var s=[];return o.junctionTable?(i.joins.forEach(function(i){i.child===o.parent&&s.push(i.alias)}),s?s:o.child):o.child}),this.options.joins=_.uniq(_.flatten(this.options.joins)))},Joins.prototype.makeModels=function(){var o,i=this,s=[];return this.values&&this.values.forEach?(this.values.forEach(function(n){o=i.modelize(n),s.push(o)}),s):this.values},Joins.prototype.modelize=function(o){var i=this;return Object.keys(o).forEach(function(s){var n,t,e=!1;if(i.options.showJoins&&i.options.joins&&(n=i.schema[s],!(n&&!n.hasOwnProperty("model")||(n&&n.hasOwnProperty("model")&&(e=n.model),e&&i.options.joins.indexOf(e)<0||(t=i.checkForJoin(s),!t.used))))){if(Array.isArray(o[s])){var r=[];return o[s].forEach(function(o){var s,n;return e?(s=i.collections[e],o=s._transformer.unserialize(o),n=new s._model(o,{showJoins:!1}),r.push(n)):(s=i.collections[t.join.child],o=s._transformer.unserialize(o),n=new s._model(o,{showJoins:!1}),r.push(n))}),void(o[s]=r)}collection=i.collections[e],o[s]=collection._transformer.unserialize(o[s]),o[s]=new collection._model(o[s],{showJoins:!1})}}),o},Joins.prototype.checkForJoin=function(o){var i,s=!1;return this.joins.forEach(function(n){n.alias===o&&(s=!0,i=n)}),{used:s,join:i}};
},{"lodash":126}],55:[function(require,module,exports){
var _=require("lodash"),async=require("async"),utils=require("../../utils/helpers"),normalize=require("../../utils/normalize"),hasOwnProperty=utils.object.hasOwnProperty,Operations=module.exports=function(e,t,n){return this.cache={},this.context=e,this.criteria=t,this.parent=n,this.preCombined=!1,this._seedCache(),this.operations=this._buildOperations(),this};Operations.prototype.run=function(e){var t=this,n=this.operations.shift();this._runOperation(n.collection,n.method,n.criteria,function(i,o){return i?e(i):(t.cache[n.collection]=o,o?void t._execChildOpts(o,function(n){return n?e(n):void e(null,{combined:t.preCombined,cache:t.cache})}):e(null,{combined:!0,cache:t.cache}))})},Operations.prototype._seedCache=function(){var e=this;Object.keys(this.context.waterline.schema).forEach(function(t){e.cache[t]=[]})},Operations.prototype._buildOperations=function(){var e=[];if(!hasOwnProperty(this.criteria,"joins")){var t=this.context.waterline.collections[this.context.identity],n=t.adapterDictionary[this.parent];return n||(n=t.adapterDictionary.find),e.push({connection:n,collection:this.context.identity,method:this.parent,criteria:this.criteria}),e}var i=this._getConnections();return e=this._stageOperations(i)},Operations.prototype._stageOperations=function(e){var t=[];t=t.concat(this._createParentOperation(e));var n=this.context.adapterDictionary[this.parent],i=t[0];return Object.keys(e).forEach(function(o){if(o!==n||"join"!==i.method){var r=[];e[o].joins.forEach(function(e,t){var n={connection:o,collection:e.child,method:"find",join:e};if(0===t)return void r.push(n);var i=!1;r.forEach(function(t){t.join.child===e.parent&&(t.child=n,i=!0)}),i||r.push(n)}),t=t.concat(r)}}),t},Operations.prototype._createParentOperation=function(e){var t,n,i,o=this.context.adapter.hasJoin();if(o){n=this.context.adapterDictionary.join,i=e[n];var r=!1;if(i.joins.forEach(function(e){i.collections.indexOf(e.child)>-1||(r=!0)}),!r)return t=[{connection:n,collection:this.context.identity,method:"join",criteria:this.criteria}],this.preCombined=!0,t}var c=_.cloneDeep(this.criteria);return delete c.joins,n=this.context.adapterDictionary[this.parent],"findOne"!==this.parent||n||(n=this.context.adapterDictionary.find),i=e[n],t=[{connection:n,collection:this.context.identity,method:this.parent,criteria:c}]},Operations.prototype._getConnections=function(){var e,t=this,n={},i={collections:[],children:[],joins:[]};return this.criteria.joins.forEach(function(o){function r(o){e=t.context.waterline.collections[o],connectionName=e.adapterDictionary.find,n[connectionName]=n[connectionName]||_.clone(i),n[connectionName].collections.push(e.identity)}return o.junctionTable?(e=t.context.waterline.collections[o.parent],connectionName=e.adapterDictionary.find,n[connectionName]=n[connectionName]||_.clone(DefaultConnection),n[connectionName].collections.push(o.child),n[connectionName].children.push(o.parent),void(n[connectionName].joins=n[connectionName].joins.concat(o))):(r(o.parent),r(o.child),void(n[connectionName].joins=n[connectionName].joins.concat(o)))}),n},Operations.prototype._runOperation=function(e,t,n,i){if(!hasOwnProperty(this.context.waterline.collections,e))return i(new Error("Invalid Collection specfied in operation."));var o=this.context.waterline.collections[e];o.adapter[t](n,i)},Operations.prototype._execChildOpts=function(e,t){var n=this;this._buildChildOpts(e,function(e,i){return e?t(e):void async.each(i,function(e,t){n._collectChildResults(e,t)},t)})},Operations.prototype._buildChildOpts=function(e,t){var n=this,i=[];async.each(this.operations,function(t,o){var r=[],c=[],a=0;if(e.forEach(function(e){hasOwnProperty(e,t.join.parentKey)&&null!==e[t.join.parentKey]&&void 0!==typeof e[t.join.parentKey]&&c.push(e[t.join.parentKey])}),0===c.length)return o();var h={};h[t.join.childKey]=c;var l={};if(t.join.criteria){var s=_.cloneDeep(t.join.criteria);if(l=_.cloneDeep(s),l=normalize.criteria(l),hasOwnProperty(s,"where"))if(void 0===s.where)delete s.where;else{if(Array.isArray(s.where)){var p=n.context.waterline.collections[t.join.child].primaryKey,u={};u[p]=_.clone(s.where),s.where=u}s=s.where}h=_.merge(s,h)}return h=normalize.criteria(h),hasOwnProperty(l,"skip")||hasOwnProperty(l,"limit")?c.forEach(function(e){var n=_.cloneDeep(h);n.where[t.join.childKey]=e,hasOwnProperty(l,"skip")&&(n.skip=l.skip),hasOwnProperty(l,"limit")&&(n.limit=l.limit),r.push({id:a,collection:t.collection,method:t.method,criteria:n,join:t.join})}):r.push({id:a,collection:t.collection,method:t.method,criteria:h,join:t.join}),t.child?(r.push({collection:t.child.collection,method:t.child.method,parent:a,join:t.child.join}),i.push(r),void o()):(i.push(r),o())},function(e){t(e,i)})},Operations.prototype._collectChildResults=function(e,t){var n=this,i=[],o=0;return e&&0!==e.length?void async.eachSeries(e,function(t,r){n._runChildOperations(i,t,function(c,a){if(c)return r(c);e.length>1&&0===o&&(i=i.concat(a)),n.cache[t.collection]=n.cache[t.collection]||[],n.cache[t.collection]=n.cache[t.collection].concat(a);var h=n._findCollectionPK(t.collection);n.cache[t.collection]=_.uniq(n.cache[t.collection],h),o++,r()})},t):t(null,{})},Operations.prototype._runChildOperations=function(e,t,n){var i=this;if(!hasOwnProperty(t,"parent"))return i._runOperation(t.collection,t.method,t.criteria,function(e,t){return e?n(e):void n(null,t)});var o=[],r=_.cloneDeep(e);r.forEach(function(e){o.push(e[t.join.parentKey])});var c={};if(c[t.join.childKey]=o,t.join.criteria){var a=_.cloneDeep(t.join.criteria);hasOwnProperty(a,"where")&&(void 0===a.where?delete a.where:a=a.where),delete a.sort,c=_.extend(c,a)}c=normalize.criteria({where:c});var h=_.cloneDeep(i.cache[t.join.parent]);i.cache[t.join.parent]=[],i._runOperation(t.collection,t.method,c,function(e,o){if(e)return n(e);o.forEach(function(e){h.forEach(function(n){n[t.join.parentKey]===e[t.join.childKey]&&i.cache[t.join.parent].push(n)})});var r=i._findCollectionPK(t.join.parent);i.cache[t.join.parent]=_.uniq(i.cache[t.join.parent],r),n(null,o)})},Operations.prototype._findCollectionPK=function(e){var t;for(var n in this.context.waterline.collections[e]._attributes){var i=this.context.waterline.collections[e]._attributes[n];hasOwnProperty(i,"primaryKey")&&(t=i.columnName||n)}return t||null};
},{"../../utils/helpers":70,"../../utils/normalize":76,"async":90,"lodash":126}],56:[function(require,module,exports){
var _=require("lodash"),extend=require("../utils/extend"),AdapterBase=require("../adapter"),utils=require("../utils/helpers"),AdapterMixin=require("./adapters"),hop=utils.object.hasOwnProperty,Query=module.exports=function(){this.adapter=new AdapterBase({connections:this.connections,query:this,collection:this.tableName||this.identity,identity:this.identity,dictionary:this.adapterDictionary}),AdapterMixin.call(this),this.buildDynamicFinders()};Query.prototype.sync=function(e){var i=this;if(_.keys(this.connections).forEach(function(e){var r=i.connections[e]._adapter;hop(r,"syncable")&&!r.syncable&&(i.migrate="safe")}),this.migrate&&["drop","alter","safe"].indexOf(this.migrate)>-1){var r="migrate"+utils.capitalize(this.migrate);this.adapter[r](function(i){return i?e(i):void e()})}else e(new Error("Invalid `migrate` strategy defind for collection . Must be one of: drop, alter, safe"))},_.extend(Query.prototype,require("./validate"),require("./ddl"),require("./dql"),require("./aggregate"),require("./composite"),require("./finders/basic"),require("./finders/helpers"),require("./finders/dynamicFinders"),require("./stream")),Query.extend=extend;
},{"../adapter":6,"../utils/extend":68,"../utils/helpers":70,"./adapters":40,"./aggregate":41,"./composite":42,"./ddl":43,"./dql":48,"./finders/basic":51,"./finders/dynamicFinders":52,"./finders/helpers":53,"./stream":63,"./validate":64,"lodash":126}],57:[function(require,module,exports){
var anchor=require("anchor"),_=require("lodash"),partialJoin=require("./_partialJoin");module.exports=function(e){var r=!1;if(r=r||anchor(e).to({type:"object"}),_.defaults(e,{parent:e.left,child:e.right,parentKey:e.leftKey,childKey:e.rightKey,childNamespace:e.childNamespace||"."}),r=r||anchor(e.parent).to({type:"array"}),r=r||anchor(e.child).to({type:"array"}),r=r||anchor(e.parentKey).to({type:"string"}),r=r||anchor(e.childKey).to({type:"string"}),r=r||("right"===e.outer?new Error("Right joins not supported yet."):!1))throw r;var t=_.reduce(e.parent,function(r,t){var a=_.reduce(e.child,function(a,n){var i=partialJoin({parentRow:t,childRow:n,parentKey:e.parentKey,childKey:e.childKey,childNamespace:e.childNamespace});return i?(r.push(i),!0):a},!1);return a||"left"!==e.outer||r.push(_.cloneDeep(t)),r},[]);return t};
},{"./_partialJoin":58,"anchor":83,"lodash":126}],58:[function(require,module,exports){
var assert=require("assert"),_=require("lodash");module.exports=function(e){var r=!1;r=r||!_.isObject(e),r=r||!_.isString(e.parentKey),r=r||!_.isString(e.childKey),r=r||!_.isObject(e.parentRow),r=r||!_.isObject(e.childRow),assert(!r);var i=e.childNamespace||".";if(e.childRow[e.childKey]!==e.parentRow[e.parentKey])return!1;var t=_.cloneDeep(e.childRow),a={};return _.each(t,function(e,r){var t=i+r;a[t]=e}),_.merge(a,e.parentRow),a};
},{"assert":92,"lodash":126}],59:[function(require,module,exports){
var anchor=require("anchor"),_=require("lodash"),leftOuterJoin=require("./leftOuterJoin"),innerJoin=require("./innerJoin"),populate=require("./populate");module.exports=function(e,t,r,n){var i=!1;if(i=i||anchor(e).to({type:"object"}),i=i||anchor(t).to({type:"array"}),i=i||anchor(t[0]).to({type:"object"}),i=i||anchor(t[0].parent).to({type:"string"}),i=i||anchor(e[t[0].parent]).to({type:"object"}),i=i||"string"!=typeof r,i=i||"function"!=typeof n)return n(i);var a=".",o="..",l=e[t[0].parent];return _.each(_.groupBy(t,"alias"),function(t,n){var i,c,p,h,u;2===t.length?(i=t[0].parentKey,c=t[0].childKey,p=t[1].parentKey,h=t[1].childKey,u=t[1].select,u=_.map(u,function(e){return o+e}),populate({parentRows:l,alias:n,childRows:innerJoin({left:leftOuterJoin({left:e[t[0].parent],right:e[t[0].child],leftKey:i,rightKey:c}),right:e[t[1].child],leftKey:a+p,rightKey:h,childNamespace:o}),parentPK:i,fkToChild:a+p,childPK:o+h,select:u,childNamespace:o})):1===t.length&&(i=r,c=i,p=t[0].parentKey,h=t[0].childKey,i===p&&(p=a+p),u=t[0].select,u=_.map(u,function(e){return a+e}),populate({parentRows:l,alias:n,childRows:innerJoin({left:e[t[0].parent],right:e[t[0].child],leftKey:t[0].parentKey,rightKey:t[0].childKey}),parentPK:c,fkToChild:p,childPK:h,select:u,childNamespace:a}))}),n(null,l)};
},{"./innerJoin":60,"./leftOuterJoin":61,"./populate":62,"anchor":83,"lodash":126}],60:[function(require,module,exports){
var join=require("./_join");module.exports=function(o){return o.outer=!1,join(o)};
},{"./_join":57}],61:[function(require,module,exports){
var join=require("./_join");module.exports=function(e){return e.outer="left",join(e)};
},{"./_join":57}],62:[function(require,module,exports){
function _cons(e,r){var n={};return n[e]=r,n}var _=require("lodash");module.exports=function(e){var r=e.parentRows,n=e.alias,a=e.childRows,c=e.parentPK,i=e.childPK,o=e.fkToChild,t=c,u=e.select,l=e.childNamespace||"";return _.map(r,function(e){var r=_.where(a,_cons(t,e[c]));return r=_.cloneDeep(r),e[n]=_.reduce(r,function(e,r){if(!r[l+i]&&!r[i])return e;var n=r[o];if(r[i]=n,u){r=_.pick(r,u);var a=r;r={};var c=new RegExp("^"+l);_.each(a,function(e,n){var a=n.replace(c,"");r[a]=e})}return e.push(r),e},[]),e})};
},{"lodash":126}],63:[function(require,module,exports){
(function (process){
var usageError=require("../utils/usageError"),utils=require("../utils/helpers"),normalize=require("../utils/normalize"),ModelStream=require("../utils/stream");module.exports={stream:function(r,e){{var i=this;utils.capitalize(this.identity)+".stream([criteria],[options])"}r=normalize.criteria(r),r=i._transformer.serialize(r);var t=new ModelStream(e);return process.nextTick(function(){t.write(),i.adapter.stream(r,t)}),t}};
}).call(this,require("FWaASH"))
},{"../utils/helpers":70,"../utils/normalize":76,"../utils/stream":79,"../utils/usageError":82,"FWaASH":108}],64:[function(require,module,exports){
var _=require("lodash"),async=require("async");module.exports={validate:function(n,i,t){var a=this;"function"==typeof i&&(t=i),async.series([function(i){var t=function(i,t){i(n,function(n){return n?t(n):void t()})};async.eachSeries(a._callbacks.beforeValidate,t,function(n){return n?i(n):void i()})},function(t){a._validator.validate(n,i===!0,function(n){return n?t(new WLValidationError({invalidAttributes:n,model:a.globalId})):void t()})},function(i){var t=function(i,t){i(n,function(n){return n?t(n):void t()})};async.eachSeries(a._callbacks.afterValidate,t,function(n){return n?i(n):void i()})}],function(n){return n?t(n):void t()})}};
},{"async":90,"lodash":126}],65:[function(require,module,exports){
var _=require("lodash");module.exports=function(e,i,a){function l(i,a){var o,t=e[i],n=t.attributes;if(o=_.findWhere(r,{alias:a,model:i}),!o){r.push({alias:a,model:i});var c=n[a];if(!c)throw new Error("Unknown relation in schema: "+i+"."+a);var d=c.model||c.collection,s=e[d];c.via&&r.push({alias:c.via,model:d});var u=_(s.attributes).reduce(function(e,i,a){return _.isObject(i)&&(i.model||i.collection)?(e.push(_.merge({alias:a,identity:i.model||i.collection,cardinality:i.model?"model":"collection"},i)),e):e},[]);return _.reduce(u,function(e,i){return e[i.alias]=l(d,i.alias),void 0===e[i.alias]&&delete e[i.alias],e},{})}}var r=[];return l(i,a)};
},{"lodash":126}],66:[function(require,module,exports){
module.exports=["beforeValidate","afterValidate","beforeUpdate","afterUpdate","beforeCreate","afterCreate","beforeDestroy","afterDestroy"];
},{}],67:[function(require,module,exports){
var async=require("async"),runner=module.exports={};runner.validate=function(e,r,a,n){e.validate(r,a,n)},runner.beforeCreate=function(e,r,a){var n=function(e,a){e(r,a)};async.eachSeries(e._callbacks.beforeCreate,n,a)},runner.afterCreate=function(e,r,a){var n=function(e,a){e(r,a)};async.eachSeries(e._callbacks.afterCreate,n,a)},runner.beforeUpdate=function(e,r,a){var n=function(e,a){e(r,a)};async.eachSeries(e._callbacks.beforeUpdate,n,a)},runner.afterUpdate=function(e,r,a){var n=function(e,a){e(r,a)};async.eachSeries(e._callbacks.afterUpdate,n,a)},runner.beforeDestroy=function(e,r,a){var n=function(e,a){e(r,a)};async.eachSeries(e._callbacks.beforeDestroy,n,a)},runner.afterDestroy=function(e,r,a){var n=function(e,a){e(r,a)};async.eachSeries(e._callbacks.afterDestroy,n,a)};
},{"async":90}],68:[function(require,module,exports){
var _=require("lodash");module.exports=function(t,r){var o,e=this;o=t&&_.has(t,"constructor")?t.constructor:function(){return e.apply(this,arguments)},_.extend(o,e,r);var n=function(){this.constructor=o};return n.prototype=e.prototype,o.prototype=new n,t&&_.extend(o.prototype,t),o.__super__=e.prototype,o};
},{"lodash":126}],69:[function(require,module,exports){
module.exports=function(e){var t=e.schema,r=[];return Object.keys(t).forEach(function(n){var o=t[n];o.hasOwnProperty("junctionTable")&&Object.keys(o.attributes).forEach(function(t){o.attributes[t].hasOwnProperty("foreignKey")&&o.attributes[t].references===e.parentCollection&&r.push(n)})}),r};
},{}],70:[function(require,module,exports){
var _=require("lodash");exports.objMap=function(r,t,e){return _.reduce(r,function(n,o,i){return n[i]=t.call(e,o,i,r),n},{},e)},exports.pluralize=function(r,t){return Array.isArray(r)?_.map(r,t):_.isObject(r)?t(r):r},exports.capitalize=function(r){return r=null===r?"":String(r),r.charAt(0).toUpperCase()+r.slice(1)},exports.object={};var hop=Object.prototype.hasOwnProperty;exports.object.hasOwnProperty=function(r,t){return hop.call(r,t)},exports.matchMongoId=function(r){return r&&(_.isString(r)||_.isObject(r)||_.isFunction(r.toString))&&r.toString().match(/^[a-fA-F0-9]{24}$/)?!0:!1};
},{"lodash":126}],71:[function(require,module,exports){
var _=require("lodash"),hasOwnProperty=require("../helpers").object.hasOwnProperty;module.exports=function(e,r,t,a){var o=this;t.forEach(function(a){var i,n=o.waterline.schema[o.identity].attributes[a];if(hasOwnProperty(n,"collection")&&(i=n.collection),i){var c=o.waterline.collections[i].primaryKey,s=r[a];s&&s.forEach(function(r){return _.isPlainObject(r)?hasOwnProperty(r,c)?e[t].add(r[c]):void e[a].add(r):e[a].add(r)})}}),e.save(a)};
},{"../helpers":70,"lodash":126}],72:[function(require,module,exports){
module.exports={reduceAssociations:require("./reduceAssociations"),valuesParser:require("./valuesParser"),create:require("./create"),update:require("./update")};
},{"./create":71,"./reduceAssociations":73,"./update":74,"./valuesParser":75}],73:[function(require,module,exports){
var hop=require("../helpers").object.hasOwnProperty,_=require("lodash"),assert=require("assert"),util=require("util");module.exports=function(e,r,t){return Object.keys(t).forEach(function(o){var i=r[e].attributes[o];if(!_.isPlainObject(t[o])){if(!_.isObject(t[o])||Array.isArray(t[o])||!t[o].toObject||"function"!=typeof t[o].toObject)return;t[o]=t[o].toObject()}if(null!==t[o]&&"object"==typeof i&&hop(t[o],i.on)){var u=t[o][i.on];t[o]=u}}),t};
},{"../helpers":70,"assert":92,"lodash":126,"util":124}],74:[function(require,module,exports){
function buildOperations(e,n){var i=this,t={};return e.forEach(function(e){var r=n[e];null!==r&&(t[e]={add:[],update:[]},Array.isArray(r)||(r=[r]),queueOperations.call(i,e,t[e],r))}),t}function queueOperations(e,n,i){var t,r=this,a=r.waterline.schema[r.identity].attributes[e];if(hop(a,"collection")&&(t=a.collection),hop(a,"foreignKey")&&(t=a.references),t){var o=r.waterline.collections[t],c=o.primaryKey;return o.junctionTable?void r.parents.forEach(function(n){i.forEach(function(i){hop(n,e)&&"function"==typeof n[e].add&&n[e].add(i)})}):void i.forEach(function(i){if(!hop(i,c))return void n.add.push(i);var o={};return o[c]=i[c],n.update.push({model:t,criteria:o,values:i}),hop(a,"foreignKey")?void r.parents.forEach(function(n){n[e]=i[c]}):void n.add.push(i[c])})}}function sync(e,n){var i=this;async.auto({update:function(n){updateRunner.call(i,e,n)},unlink:["update",function(n){unlinkRunner.call(i,e,n)}],link:["unlink",function(n){linkRunner.call(i,e,n)}]},n)}function updateRunner(e,n){function i(n,i){async.each(e[n].update,t,i)}function t(e,n){var i=r.waterline.collections[e.model];i.update(e.criteria,e.values).exec(n)}var r=this;async.each(Object.keys(e),i,n)}function unlinkRunner(e,n){function i(n,i){var r=buildParentRemoveOperations.call(t,n,e);removeOperationRunner.call(t,r,i)}var t=this;async.each(this.parents,i,n)}function linkRunner(e,n){function i(i,a){var o=buildParentLinkOperations.call(r,i,e);createNewRecords.call(r,i,o,function(e){return e?a(e):void t(i,n)})}function t(e,n){var i={},t=r.waterline.collections[r.identity];i[r.primaryKey]=e[r.primaryKey];var a=e.toObject();t.update(i,a).exec(function(i){return i?n(i):void e.save(n)})}var r=this;async.each(this.parents,i,n)}function buildParentRemoveOperations(e,n){var i=this,t=[];return Object.keys(n).forEach(function(n){var r={},a={},o=i.waterline.schema[i.identity].attributes[n];if(hop(o,"foreignKey"))return a[i.primaryKey]=e[i.primaryKey],r={model:i.identity,criteria:a,keyName:n,nullify:!0},void t.push(r);var c=i.waterline.schema[o.collection],u=c.attributes[o.on];return a[o.on]=e[i.primaryKey],hop(u,"foreignKey")?(r={model:c.identity,criteria:a,keyName:o.on,nullify:hop(c,"junctionTable")?!1:!0},void t.push(r)):void 0}),t}function removeOperationRunner(e,n){function i(e,n){var i={};return e.nullify?(i[e.keyName]=null,void t.waterline.collections[e.model].update(e.criteria,i).exec(n)):void t.waterline.collections[e.model].destroy(e.criteria).exec(n)}var t=this;async.each(e,i,n)}function buildParentLinkOperations(e,n){function i(n,i){return hop(e[n],"add")?void e[n].add(i):(t[n]=t[n]||[],void t[n].push(i))}var t={};return Object.keys(n).forEach(function(e){n[e].add.forEach(function(n){i(e,n)})}),t}function createNewRecords(e,n,i){function t(i,t){function o(n,t){var a=[e,i,n,t];r.apply(c,a)}var c=a.waterline.collections[i],u=n[i];async.each(u,o,t)}function r(e,n,i,t){var r=this;this.create(i).exec(function(i,a){return i?t(i):(e[n]=a[r.primaryKey],void t())})}var a=this;async.each(Object.keys(n),t,i)}var _=require("lodash"),async=require("async"),hop=require("../helpers").object.hasOwnProperty;module.exports=function(e,n,i,t){var r=this;this.parents=e,i=i.collections.concat(i.models);var a=buildOperations.call(r,i,n);sync.call(r,a,t)};
},{"../helpers":70,"async":90,"lodash":126}],75:[function(require,module,exports){
var hasOwnProperty=require("../helpers").object.hasOwnProperty;module.exports=function(e,r,o){var t={collections:[],models:[]};return Object.keys(o).forEach(function(n){if(null!==o[n]&&!hasOwnProperty(r[e],"junctionTable")&&hasOwnProperty(r[e].attributes,n)){var s=r[e].attributes[n];(hasOwnProperty(s,"collection")||hasOwnProperty(s,"foreignKey"))&&(hasOwnProperty(s,"collection")&&t.collections.push(n),hasOwnProperty(s,"foreignKey")&&t.models.push(n))}}),t};
},{"../helpers":70}],76:[function(require,module,exports){
function numberizeModel(e){return util.objMap(e,numberize)}function numberize(e){return _.isString(e)&&isNumbery(e)&&parseInt(e,10)<Math.pow(2,53)?+e:e}function isNumbery(e){return Math.pow(+e,2)>0}function escapeLikeQuery(e){return e.replace(/[^%]%[^%]/g,"%%%")}function unescapeLikeQuery(e){return e.replace(/%%%/g,"%")}function applyInOriginalCtx(e,r){return _.partial.apply(null,[e].concat(Array.prototype.slice.call(r)))()}var _=require("lodash"),util=require("./helpers"),hop=util.object.hasOwnProperty,switchback=require("node-switchback"),errorify=require("../error"),WLUsageError=require("../error/WLUsageError"),normalize=module.exports={expandPK:function(e,r){if(_.isNumber(r)||_.isString(r)||Array.isArray(r)){var i="id";if(!e.autoPK)for(var t in e.attributes)if(util.object.hasOwnProperty(e.attributes[t],"primaryKey")&&e.attributes[t].primaryKey){i=t;break}var o=_.clone(r);r={},r[i]=o}return r},criteria:function(e){var r=_.cloneDeep(e);if(r===!1)return r;if(!r)return{where:null};if(Array.isArray(r))return r;if(_.each(r,function(e,i){_.isUndefined(e)&&(r[i]=null)}),_.isObject(r)||(r={id:+r||r}),_.isObject(r)&&!r.where&&null!==r.where&&(r={where:r}),!_.isObject(r))throw new WLUsageError("Invalid options/criteria :: "+r);if(r.where||r.joins||r.join||r.limit||r.skip||r.sort||r.sum||r.average||r.groupBy||r.min||r.max?_.isNull(r.where)&&(r.where={}):(delete r.where,delete r.joins,delete r.join,delete r.limit,delete r.skip,delete r.sort,r={where:r}),hop(r,"where")&&null!==r.where&&hop(r.where,"limit")?(r.limit=parseInt(_.clone(r.where.limit),10),r.limit<0&&(r.limit=0),delete r.where.limit):hop(r,"limit")&&(r.limit=parseInt(r.limit,10),r.limit<0&&(r.limit=0)),hop(r,"where")&&null!==r.where&&hop(r.where,"skip")?(r.skip=parseInt(_.clone(r.where.skip),10),r.skip<0&&(r.skip=0),delete r.where.skip):hop(r,"skip")&&(r.skip=parseInt(r.skip,10),r.skip<0&&(r.skip=0)),hop(r,"where")&&null!==r.where&&hop(r.where,"sort")&&(r.sort=_.clone(r.where.sort),delete r.where.sort),hop(r,"where")&&null!==r.where&&hop(r.where,"sum")&&(r.sum=_.clone(r.where.sum),delete r.where.sum),hop(r,"where")&&null!==r.where&&hop(r.where,"average")&&(r.average=_.clone(r.where.average),delete r.where.average),hop(r,"where")&&null!==r.where&&hop(r.where,"groupBy")&&(r.groupBy=_.clone(r.where.groupBy),delete r.where.groupBy),hop(r,"where")&&null!==r.where&&hop(r.where,"min")&&(r.min=_.clone(r.where.min),delete r.where.min),hop(r,"where")&&null!==r.where&&hop(r.where,"max")&&(r.max=_.clone(r.where.max),delete r.where.max),r.where&&0===_.keys(r.where).length&&(r.where=null),r.where){var i=!1;if(Object.keys(r.where).forEach(function(e){Array.isArray(r.where[e])&&0===r.where[e].length&&(i=!0)}),i)return!1}if(r.where&&hop(r.where,"or")){if(!_.isArray(r.where.or))throw new WLUsageError("An `or` clause in a query should be specified as an array of subcriteria");var t=_.cloneDeep(r.where.or);r.where.or.forEach(function(e,r){Object.keys(e).forEach(function(i){Array.isArray(e[i])&&0===e[i].length&&t.splice(r,1)})}),r.where.or=t}if(hop(r,"sort")&&null!==r.sort){if(_.isString(r.sort)){var o=r.sort.split(" ");if(o[1]=o[1]?o[1].toLowerCase():"asc","asc"!==o[1]&&"desc"!==o[1])throw new WLUsageError("Invalid sort criteria :: "+r.sort);r.sort={},r.sort[o[0]]=o[1]}if(Object.keys(r.sort).forEach(function(e){"asc"===r.sort[e]&&(r.sort[e]=1),"desc"===r.sort[e]&&(r.sort[e]=-1)}),Object.keys(r.sort).forEach(function(e){0===r.sort[e]&&(r.sort[e]=-1)}),!_.isObject(r.sort)&&!_.isFunction(r.sort))throw new WLUsageError("Invalid sort criteria for "+attrName+" :: "+direction)}return r},likeCriteria:function(e,r,i){return e!==Object(e)?!1:(e=_.clone(e),e.where||(e={where:e}),i&&(e.where=util.objMap(e.where,i)),e.where={like:e.where},e)},resultSet:function(e){return util.pluralize(e,numberizeModel)},callback:function(e){var r;return _.isFunction(e)&&(r=function(r){if(!r)return applyInOriginalCtx(e,arguments);r=errorify(r);var i=Array.prototype.slice.call(arguments,1);return i.unshift(r),applyInOriginalCtx(e,i)}),_.isFunction(e)||(r=e),switchback(r,{invalid:"error",error:function(){console.error.apply(console,Array.prototype.slice.call(arguments))}})}};
},{"../error":26,"../error/WLUsageError":24,"./helpers":70,"lodash":126,"node-switchback":129}],77:[function(require,module,exports){
var _=require("lodash"),types=require("./types"),callbacks=require("./callbacks"),hasOwnProperty=require("./helpers").object.hasOwnProperty,schema=module.exports=exports;schema.normalizeAttributes=function(e){var t={};return Object.keys(e).forEach(function(r){"function"!=typeof e[r]&&(t[r]="string"==typeof e[r]?{type:e[r]}:e[r],t[r].type&&"undefined"!=typeof t[r].type&&(t[r].type=t[r].type.toLowerCase()),hasOwnProperty(e[r],"collection")&&(e[r].collection=e[r].collection.toLowerCase()),hasOwnProperty(e[r],"model")&&(e[r].model=e[r].model.toLowerCase()))}),t},schema.instanceMethods=function(e){var t={};return e?(Object.keys(e).forEach(function(r){"function"==typeof e[r]&&(t[r]=e[r])}),t):t},schema.normalizeCallbacks=function(e){function t(){return function(e,t){return t()}}var r,o,n,a,i,c={};for(r=0,n=callbacks.length;n>r;r+=1)if(i=callbacks[r],"undefined"!=typeof e[i])if(Array.isArray(e[i]))for(c[i]=[],o=0,a=e[i].length;a>o;o+=1)if("string"==typeof e[i][o]){if("function"!=typeof e.attributes[e[i][o]])throw new Error("Unable to locate callback `"+e[i][o]+"`");c[i][o]=e.attributes[e[i][o]],delete e.attributes[e[i][o]]}else c[i][o]=e[i][o];else if("string"==typeof e[i]){if("function"!=typeof e.attributes[e[i]])throw new Error("Unable to locate callback `"+e[i]+"`");c[i]=[e.attributes[e[i]]],delete e.attributes[e[i]]}else c[i]=[e[i]];else c[i]=[t(i)];return c},schema.serializeJoins=function(e,t){if(!e.joins)return e;var r=_.cloneDeep(e.joins);return r.forEach(function(e){hasOwnProperty(t[e.parent],"tableName")&&hasOwnProperty(t[e.child],"tableName")&&(e.parent=t[e.parent].tableName,e.child=t[e.child].tableName)}),e.joins=r,e};
},{"./callbacks":66,"./helpers":70,"./types":81,"lodash":126}],78:[function(require,module,exports){
var _=require("lodash");module.exports=function(r,n){function u(r){var n=1;return"-"===r[0]&&(n=-1,r=r.substr(1)),function(u,t){var e=u[r]<t[r]?-1:u[r]>t[r]?1:0;return e*n}}function t(){var r=arguments;return function(n,t){for(var e=0,o=0,a=r.length;0===o&&a>e;)o=u(r[e])(n,t),e++;return o}}var e=[];return _.each(_.keys(n),function(r){e.push(-1===n[r]?"-"+r:r)}),r.sort(t.apply(null,e)),r};
},{"lodash":126}],79:[function(require,module,exports){
var util=require("util"),Stream=require("stream"),Transformations=require("./transformations"),_=require("lodash"),ModelStream=module.exports=function(t){this.transformation=t||Transformations.json,this.index=0,this.writable=!0};util.inherits(ModelStream,Stream),ModelStream.prototype.write=function(t,r){var e=this;this.transformation.write(t,this.index,function(t,i){return e.index++,e.emit("data",_.clone(i)),r?r(t):void 0})},ModelStream.prototype.end=function(t,r){var e=this;if(t){if(this.emit("error",t.message),r)return r(t)}else this.transformation.end(function(t,i){return t?(e.emit("error",t),r?r(t):void 0):(i&&e.emit("data",i),e.emit("end"),r?r():void 0)})};
},{"./transformations":80,"lodash":126,"stream":122,"util":124}],80:[function(require,module,exports){
var Transformations=module.exports={};Transformations.json={},Transformations.json.write=function(n,r,o){var s;if(n||(s=""),n)try{s=JSON.stringify(n)}catch(a){return o(a)}0===r&&(s="["),r>1&&(s=","+s),o(null,s)},Transformations.json.end=function(n){var r="]";n(null,r)};
},{}],81:[function(require,module,exports){
module.exports=["string","text","integer","float","date","time","datetime","boolean","binary","array","json","mediumtext","longtext","objectid"];
},{}],82:[function(require,module,exports){
module.exports=function(r,n,e){var o=r+"\n==============================================\nProper usage :: \n"+n+"\n==============================================\n";if(e)return e(o);throw new Error(o)};
},{}],83:[function(require,module,exports){
function Anchor(t){if(util.isFunction(t))throw this.fn=t,new Error("Anchor does not support functions yet!");return this.data=t,this}function todo(){throw new Error("Not implemented yet! If you'd like to contribute, tweet @mikermcneil.")}var util=require("lodash"),sanitize=require("validator").sanitize;module.exports=function(t){return new Anchor(t)},Anchor.prototype.rules=require("./lib/match/rules"),Anchor.prototype.to=function(t,o){var r=[];for(var n in t)r=r.concat("type"===n?Anchor.match.type.call(o,this.data,t.type):Anchor.match.rule.call(o,this.data,n,t[n]));return r.length?r:!1},Anchor.prototype.hasErrors=Anchor.prototype.to,Anchor.prototype.cast=function(){todo()},Anchor.prototype.hurl=function(t){for(var o in this.data)if(this.data.hasOwnProperty(o)&&!t[o]){var r=new Error('Validation error: Attribute "'+o+'" is not in the ruleset.');throw r}Anchor.match(this.data,t,this)},Anchor.prototype.defaults=function(){todo()},Anchor.prototype.define=function(t,o){if(util.isObject(t)){for(var r in t)if(!util.isFunction(t[r]))throw new Error('Definition error: "'+r+'" does not have a definition');return util.extend(Anchor.prototype.rules,t),this}if(util.isFunction(o)&&util.isString(t))return Anchor.prototype.rules[t]=o,this;throw new Error('Definition error: "'+t+'" is not a valid definition.')},Anchor.prototype.as=function(){todo()},Anchor.prototype.args=function(){todo()},Anchor.prototype.usage=function(){util.toArray(arguments);todo()},Anchor.match=require("./lib/match"),module.exports.define=Anchor.prototype.define;
},{"./lib/match":85,"./lib/match/rules":88,"lodash":126,"validator":89}],84:[function(require,module,exports){
var _=require("lodash"),util=require("util");module.exports=function(e,t,r,i){var s;return s=_.isString(i)?i:_.isFunction(i)?i(e,t,r):util.format('`%s` should be a %s (instead of "%s", which is a %s)',r,t,e,typeof e),[{property:r,data:e,message:s,rule:t,actualType:typeof e,expectedType:t}]};
},{"lodash":126,"util":124}],85:[function(require,module,exports){
module.exports={type:require("./matchType"),rule:require("./matchRule")};
},{"./matchRule":86,"./matchType":87}],86:[function(require,module,exports){
var util=require("util"),_=require("lodash"),rules=require("./rules");module.exports=function(r,e,i){var u=this;Array.isArray(i)&&(i=[i]),_.isArray(i)||(i=[i]),i.unshift(r);var t,a=rules[e];if(!a)throw new Error("Unknown rule: "+e);try{t=a.apply(u,i)}catch(l){t=!1}return t?[]:[{rule:e,data:r,message:util.format('"%s" validation rule failed for input: %s',e,util.inspect(r))}]};
},{"./rules":88,"lodash":126,"util":124}],87:[function(require,module,exports){
function deepMatchType(e,r,t,a,s){var i=this;if(t=t||0,t>MAX_DEPTH)return[new Error({message:"Exceeded MAX_DEPTH when validating object.  Maybe it's recursively referencing itself?"})];if(_.isObject(r)){if(_.isArray(r))return 0!==r.length?r.length>1?[new Error({message:"[] (or schema) rules must contain exactly one item."})]:_.reduce(e,function(e,c){return e=e.concat(deepMatchType.call(i,c,r[0],t+1,a,s))},[]):matchType.call(i,e,r,a,s);var c=r[RESERVED_KEYS.$message],n=r[RESERVED_KEYS.$validate];if(c){if(!n)return[{code:"E_USAGE",status:500,$message:c,property:a,message:"Custom messages ($message) require a subvalidation - please specify a `$validate` option on `"+a+"`"}];s=c}return n?n.type?deepMatchType.call(i,e,n.type,t+1,a,s):[new Error({message:"Sub-validation rules (i.e. using $validate) other than `type` are not currently supported"})]:0===_.keys(r).length?matchType.call(i,e,r,a,s):_.reduce(r,function(a,c,n){return a.concat(_.isObject(e)?deepMatchType.call(i,e[n],r[n],t+1,n,s):errorFactory(e,"object",n,s))},[])}return matchType.call(i,e,r,a,s)}function matchType(e,r,t,a){var s=this;try{var i,c;return(i=_.isEqual(r,[])?_.isArray:_.isEqual(r,{})?_.isObject:_.isRegExp(r)?function(e){_.isString(e)?e.match.call(s,r):i=rules.string}:rules[r])?(c=i.call(s,e),c?[]:errorFactory(e,r,t,a)):[new Error({message:"Unknown rule: "+r})]}catch(n){return errorFactory(e,r,t,a)}}var util=require("util"),_=require("lodash"),rules=require("./rules"),errorFactory=require("./errorFactory");module.exports=deepMatchType;var RESERVED_KEYS={$validate:"$validate",$message:"$message"},MAX_DEPTH=50;
},{"./errorFactory":84,"./rules":88,"lodash":126,"util":124}],88:[function(require,module,exports){
(function (Buffer){
var _=require("lodash"),validator=require("validator");module.exports={empty:_.isEmpty,required:function(i){return i=i||0===i?"undefined"!=typeof i.toString?i.toString():""+i:"",!validator.isNull(i)},notEmpty:function(i){return i=i?"undefined"!=typeof i.toString?i.toString():""+i:"",!validator.isNull(i)},undefined:_.isUndefined,object:_.isObject,json:function(i){if(_.isUndefined(i))return!1;try{JSON.stringify(i)}catch(t){return!1}return!0},text:_.isString,string:_.isString,alpha:validator.isAlpha,alphadashed:function(i){return/^[a-zA-Z-_]*$/.test(i)},numeric:validator.isNumeric,alphanumeric:validator.isAlphanumeric,alphanumericdashed:function(i){return/^[a-zA-Z0-9-_]*$/.test(i)},email:validator.isEmail,url:validator.isURL,urlish:/^\s([^\/]+\.)+.+\s*$/g,ip:validator.isIP,ipv4:validator.isIPv4,ipv6:validator.isIPv6,creditcard:validator.isCreditCard,uuid:validator.isUUID,uuidv3:function(i){return validator.isUUID(i,3)},uuidv4:function(i){return validator.isUUID(i,4)},"int":validator.isInt,integer:validator.isInt,number:_.isNumber,finite:_.isFinite,decimal:validator.isFloat,"float":validator.isFloat,falsey:function(i){return!i},truthy:function(i){return!!i},"null":_.isNull,notNull:function(i){return!validator.isNull(i)},"boolean":_.isBoolean,array:_.isArray,binary:function(i){return Buffer.isBuffer(i)||_.isString(i)},date:validator.isDate,datetime:validator.isDate,hexadecimal:validator.hexadecimal,hexColor:validator.isHexColor,lowercase:validator.lowercase,uppercase:validator.uppercase,after:validator.isAfter,before:validator.isBefore,equals:validator.equals,contains:validator.contains,notContains:function(i,t){return!validator.contains(i,t)},len:function(i,t,a){return validator.len(i,t,a)},"in":validator.isIn,notIn:function(i,t){return!validator.isIn(i,t)},max:function(i,t){var a=parseFloat(i);return isNaN(a)||t>=a},min:function(i,t){var a=parseFloat(i);return isNaN(a)||a>=t},minLength:function(i,t){return validator.isLength(i,t)},maxLength:function(i,t){return validator.isLength(i,0,t)},regex:function(i,t){return validator.matches(i,t)},notRegex:function(i,t){return!validator.matches(i,t)}};
}).call(this,require("buffer").Buffer)
},{"buffer":95,"lodash":126,"validator":89}],89:[function(require,module,exports){
!function(t,e){"undefined"!=typeof module?module.exports=e():"function"==typeof define&&"object"==typeof define.amd?define(e):this[t]=e()}("validator",function(t){"use strict";t={version:"3.3.0"};var e=/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,n=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,r=/^(?:[0-9]{9}X|[0-9]{10})$/,i=/^(?:[0-9]{13})$/,o=/^(\d?\d?\d)\.(\d?\d?\d)\.(\d?\d?\d)\.(\d?\d?\d)$/,u=/^::|^::1|^([a-fA-F0-9]{1,4}::?){1,7}([a-fA-F0-9]{1,4})$/,f={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i},a=/^[a-zA-Z]+$/,c=/^[a-zA-Z0-9]+$/,s=/^-?[0-9]+$/,l=/^(?:-?(?:0|[1-9][0-9]*))$/,p=/^(?:-?(?:[0-9]+))?(?:\.[0-9]*)?(?:[eE][\+\-]?(?:[0-9]+))?$/,d=/^[0-9a-fA-F]+$/,g=/^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/;t.extend=function(e,n){t[e]=function(){var e=Array.prototype.slice.call(arguments);return e[0]=t.toString(e[0]),n.apply(t,e)}},t.noCoerce=["toString","toDate","extend","init","flatten","merge"],t.init=function(){for(var e in t)"function"!=typeof t[e]||t.noCoerce.indexOf(e)>=0||t.extend(e,t[e])},t.toString=function(t){return null===t||"undefined"==typeof t||isNaN(t)&&!t.length?t="":"object"==typeof t&&t.toString?t=t.toString():"string"!=typeof t&&(t+=""),t},t.toDate=function(t){return"[object Date]"===Object.prototype.toString.call(t)?t:(t=Date.parse(t),isNaN(t)?null:new Date(t))},t.toFloat=function(t){return parseFloat(t)},t.toInt=function(t,e){return parseInt(t,e||10)},t.toBoolean=function(t,e){return e?"1"===t||"true"===t:"0"!==t&&"false"!==t&&""!==t},t.flatten=function(t,e){if(!t)return"";for(var n=t[0],r=1;r<t.length;r++)n+=e+t[r];return n},t.merge=function(t,e){t=t||{};for(var n in e)"undefined"==typeof t[n]&&(t[n]=e[n]);return t},t.equals=function(e,n){return e===t.toString(n)},t.contains=function(e,n){return e.indexOf(t.toString(n))>=0},t.matches=function(t,e,n){return"[object RegExp]"!==Object.prototype.toString.call(e)&&(e=new RegExp(e,n)),e.test(t)},t.isEmail=function(t){return e.test(t)};var A={protocols:["http","https","ftp"],require_tld:!0};return t.isURL=function(e,n){n=t.merge(n,A);var r=new RegExp("^(?!mailto:)(?:(?:"+t.flatten(n.protocols,"|")+")://)?(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))"+(n.require_tld?"":"?")+")|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i");return e.length<2083&&r.test(e)},t.isIP=function(e,n){if(n=t.toString(n),!n)return t.isIP(e,4)||t.isIP(e,6);if("4"===n){if(!o.test(e))return!1;var r=e.split(".").sort();return r[3]<=255}return"6"===n&&u.test(e)},t.isAlpha=function(t){return a.test(t)},t.isAlphanumeric=function(t){return c.test(t)},t.isNumeric=function(t){return s.test(t)},t.isHexadecimal=function(t){return d.test(t)},t.isHexColor=function(t){return g.test(t)},t.isLowercase=function(t){return t===t.toLowerCase()},t.isUppercase=function(t){return t===t.toUpperCase()},t.isInt=function(t){return l.test(t)},t.isFloat=function(t){return""!==t&&p.test(t)},t.isDivisibleBy=function(e,n){return t.toFloat(e)%t.toInt(n)===0},t.isNull=function(t){return 0===t.length},t.isLength=function(t,e,n){return t.length>=e&&("undefined"==typeof n||t.length<=n)},t.isUUID=function(t,e){var n=f[e?e:"all"];return n&&n.test(t)},t.isDate=function(t){return!isNaN(Date.parse(t))},t.isAfter=function(e,n){var r=t.toDate(n||new Date),i=t.toDate(e);return i&&r&&i>r},t.isBefore=function(e,n){var r=t.toDate(n||new Date),i=t.toDate(e);return i&&r&&r>i},t.isIn=function(e,n){if(!n||"function"!=typeof n.indexOf)return!1;if("[object Array]"===Object.prototype.toString.call(n)){for(var r=[],i=0,o=n.length;o>i;i++)r[i]=t.toString(n[i]);n=r}return n.indexOf(e)>=0},t.isCreditCard=function(t){var e=t.replace(/[^0-9]+/g,"");if(!n.test(e))return!1;for(var r,i,o,u=0,f=e.length-1;f>=0;f--)r=e.substring(f,f+1),i=parseInt(r,10),o?(i*=2,u+=i>=10?i%10+1:i):u+=i,o=!o;return u%10===0?e:!1},t.isISBN=function(e,n){if(n=t.toString(n),!n)return t.isISBN(e,10)||t.isISBN(e,13);var o,u=e.replace(/[\s-]+/g,""),f=0;if("10"===n){if(!r.test(u))return!1;for(o=0;9>o;o++)f+=(o+1)*u.charAt(o);if(f+="X"===u.charAt(9)?100:10*u.charAt(9),f%11===0)return u}else if("13"===n){if(!i.test(u))return!1;var a=[1,3];for(o=0;12>o;o++)f+=a[o%2]*u.charAt(o);if(u.charAt(12)-(10-f%10)%10===0)return u}return!1},t.ltrim=function(t,e){var n=e?new RegExp("^["+e+"]+","g"):/^\s+/g;return t.replace(n,"")},t.rtrim=function(t,e){var n=e?new RegExp("["+e+"]+$","g"):/\s+$/g;return t.replace(n,"")},t.trim=function(t,e){var n=e?new RegExp("^["+e+"]+|["+e+"]+$","g"):/^\s+|\s+$/g;return t.replace(n,"")},t.escape=function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},t.whitelist=function(t,e){return t.replace(new RegExp("[^"+e+"]+","g"),"")},t.blacklist=function(t,e){return t.replace(new RegExp("["+e+"]+","g"),"")},t.init(),t});
},{}],90:[function(require,module,exports){
(function (process){
!function(){function n(n){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,n.apply(t,arguments)}}var t,e,r={};t=this,null!=t&&(e=t.async),r.noConflict=function(){return t.async=e,r};var u=Object.prototype.toString,i=Array.isArray||function(n){return"[object Array]"===u.call(n)},c=function(n,t){if(n.forEach)return n.forEach(t);for(var e=0;e<n.length;e+=1)t(n[e],e,n)},a=function(n,t){if(n.map)return n.map(t);var e=[];return c(n,function(n,r,u){e.push(t(n,r,u))}),e},o=function(n,t,e){return n.reduce?n.reduce(t,e):(c(n,function(n,r,u){e=t(e,n,r,u)}),e)},l=function(n){if(Object.keys)return Object.keys(n);var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t};"undefined"!=typeof process&&process.nextTick?(r.nextTick=process.nextTick,r.setImmediate="undefined"!=typeof setImmediate?function(n){setImmediate(n)}:r.nextTick):"function"==typeof setImmediate?(r.nextTick=function(n){setImmediate(n)},r.setImmediate=r.nextTick):(r.nextTick=function(n){setTimeout(n,0)},r.setImmediate=r.nextTick),r.each=function(t,e,r){function u(n){n?(r(n),r=function(){}):(i+=1,i>=t.length&&r())}if(r=r||function(){},!t.length)return r();var i=0;c(t,function(t){e(t,n(u))})},r.forEach=r.each,r.eachSeries=function(n,t,e){if(e=e||function(){},!n.length)return e();var r=0,u=function(){t(n[r],function(t){t?(e(t),e=function(){}):(r+=1,r>=n.length?e():u())})};u()},r.forEachSeries=r.eachSeries,r.eachLimit=function(n,t,e,r){var u=f(t);u.apply(null,[n,e,r])},r.forEachLimit=r.eachLimit;var f=function(n){return function(t,e,r){if(r=r||function(){},!t.length||0>=n)return r();var u=0,i=0,c=0;!function a(){if(u>=t.length)return r();for(;n>c&&i<t.length;)i+=1,c+=1,e(t[i-1],function(n){n?(r(n),r=function(){}):(u+=1,c-=1,u>=t.length?r():a())})}()}},s=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[r.each].concat(t))}},p=function(n,t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[f(n)].concat(e))}},y=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[r.eachSeries].concat(t))}},d=function(n,t,e,r){var u=[];t=a(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e,r){u[n.index]=r,t(e)})},function(n){r(n,u)})};r.map=s(d),r.mapSeries=y(d),r.mapLimit=function(n,t,e,r){return m(t)(n,e,r)};var m=function(n){return p(n,d)};r.reduce=function(n,t,e,u){r.eachSeries(n,function(n,r){e(t,n,function(n,e){t=e,r(n)})},function(n){u(n,t)})},r.inject=r.reduce,r.foldl=r.reduce,r.reduceRight=function(n,t,e,u){var i=a(n,function(n){return n}).reverse();r.reduce(i,t,e,u)},r.foldr=r.reduceRight;var v=function(n,t,e,r){var u=[];t=a(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e){e&&u.push(n),t()})},function(){r(a(u.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};r.filter=s(v),r.filterSeries=y(v),r.select=r.filter,r.selectSeries=r.filterSeries;var h=function(n,t,e,r){var u=[];t=a(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e){e||u.push(n),t()})},function(){r(a(u.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};r.reject=s(h),r.rejectSeries=y(h);var g=function(n,t,e,r){n(t,function(n,t){e(n,function(e){e?(r(n),r=function(){}):t()})},function(){r()})};r.detect=s(g),r.detectSeries=y(g),r.some=function(n,t,e){r.each(n,function(n,r){t(n,function(n){n&&(e(!0),e=function(){}),r()})},function(){e(!1)})},r.any=r.some,r.every=function(n,t,e){r.each(n,function(n,r){t(n,function(n){n||(e(!1),e=function(){}),r()})},function(){e(!0)})},r.all=r.every,r.sortBy=function(n,t,e){r.map(n,function(n,e){t(n,function(t,r){t?e(t):e(null,{value:n,criteria:r})})},function(n,t){if(n)return e(n);var r=function(n,t){var e=n.criteria,r=t.criteria;return r>e?-1:e>r?1:0};e(null,a(t.sort(r),function(n){return n.value}))})},r.auto=function(n,t){t=t||function(){};var e=l(n),u=e.length;if(!u)return t();var a={},f=[],s=function(n){f.unshift(n)},p=function(n){for(var t=0;t<f.length;t+=1)if(f[t]===n)return void f.splice(t,1)},y=function(){u--,c(f.slice(0),function(n){n()})};s(function(){if(!u){var n=t;t=function(){},n(null,a)}}),c(e,function(e){var u=i(n[e])?n[e]:[n[e]],f=function(n){var u=Array.prototype.slice.call(arguments,1);if(u.length<=1&&(u=u[0]),n){var i={};c(l(a),function(n){i[n]=a[n]}),i[e]=u,t(n,i),t=function(){}}else a[e]=u,r.setImmediate(y)},d=u.slice(0,Math.abs(u.length-1))||[],m=function(){return o(d,function(n,t){return n&&a.hasOwnProperty(t)},!0)&&!a.hasOwnProperty(e)};if(m())u[u.length-1](f,a);else{var v=function(){m()&&(p(v),u[u.length-1](f,a))};s(v)}})},r.retry=function(n,t,e){var u=5,i=[];"function"==typeof n&&(e=t,t=n,n=u),n=parseInt(n,10)||u;var c=function(u,c){for(var a=function(n,t){return function(e){n(function(n,r){e(!n||t,{err:n,result:r})},c)}};n;)i.push(a(t,!(n-=1)));r.series(i,function(n,t){t=t[t.length-1],(u||e)(t.err,t.result)})};return e?c():c},r.waterfall=function(n,t){if(t=t||function(){},!i(n)){var e=new Error("First argument to waterfall must be an array of functions");return t(e)}if(!n.length)return t();var u=function(n){return function(e){if(e)t.apply(null,arguments),t=function(){};else{var i=Array.prototype.slice.call(arguments,1),c=n.next();i.push(c?u(c):t),r.setImmediate(function(){n.apply(null,i)})}}};u(r.iterator(n))()};var k=function(n,t,e){if(e=e||function(){},i(t))n.map(t,function(n,t){n&&n(function(n){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),t.call(null,n,e)})},e);else{var r={};n.each(l(t),function(n,e){t[n](function(t){var u=Array.prototype.slice.call(arguments,1);u.length<=1&&(u=u[0]),r[n]=u,e(t)})},function(n){e(n,r)})}};r.parallel=function(n,t){k({map:r.map,each:r.each},n,t)},r.parallelLimit=function(n,t,e){k({map:m(t),each:f(t)},n,e)},r.series=function(n,t){if(t=t||function(){},i(n))r.mapSeries(n,function(n,t){n&&n(function(n){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),t.call(null,n,e)})},t);else{var e={};r.eachSeries(l(n),function(t,r){n[t](function(n){var u=Array.prototype.slice.call(arguments,1);u.length<=1&&(u=u[0]),e[t]=u,r(n)})},function(n){t(n,e)})}},r.iterator=function(n){var t=function(e){var r=function(){return n.length&&n[e].apply(null,arguments),r.next()};return r.next=function(){return e<n.length-1?t(e+1):null},r};return t(0)},r.apply=function(n){var t=Array.prototype.slice.call(arguments,1);return function(){return n.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var A=function(n,t,e,r){var u=[];n(t,function(n,t){e(n,function(n,e){u=u.concat(e||[]),t(n)})},function(n){r(n,u)})};r.concat=s(A),r.concatSeries=y(A),r.whilst=function(n,t,e){n()?t(function(u){return u?e(u):void r.whilst(n,t,e)}):e()},r.doWhilst=function(n,t,e){n(function(u){if(u)return e(u);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?r.doWhilst(n,t,e):e()})},r.until=function(n,t,e){n()?e():t(function(u){return u?e(u):void r.until(n,t,e)})},r.doUntil=function(n,t,e){n(function(u){if(u)return e(u);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?e():r.doUntil(n,t,e)})},r.queue=function(t,e){function u(n,t,e,u){return n.started||(n.started=!0),i(t)||(t=[t]),0==t.length?r.setImmediate(function(){n.drain&&n.drain()}):void c(t,function(t){var i={data:t,callback:"function"==typeof u?u:null};e?n.tasks.unshift(i):n.tasks.push(i),n.saturated&&n.tasks.length===n.concurrency&&n.saturated(),r.setImmediate(n.process)})}void 0===e&&(e=1);var a=0,o={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(n,t){u(o,n,!1,t)},kill:function(){o.drain=null,o.tasks=[]},unshift:function(n,t){u(o,n,!0,t)},process:function(){if(!o.paused&&a<o.concurrency&&o.tasks.length){var e=o.tasks.shift();o.empty&&0===o.tasks.length&&o.empty(),a+=1;var r=function(){a-=1,e.callback&&e.callback.apply(e,arguments),o.drain&&o.tasks.length+a===0&&o.drain(),o.process()},u=n(r);t(e.data,u)}},length:function(){return o.tasks.length},running:function(){return a},idle:function(){return o.tasks.length+a===0},pause:function(){o.paused!==!0&&(o.paused=!0,o.process())},resume:function(){o.paused!==!1&&(o.paused=!1,o.process())}};return o},r.cargo=function(n,t){var e=!1,u=[],o={tasks:u,payload:t,saturated:null,empty:null,drain:null,drained:!0,push:function(n,e){i(n)||(n=[n]),c(n,function(n){u.push({data:n,callback:"function"==typeof e?e:null}),o.drained=!1,o.saturated&&u.length===t&&o.saturated()}),r.setImmediate(o.process)},process:function l(){if(!e){if(0===u.length)return o.drain&&!o.drained&&o.drain(),void(o.drained=!0);var r="number"==typeof t?u.splice(0,t):u.splice(0,u.length),i=a(r,function(n){return n.data});o.empty&&o.empty(),e=!0,n(i,function(){e=!1;var n=arguments;c(r,function(t){t.callback&&t.callback.apply(null,n)}),l()})}},length:function(){return u.length},running:function(){return e}};return o};var x=function(n){return function(t){var e=Array.prototype.slice.call(arguments,1);t.apply(null,e.concat([function(t){var e=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[n]&&c(e,function(t){console[n](t)}))}]))}};r.log=x("log"),r.dir=x("dir"),r.memoize=function(n,t){var e={},u={};t=t||function(n){return n};var i=function(){var i=Array.prototype.slice.call(arguments),c=i.pop(),a=t.apply(null,i);a in e?r.nextTick(function(){c.apply(null,e[a])}):a in u?u[a].push(c):(u[a]=[c],n.apply(null,i.concat([function(){e[a]=arguments;var n=u[a];delete u[a];for(var t=0,r=n.length;r>t;t++)n[t].apply(null,arguments)}])))};return i.memo=e,i.unmemoized=n,i},r.unmemoize=function(n){return function(){return(n.unmemoized||n).apply(null,arguments)}},r.times=function(n,t,e){for(var u=[],i=0;n>i;i++)u.push(i);return r.map(u,t,e)},r.timesSeries=function(n,t,e){for(var u=[],i=0;n>i;i++)u.push(i);return r.mapSeries(u,t,e)},r.seq=function(){var n=arguments;return function(){var t=this,e=Array.prototype.slice.call(arguments),u=e.pop();r.reduce(n,e,function(n,e,r){e.apply(t,n.concat([function(){var n=arguments[0],t=Array.prototype.slice.call(arguments,1);r(n,t)}]))},function(n,e){u.apply(t,[n].concat(e))})}},r.compose=function(){return r.seq.apply(null,Array.prototype.reverse.call(arguments))};var S=function(n,t){var e=function(){var e=this,r=Array.prototype.slice.call(arguments),u=r.pop();return n(t,function(n,t){n.apply(e,r.concat([t]))},u)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return e.apply(this,r)}return e};r.applyEach=s(S),r.applyEachSeries=y(S),r.forever=function(n,t){function e(r){if(r){if(t)return t(r);throw r}n(e)}e()},"undefined"!=typeof module&&module.exports?module.exports=r:"undefined"!=typeof define&&define.amd?define([],function(){return r}):t.async=r}();
}).call(this,require("FWaASH"))
},{"FWaASH":108}],91:[function(require,module,exports){

},{}],92:[function(require,module,exports){
function replacer(t,e){return util.isUndefined(e)?""+e:!util.isNumber(e)||!isNaN(e)&&isFinite(e)?util.isFunction(e)||util.isRegExp(e)?e.toString():e:e.toString()}function truncate(t,e){return util.isString(t)?t.length<e?t:t.slice(0,e):t}function getMessage(t){return truncate(JSON.stringify(t.actual,replacer),128)+" "+t.operator+" "+truncate(JSON.stringify(t.expected,replacer),128)}function fail(t,e,r,i,s){throw new assert.AssertionError({message:r,actual:t,expected:e,operator:i,stackStartFunction:s})}function ok(t,e){t||fail(t,!0,e,"==",assert.ok)}function _deepEqual(t,e){if(t===e)return!0;if(util.isBuffer(t)&&util.isBuffer(e)){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return util.isDate(t)&&util.isDate(e)?t.getTime()===e.getTime():util.isRegExp(t)&&util.isRegExp(e)?t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase:util.isObject(t)||util.isObject(e)?objEquiv(t,e):t==e}function isArguments(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function objEquiv(t,e){if(util.isNullOrUndefined(t)||util.isNullOrUndefined(e))return!1;if(t.prototype!==e.prototype)return!1;if(isArguments(t))return isArguments(e)?(t=pSlice.call(t),e=pSlice.call(e),_deepEqual(t,e)):!1;try{var r,i,s=objectKeys(t),n=objectKeys(e)}catch(a){return!1}if(s.length!=n.length)return!1;for(s.sort(),n.sort(),i=s.length-1;i>=0;i--)if(s[i]!=n[i])return!1;for(i=s.length-1;i>=0;i--)if(r=s[i],!_deepEqual(t[r],e[r]))return!1;return!0}function expectedException(t,e){return t&&e?"[object RegExp]"==Object.prototype.toString.call(e)?e.test(t):t instanceof e?!0:e.call({},t)===!0?!0:!1:!1}function _throws(t,e,r,i){var s;util.isString(r)&&(i=r,r=null);try{e()}catch(n){s=n}if(i=(r&&r.name?" ("+r.name+").":".")+(i?" "+i:"."),t&&!s&&fail(s,r,"Missing expected exception"+i),!t&&expectedException(s,r)&&fail(s,r,"Got unwanted exception"+i),t&&s&&r&&!expectedException(s,r)||!t&&s)throw s}var util=require("util/"),pSlice=Array.prototype.slice,hasOwn=Object.prototype.hasOwnProperty,assert=module.exports=ok;assert.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=getMessage(this),this.generatedMessage=!0);var e=t.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var i=r.stack,s=e.name,n=i.indexOf("\n"+s);if(n>=0){var a=i.indexOf("\n",n+1);i=i.substring(a+1)}this.stack=i}}},util.inherits(assert.AssertionError,Error),assert.fail=fail,assert.ok=ok,assert.equal=function(t,e,r){t!=e&&fail(t,e,r,"==",assert.equal)},assert.notEqual=function(t,e,r){t==e&&fail(t,e,r,"!=",assert.notEqual)},assert.deepEqual=function(t,e,r){_deepEqual(t,e)||fail(t,e,r,"deepEqual",assert.deepEqual)},assert.notDeepEqual=function(t,e,r){_deepEqual(t,e)&&fail(t,e,r,"notDeepEqual",assert.notDeepEqual)},assert.strictEqual=function(t,e,r){t!==e&&fail(t,e,r,"===",assert.strictEqual)},assert.notStrictEqual=function(t,e,r){t===e&&fail(t,e,r,"!==",assert.notStrictEqual)},assert.throws=function(){_throws.apply(this,[!0].concat(pSlice.call(arguments)))},assert.doesNotThrow=function(){_throws.apply(this,[!1].concat(pSlice.call(arguments)))},assert.ifError=function(t){if(t)throw t};var objectKeys=Object.keys||function(t){var e=[];for(var r in t)hasOwn.call(t,r)&&e.push(r);return e};
},{"util/":94}],93:[function(require,module,exports){
module.exports=function(o){return o&&"object"==typeof o&&"function"==typeof o.copy&&"function"==typeof o.fill&&"function"==typeof o.readUInt8};
},{}],94:[function(require,module,exports){
(function (process,global){
function inspect(e,r){var t={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),isBoolean(r)?t.showHidden=r:r&&exports._extend(t,r),isUndefined(t.showHidden)&&(t.showHidden=!1),isUndefined(t.depth)&&(t.depth=2),isUndefined(t.colors)&&(t.colors=!1),isUndefined(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=stylizeWithColor),formatValue(t,e,t.depth)}function stylizeWithColor(e,r){var t=inspect.styles[r];return t?"["+inspect.colors[t][0]+"m"+e+"["+inspect.colors[t][1]+"m":e}function stylizeNoColor(e){return e}function arrayToHash(e){var r={};return e.forEach(function(e){r[e]=!0}),r}function formatValue(e,r,t){if(e.customInspect&&r&&isFunction(r.inspect)&&r.inspect!==exports.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(t,e);return isString(n)||(n=formatValue(e,n,t)),n}var i=formatPrimitive(e,r);if(i)return i;var o=Object.keys(r),s=arrayToHash(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(r)),isError(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return formatError(r);if(0===o.length){if(isFunction(r)){var u=r.name?": "+r.name:"";return e.stylize("[Function"+u+"]","special")}if(isRegExp(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(isDate(r))return e.stylize(Date.prototype.toString.call(r),"date");if(isError(r))return formatError(r)}var a="",c=!1,l=["{","}"];if(isArray(r)&&(c=!0,l=["[","]"]),isFunction(r)){var p=r.name?": "+r.name:"";a=" [Function"+p+"]"}if(isRegExp(r)&&(a=" "+RegExp.prototype.toString.call(r)),isDate(r)&&(a=" "+Date.prototype.toUTCString.call(r)),isError(r)&&(a=" "+formatError(r)),0===o.length&&(!c||0==r.length))return l[0]+a+l[1];if(0>t)return isRegExp(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special");e.seen.push(r);var f;return f=c?formatArray(e,r,t,s,o):o.map(function(n){return formatProperty(e,r,t,s,n,c)}),e.seen.pop(),reduceToSingleString(f,a,l)}function formatPrimitive(e,r){if(isUndefined(r))return e.stylize("undefined","undefined");if(isString(r)){var t="'"+JSON.stringify(r).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(t,"string")}return isNumber(r)?e.stylize(""+r,"number"):isBoolean(r)?e.stylize(""+r,"boolean"):isNull(r)?e.stylize("null","null"):void 0}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,r,t,n,i){for(var o=[],s=0,u=r.length;u>s;++s)o.push(hasOwnProperty(r,String(s))?formatProperty(e,r,t,n,String(s),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(formatProperty(e,r,t,n,i,!0))}),o}function formatProperty(e,r,t,n,i,o){var s,u,a;if(a=Object.getOwnPropertyDescriptor(r,i)||{value:r[i]},a.get?u=a.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):a.set&&(u=e.stylize("[Setter]","special")),hasOwnProperty(n,i)||(s="["+i+"]"),u||(e.seen.indexOf(a.value)<0?(u=isNull(t)?formatValue(e,a.value,null):formatValue(e,a.value,t-1),u.indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),isUndefined(s)){if(o&&i.match(/^\d+$/))return u;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function reduceToSingleString(e,r,t){var n=0,i=e.reduce(function(e,r){return n++,r.indexOf("\n")>=0&&n++,e+r.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?t[0]+(""===r?"":r+"\n ")+" "+e.join(",\n  ")+" "+t[1]:t[0]+r+" "+e.join(", ")+" "+t[1]}function isArray(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isSymbol(e){return"symbol"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"==typeof e&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return 10>e?"0"+e.toString(10):e.toString(10)}function timestamp(){var e=new Date,r=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(":");return[e.getDate(),months[e.getMonth()],r].join(" ")}function hasOwnProperty(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var formatRegExp=/%[sdj%]/g;exports.format=function(e){if(!isString(e)){for(var r=[],t=0;t<arguments.length;t++)r.push(inspect(arguments[t]));return r.join(" ")}for(var t=1,n=arguments,i=n.length,o=String(e).replace(formatRegExp,function(e){if("%%"===e)return"%";if(t>=i)return e;switch(e){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch(r){return"[Circular]"}default:return e}}),s=n[t];i>t;s=n[++t])o+=isNull(s)||!isObject(s)?" "+s:" "+inspect(s);return o},exports.deprecate=function(e,r){function t(){if(!n){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),n=!0}return e.apply(this,arguments)}if(isUndefined(global.process))return function(){return exports.deprecate(e,r).apply(this,arguments)};if(process.noDeprecation===!0)return e;var n=!1;return t};var debugs={},debugEnviron;exports.debuglog=function(e){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!debugs[e])if(new RegExp("\\b"+e+"\\b","i").test(debugEnviron)){var r=process.pid;debugs[e]=function(){var t=exports.format.apply(exports,arguments);console.error("%s %d: %s",e,r,t)}}else debugs[e]=function(){};return debugs[e]},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=require("./support/isBuffer");var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(e,r){if(!r||!isObject(r))return e;for(var t=Object.keys(r),n=t.length;n--;)e[t[n]]=r[t[n]];return e};
}).call(this,require("FWaASH"),typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./support/isBuffer":93,"FWaASH":108,"inherits":105}],95:[function(require,module,exports){
function Buffer(e,t,r){if(!(this instanceof Buffer))return new Buffer(e,t,r);var n=typeof e;if("base64"===t&&"string"===n)for(e=stringtrim(e);e.length%4!==0;)e+="=";var i;if("number"===n)i=coerce(e);else if("string"===n)i=Buffer.byteLength(e,t);else{if("object"!==n)throw new Error("First argument needs to be a number, array or string.");i=coerce(e.length)}var s;Buffer._useTypedArrays?s=Buffer._augment(new Uint8Array(i)):(s=this,s.length=i,s._isBuffer=!0);var a;if(Buffer._useTypedArrays&&"number"==typeof e.byteLength)s._set(e);else if(isArrayish(e))for(a=0;i>a;a++)s[a]=Buffer.isBuffer(e)?e.readUInt8(a):e[a];else if("string"===n)s.write(e,0,t);else if("number"===n&&!Buffer._useTypedArrays&&!r)for(a=0;i>a;a++)s[a]=0;return s}function hexWrite(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var s=t.length;assert(s%2===0,"Invalid hex string"),n>s/2&&(n=s/2);for(var a=0;n>a;a++){var o=parseInt(t.substr(2*a,2),16);assert(!isNaN(o),"Invalid hex string"),e[r+a]=o}return a}function utf8Write(e,t,r,n){var i=blitBuffer(utf8ToBytes(t),e,r,n);return i}function asciiWrite(e,t,r,n){var i=blitBuffer(asciiToBytes(t),e,r,n);return i}function binaryWrite(e,t,r,n){return asciiWrite(e,t,r,n)}function base64Write(e,t,r,n){var i=blitBuffer(base64ToBytes(t),e,r,n);return i}function utf16leWrite(e,t,r,n){var i=blitBuffer(utf16leToBytes(t),e,r,n);return i}function base64Slice(e,t,r){return base64.fromByteArray(0===t&&r===e.length?e:e.slice(t,r))}function utf8Slice(e,t,r){var n="",i="";r=Math.min(e.length,r);for(var s=t;r>s;s++)e[s]<=127?(n+=decodeUtf8Char(i)+String.fromCharCode(e[s]),i=""):i+="%"+e[s].toString(16);return n+decodeUtf8Char(i)}function asciiSlice(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;r>i;i++)n+=String.fromCharCode(e[i]);return n}function binarySlice(e,t,r){return asciiSlice(e,t,r)}function hexSlice(e,t,r){var n=e.length;(!t||0>t)&&(t=0),(!r||0>r||r>n)&&(r=n);for(var i="",s=t;r>s;s++)i+=toHex(e[s]);return i}function utf16leSlice(e,t,r){for(var n=e.slice(t,r),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function readUInt16(e,t,r,n){n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(void 0!==t&&null!==t,"missing offset"),assert(t+1<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var s;return r?(s=e[t],i>t+1&&(s|=e[t+1]<<8)):(s=e[t]<<8,i>t+1&&(s|=e[t+1])),s}}function readUInt32(e,t,r,n){n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(void 0!==t&&null!==t,"missing offset"),assert(t+3<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var s;return r?(i>t+2&&(s=e[t+2]<<16),i>t+1&&(s|=e[t+1]<<8),s|=e[t],i>t+3&&(s+=e[t+3]<<24>>>0)):(i>t+1&&(s=e[t+1]<<16),i>t+2&&(s|=e[t+2]<<8),i>t+3&&(s|=e[t+3]),s+=e[t]<<24>>>0),s}}function readInt16(e,t,r,n){n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(void 0!==t&&null!==t,"missing offset"),assert(t+1<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var s=readUInt16(e,t,r,!0),a=32768&s;return a?-1*(65535-s+1):s}}function readInt32(e,t,r,n){n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(void 0!==t&&null!==t,"missing offset"),assert(t+3<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var s=readUInt32(e,t,r,!0),a=2147483648&s;return a?-1*(4294967295-s+1):s}}function readFloat(e,t,r,n){return n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(t+3<e.length,"Trying to read beyond buffer length")),ieee754.read(e,t,r,23,4)}function readDouble(e,t,r,n){return n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(t+7<e.length,"Trying to read beyond buffer length")),ieee754.read(e,t,r,52,8)}function writeUInt16(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+1<e.length,"trying to write beyond buffer length"),verifuint(t,65535));var s=e.length;if(!(r>=s)){for(var a=0,o=Math.min(s-r,2);o>a;a++)e[r+a]=(t&255<<8*(n?a:1-a))>>>8*(n?a:1-a);return r+2}}function writeUInt32(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+3<e.length,"trying to write beyond buffer length"),verifuint(t,4294967295));var s=e.length;if(!(r>=s)){for(var a=0,o=Math.min(s-r,4);o>a;a++)e[r+a]=t>>>8*(n?a:3-a)&255;return r+4}}function writeInt16(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+1<e.length,"Trying to write beyond buffer length"),verifsint(t,32767,-32768));var s=e.length;if(!(r>=s))return t>=0?writeUInt16(e,t,r,n,i):writeUInt16(e,65535+t+1,r,n,i),r+2}function writeInt32(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+3<e.length,"Trying to write beyond buffer length"),verifsint(t,2147483647,-2147483648));var s=e.length;if(!(r>=s))return t>=0?writeUInt32(e,t,r,n,i):writeUInt32(e,4294967295+t+1,r,n,i),r+4}function writeFloat(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+3<e.length,"Trying to write beyond buffer length"),verifIEEE754(t,3.4028234663852886e38,-3.4028234663852886e38));var s=e.length;if(!(r>=s))return ieee754.write(e,t,r,n,23,4),r+4}function writeDouble(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+7<e.length,"Trying to write beyond buffer length"),verifIEEE754(t,1.7976931348623157e308,-1.7976931348623157e308));var s=e.length;if(!(r>=s))return ieee754.write(e,t,r,n,52,8),r+8}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function clamp(e,t,r){return"number"!=typeof e?r:(e=~~e,e>=t?t:e>=0?e:(e+=t,e>=0?e:0))}function coerce(e){return e=~~Math.ceil(+e),0>e?0:e}function isArray(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function isArrayish(e){return isArray(e)||Buffer.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function toHex(e){return 16>e?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);if(127>=n)t.push(n);else{var i=r;n>=55296&&57343>=n&&r++;for(var s=encodeURIComponent(e.slice(i,r+1)).substr(1).split("%"),a=0;a<s.length;a++)t.push(parseInt(s[a],16))}}return t}function asciiToBytes(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}function utf16leToBytes(e){for(var t,r,n,i=[],s=0;s<e.length;s++)t=e.charCodeAt(s),r=t>>8,n=t%256,i.push(n),i.push(r);return i}function base64ToBytes(e){return base64.toByteArray(e)}function blitBuffer(e,t,r,n){for(var i=0;n>i&&!(i+r>=t.length||i>=e.length);i++)t[i+r]=e[i];return i}function decodeUtf8Char(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}function verifuint(e,t){assert("number"==typeof e,"cannot write a non-number as a number"),assert(e>=0,"specified a negative value for writing an unsigned value"),assert(t>=e,"value is larger than maximum value for type"),assert(Math.floor(e)===e,"value has a fractional component")}function verifsint(e,t,r){assert("number"==typeof e,"cannot write a non-number as a number"),assert(t>=e,"value larger than maximum allowed value"),assert(e>=r,"value smaller than minimum allowed value"),assert(Math.floor(e)===e,"value has a fractional component")}function verifIEEE754(e,t,r){assert("number"==typeof e,"cannot write a non-number as a number"),assert(t>=e,"value larger than maximum allowed value"),assert(e>=r,"value smaller than minimum allowed value")}function assert(e,t){if(!e)throw new Error(t||"Failed assertion")}var base64=require("base64-js"),ieee754=require("ieee754");exports.Buffer=Buffer,exports.SlowBuffer=Buffer,exports.INSPECT_MAX_BYTES=50,Buffer.poolSize=8192,Buffer._useTypedArrays=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray}catch(r){return!1}}(),Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.isBuffer=function(e){return!(null===e||void 0===e||!e._isBuffer)},Buffer.byteLength=function(e,t){var r;switch(e=e.toString(),t||"utf8"){case"hex":r=e.length/2;break;case"utf8":case"utf-8":r=utf8ToBytes(e).length;break;case"ascii":case"binary":case"raw":r=e.length;break;case"base64":r=base64ToBytes(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*e.length;break;default:throw new Error("Unknown encoding")}return r},Buffer.concat=function(e,t){if(assert(isArray(e),"Usage: Buffer.concat(list[, length])"),0===e.length)return new Buffer(0);if(1===e.length)return e[0];var r;if(void 0===t)for(t=0,r=0;r<e.length;r++)t+=e[r].length;var n=new Buffer(t),i=0;for(r=0;r<e.length;r++){var s=e[r];s.copy(n,i),i+=s.length}return n},Buffer.compare=function(e,t){assert(Buffer.isBuffer(e)&&Buffer.isBuffer(t),"Arguments must be Buffers");for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);s>i&&e[i]===t[i];i++);return i!==s&&(r=e[i],n=t[i]),n>r?-1:r>n?1:0},Buffer.prototype.write=function(e,t,r,n){if(isFinite(t))isFinite(r)||(n=r,r=void 0);else{var i=n;n=t,t=r,r=i}t=Number(t)||0;var s=this.length-t;r?(r=Number(r),r>s&&(r=s)):r=s,n=String(n||"utf8").toLowerCase();var a;switch(n){case"hex":a=hexWrite(this,e,t,r);break;case"utf8":case"utf-8":a=utf8Write(this,e,t,r);break;case"ascii":a=asciiWrite(this,e,t,r);break;case"binary":a=binaryWrite(this,e,t,r);break;case"base64":a=base64Write(this,e,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":a=utf16leWrite(this,e,t,r);break;default:throw new Error("Unknown encoding")}return a},Buffer.prototype.toString=function(e,t,r){var n=this;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,r=void 0===r?n.length:Number(r),r===t)return"";var i;switch(e){case"hex":i=hexSlice(n,t,r);break;case"utf8":case"utf-8":i=utf8Slice(n,t,r);break;case"ascii":i=asciiSlice(n,t,r);break;case"binary":i=binarySlice(n,t,r);break;case"base64":i=base64Slice(n,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=utf16leSlice(n,t,r);break;default:throw new Error("Unknown encoding")}return i},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Buffer.prototype.equals=function(e){return assert(Buffer.isBuffer(e),"Argument must be a Buffer"),0===Buffer.compare(this,e)},Buffer.prototype.compare=function(e){return assert(Buffer.isBuffer(e),"Argument must be a Buffer"),Buffer.compare(this,e)},Buffer.prototype.copy=function(e,t,r,n){var i=this;if(r||(r=0),n||0===n||(n=this.length),t||(t=0),n!==r&&0!==e.length&&0!==i.length){assert(n>=r,"sourceEnd < sourceStart"),assert(t>=0&&t<e.length,"targetStart out of bounds"),assert(r>=0&&r<i.length,"sourceStart out of bounds"),assert(n>=0&&n<=i.length,"sourceEnd out of bounds"),n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var s=n-r;if(100>s||!Buffer._useTypedArrays)for(var a=0;s>a;a++)e[a+t]=this[a+r];else e._set(this.subarray(r,r+s),t)}},Buffer.prototype.slice=function(e,t){var r=this.length;if(e=clamp(e,r,0),t=clamp(t,r,r),Buffer._useTypedArrays)return Buffer._augment(this.subarray(e,t));for(var n=t-e,i=new Buffer(n,void 0,!0),s=0;n>s;s++)i[s]=this[s+e];return i},Buffer.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},Buffer.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},Buffer.prototype.readUInt8=function(e,t){return t||(assert(void 0!==e&&null!==e,"missing offset"),assert(e<this.length,"Trying to read beyond buffer length")),e>=this.length?void 0:this[e]},Buffer.prototype.readUInt16LE=function(e,t){return readUInt16(this,e,!0,t)},Buffer.prototype.readUInt16BE=function(e,t){return readUInt16(this,e,!1,t)},Buffer.prototype.readUInt32LE=function(e,t){return readUInt32(this,e,!0,t)},Buffer.prototype.readUInt32BE=function(e,t){return readUInt32(this,e,!1,t)},Buffer.prototype.readInt8=function(e,t){if(t||(assert(void 0!==e&&null!==e,"missing offset"),assert(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length)){var r=128&this[e];return r?-1*(255-this[e]+1):this[e]}},Buffer.prototype.readInt16LE=function(e,t){return readInt16(this,e,!0,t)},Buffer.prototype.readInt16BE=function(e,t){return readInt16(this,e,!1,t)},Buffer.prototype.readInt32LE=function(e,t){return readInt32(this,e,!0,t)},Buffer.prototype.readInt32BE=function(e,t){return readInt32(this,e,!1,t)},Buffer.prototype.readFloatLE=function(e,t){return readFloat(this,e,!0,t)},Buffer.prototype.readFloatBE=function(e,t){return readFloat(this,e,!1,t)},Buffer.prototype.readDoubleLE=function(e,t){return readDouble(this,e,!0,t)},Buffer.prototype.readDoubleBE=function(e,t){return readDouble(this,e,!1,t)},Buffer.prototype.writeUInt8=function(e,t,r){return r||(assert(void 0!==e&&null!==e,"missing value"),assert(void 0!==t&&null!==t,"missing offset"),assert(t<this.length,"trying to write beyond buffer length"),verifuint(e,255)),t>=this.length?void 0:(this[t]=e,t+1)},Buffer.prototype.writeUInt16LE=function(e,t,r){return writeUInt16(this,e,t,!0,r)},Buffer.prototype.writeUInt16BE=function(e,t,r){return writeUInt16(this,e,t,!1,r)},Buffer.prototype.writeUInt32LE=function(e,t,r){return writeUInt32(this,e,t,!0,r)},Buffer.prototype.writeUInt32BE=function(e,t,r){return writeUInt32(this,e,t,!1,r)},Buffer.prototype.writeInt8=function(e,t,r){return r||(assert(void 0!==e&&null!==e,"missing value"),assert(void 0!==t&&null!==t,"missing offset"),assert(t<this.length,"Trying to write beyond buffer length"),verifsint(e,127,-128)),t>=this.length?void 0:(e>=0?this.writeUInt8(e,t,r):this.writeUInt8(255+e+1,t,r),t+1)},Buffer.prototype.writeInt16LE=function(e,t,r){return writeInt16(this,e,t,!0,r)},Buffer.prototype.writeInt16BE=function(e,t,r){return writeInt16(this,e,t,!1,r)},Buffer.prototype.writeInt32LE=function(e,t,r){return writeInt32(this,e,t,!0,r)},Buffer.prototype.writeInt32BE=function(e,t,r){return writeInt32(this,e,t,!1,r)},Buffer.prototype.writeFloatLE=function(e,t,r){return writeFloat(this,e,t,!0,r)},Buffer.prototype.writeFloatBE=function(e,t,r){return writeFloat(this,e,t,!1,r)},Buffer.prototype.writeDoubleLE=function(e,t,r){return writeDouble(this,e,t,!0,r)},Buffer.prototype.writeDoubleBE=function(e,t,r){return writeDouble(this,e,t,!1,r)},Buffer.prototype.fill=function(e,t,r){if(e||(e=0),t||(t=0),r||(r=this.length),assert(r>=t,"end < start"),r!==t&&0!==this.length){assert(t>=0&&t<this.length,"start out of bounds"),assert(r>=0&&r<=this.length,"end out of bounds");var n;if("number"==typeof e)for(n=t;r>n;n++)this[n]=e;else{var i=utf8ToBytes(e.toString()),s=i.length;for(n=t;r>n;n++)this[n]=i[n%s]}return this}},Buffer.prototype.inspect=function(){for(var e=[],t=this.length,r=0;t>r;r++)if(e[r]=toHex(this[r]),r===exports.INSPECT_MAX_BYTES){e[r+1]="...";break}return"<Buffer "+e.join(" ")+">"},Buffer.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(Buffer._useTypedArrays)return new Buffer(this).buffer;for(var e=new Uint8Array(this.length),t=0,r=e.length;r>t;t+=1)e[t]=this[t];return e.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var BP=Buffer.prototype;Buffer._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=BP.get,e.set=BP.set,e.write=BP.write,e.toString=BP.toString,e.toLocaleString=BP.toString,e.toJSON=BP.toJSON,e.equals=BP.equals,e.compare=BP.compare,e.copy=BP.copy,e.slice=BP.slice,e.readUInt8=BP.readUInt8,e.readUInt16LE=BP.readUInt16LE,e.readUInt16BE=BP.readUInt16BE,e.readUInt32LE=BP.readUInt32LE,e.readUInt32BE=BP.readUInt32BE,e.readInt8=BP.readInt8,e.readInt16LE=BP.readInt16LE,e.readInt16BE=BP.readInt16BE,e.readInt32LE=BP.readInt32LE,e.readInt32BE=BP.readInt32BE,e.readFloatLE=BP.readFloatLE,e.readFloatBE=BP.readFloatBE,e.readDoubleLE=BP.readDoubleLE,e.readDoubleBE=BP.readDoubleBE,e.writeUInt8=BP.writeUInt8,e.writeUInt16LE=BP.writeUInt16LE,e.writeUInt16BE=BP.writeUInt16BE,e.writeUInt32LE=BP.writeUInt32LE,e.writeUInt32BE=BP.writeUInt32BE,e.writeInt8=BP.writeInt8,e.writeInt16LE=BP.writeInt16LE,e.writeInt16BE=BP.writeInt16BE,e.writeInt32LE=BP.writeInt32LE,e.writeInt32BE=BP.writeInt32BE,e.writeFloatLE=BP.writeFloatLE,e.writeFloatBE=BP.writeFloatBE,e.writeDoubleLE=BP.writeDoubleLE,e.writeDoubleBE=BP.writeDoubleBE,e.fill=BP.fill,e.inspect=BP.inspect,e.toArrayBuffer=BP.toArrayBuffer,e};
},{"base64-js":96,"ieee754":97}],96:[function(require,module,exports){
var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(){"use strict";function r(r){var t=r.charCodeAt(0);return t===a?62:t===h?63:o>t?-1:o+10>t?t-o+26+26:A+26>t?t-A:c+26>t?t-c+26:void 0}function t(t){function e(r){u[l++]=r}var a,h,o,c,A,u;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.length;A="="===t.charAt(i-2)?2:"="===t.charAt(i-1)?1:0,u=new n(3*t.length/4-A),o=A>0?t.length-4:t.length;var l=0;for(a=0,h=0;o>a;a+=4,h+=3)c=r(t.charAt(a))<<18|r(t.charAt(a+1))<<12|r(t.charAt(a+2))<<6|r(t.charAt(a+3)),e((16711680&c)>>16),e((65280&c)>>8),e(255&c);return 2===A?(c=r(t.charAt(a))<<2|r(t.charAt(a+1))>>4,e(255&c)):1===A&&(c=r(t.charAt(a))<<10|r(t.charAt(a+1))<<4|r(t.charAt(a+2))>>2,e(c>>8&255),e(255&c)),u}function e(r){function t(r){return lookup.charAt(r)}function e(r){return t(r>>18&63)+t(r>>12&63)+t(r>>6&63)+t(63&r)}var n,a,h,o=r.length%3,c="";for(n=0,h=r.length-o;h>n;n+=3)a=(r[n]<<16)+(r[n+1]<<8)+r[n+2],c+=e(a);switch(o){case 1:a=r[r.length-1],c+=t(a>>2),c+=t(a<<4&63),c+="==";break;case 2:a=(r[r.length-2]<<8)+r[r.length-1],c+=t(a>>10),c+=t(a>>4&63),c+=t(a<<2&63),c+="="}return c}var n="undefined"!=typeof Uint8Array?Uint8Array:Array,a=("0".charCodeAt(0),"+".charCodeAt(0)),h="/".charCodeAt(0),o="0".charCodeAt(0),c="a".charCodeAt(0),A="A".charCodeAt(0);module.exports.toByteArray=t,module.exports.fromByteArray=e}();
},{}],97:[function(require,module,exports){
exports.read=function(o,t,a,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,n=a?h-1:0,s=a?-1:1,N=o[t+n];for(n+=s,M=N&(1<<-i)-1,N>>=-i,i+=w;i>0;M=256*M+o[t+n],n+=s,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+o[t+n],n+=s,i-=8);if(0===M)M=1-e;else{if(M===f)return p?0/0:1/0*(N?-1:1);p+=Math.pow(2,r),M-=e}return(N?-1:1)*p*Math.pow(2,M-r)},exports.write=function(o,t,a,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,n=i>>1,s=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,N=r?0:M-1,u=r?1:-1,l=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(w=isNaN(t)?1:0,p=i):(p=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-p))<1&&(p--,f*=2),t+=p+n>=1?s/f:s*Math.pow(2,1-n),t*f>=2&&(p++,f/=2),p+n>=i?(w=0,p=i):p+n>=1?(w=(t*f-1)*Math.pow(2,h),p+=n):(w=t*Math.pow(2,n-1)*Math.pow(2,h),p=0));h>=8;o[a+N]=255&w,N+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;o[a+N]=255&p,N+=u,p/=256,e-=8);o[a+N-u]|=128*l};
},{}],98:[function(require,module,exports){
function toArray(r,e){if(r.length%intSize!==0){var f=r.length+(intSize-r.length%intSize);r=Buffer.concat([r,zeroBuffer],f)}for(var t=[],n=e?r.readInt32BE:r.readInt32LE,u=0;u<r.length;u+=intSize)t.push(n.call(r,u));return t}function toBuffer(r,e,f){for(var t=new Buffer(e),n=f?t.writeInt32BE:t.writeInt32LE,u=0;u<r.length;u++)n.call(t,r[u],4*u,!0);return t}function hash(r,e,f,t){Buffer.isBuffer(r)||(r=new Buffer(r));var n=e(toArray(r,t),r.length*chrsz);return toBuffer(n,f,t)}var Buffer=require("buffer").Buffer,intSize=4,zeroBuffer=new Buffer(intSize);zeroBuffer.fill(0);var chrsz=8;module.exports={hash:hash};
},{"buffer":95}],99:[function(require,module,exports){
function hmac(e,r,f){Buffer.isBuffer(r)||(r=new Buffer(r)),Buffer.isBuffer(f)||(f=new Buffer(f)),r.length>blocksize?r=e(r):r.length<blocksize&&(r=Buffer.concat([r,zeroBuffer],blocksize));for(var t=new Buffer(blocksize),n=new Buffer(blocksize),i=0;blocksize>i;i++)t[i]=54^r[i],n[i]=92^r[i];var c=e(Buffer.concat([t,f]));return e(Buffer.concat([n,c]))}function hash(e,r){e=e||"sha1";var f=algorithms[e],t=[],n=0;return f||error("algorithm:",e,"is not yet supported"),{update:function(e){return Buffer.isBuffer(e)||(e=new Buffer(e)),t.push(e),n+=e.length,this},digest:function(e){var n=Buffer.concat(t),i=r?hmac(f,r,n):f(n);return t=null,e?i.toString(e):i}}}function error(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function each(e,r){for(var f in e)r(e[f],f)}var Buffer=require("buffer").Buffer,sha=require("./sha"),sha256=require("./sha256"),rng=require("./rng"),md5=require("./md5"),algorithms={sha1:sha,sha256:sha256,md5:md5},blocksize=64,zeroBuffer=new Buffer(blocksize);zeroBuffer.fill(0),exports.createHash=function(e){return hash(e)},exports.createHmac=function(e,r){return hash(e,r)},exports.randomBytes=function(e,r){if(!r||!r.call)return new Buffer(rng(e));try{r.call(this,void 0,new Buffer(rng(e)))}catch(f){r(f)}},each(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],function(e){exports[e]=function(){error("sorry,",e,"is not implemented yet")}});
},{"./md5":100,"./rng":101,"./sha":102,"./sha256":103,"buffer":95}],100:[function(require,module,exports){
function md5_vm_test(){return"900150983cd24fb0d6963f7d28e17f72"==hex_md5("abc")}function core_md5(d,_){d[_>>5]|=128<<_%32,d[(_+64>>>9<<4)+14]=_;for(var m=1732584193,f=-271733879,i=-1732584194,h=271733878,r=0;r<d.length;r+=16){var n=m,e=f,g=i,t=h;m=md5_ff(m,f,i,h,d[r+0],7,-680876936),h=md5_ff(h,m,f,i,d[r+1],12,-389564586),i=md5_ff(i,h,m,f,d[r+2],17,606105819),f=md5_ff(f,i,h,m,d[r+3],22,-1044525330),m=md5_ff(m,f,i,h,d[r+4],7,-176418897),h=md5_ff(h,m,f,i,d[r+5],12,1200080426),i=md5_ff(i,h,m,f,d[r+6],17,-1473231341),f=md5_ff(f,i,h,m,d[r+7],22,-45705983),m=md5_ff(m,f,i,h,d[r+8],7,1770035416),h=md5_ff(h,m,f,i,d[r+9],12,-1958414417),i=md5_ff(i,h,m,f,d[r+10],17,-42063),f=md5_ff(f,i,h,m,d[r+11],22,-1990404162),m=md5_ff(m,f,i,h,d[r+12],7,1804603682),h=md5_ff(h,m,f,i,d[r+13],12,-40341101),i=md5_ff(i,h,m,f,d[r+14],17,-1502002290),f=md5_ff(f,i,h,m,d[r+15],22,1236535329),m=md5_gg(m,f,i,h,d[r+1],5,-165796510),h=md5_gg(h,m,f,i,d[r+6],9,-1069501632),i=md5_gg(i,h,m,f,d[r+11],14,643717713),f=md5_gg(f,i,h,m,d[r+0],20,-373897302),m=md5_gg(m,f,i,h,d[r+5],5,-701558691),h=md5_gg(h,m,f,i,d[r+10],9,38016083),i=md5_gg(i,h,m,f,d[r+15],14,-660478335),f=md5_gg(f,i,h,m,d[r+4],20,-405537848),m=md5_gg(m,f,i,h,d[r+9],5,568446438),h=md5_gg(h,m,f,i,d[r+14],9,-1019803690),i=md5_gg(i,h,m,f,d[r+3],14,-187363961),f=md5_gg(f,i,h,m,d[r+8],20,1163531501),m=md5_gg(m,f,i,h,d[r+13],5,-1444681467),h=md5_gg(h,m,f,i,d[r+2],9,-51403784),i=md5_gg(i,h,m,f,d[r+7],14,1735328473),f=md5_gg(f,i,h,m,d[r+12],20,-1926607734),m=md5_hh(m,f,i,h,d[r+5],4,-378558),h=md5_hh(h,m,f,i,d[r+8],11,-2022574463),i=md5_hh(i,h,m,f,d[r+11],16,1839030562),f=md5_hh(f,i,h,m,d[r+14],23,-35309556),m=md5_hh(m,f,i,h,d[r+1],4,-1530992060),h=md5_hh(h,m,f,i,d[r+4],11,1272893353),i=md5_hh(i,h,m,f,d[r+7],16,-155497632),f=md5_hh(f,i,h,m,d[r+10],23,-1094730640),m=md5_hh(m,f,i,h,d[r+13],4,681279174),h=md5_hh(h,m,f,i,d[r+0],11,-358537222),i=md5_hh(i,h,m,f,d[r+3],16,-722521979),f=md5_hh(f,i,h,m,d[r+6],23,76029189),m=md5_hh(m,f,i,h,d[r+9],4,-640364487),h=md5_hh(h,m,f,i,d[r+12],11,-421815835),i=md5_hh(i,h,m,f,d[r+15],16,530742520),f=md5_hh(f,i,h,m,d[r+2],23,-995338651),m=md5_ii(m,f,i,h,d[r+0],6,-198630844),h=md5_ii(h,m,f,i,d[r+7],10,1126891415),i=md5_ii(i,h,m,f,d[r+14],15,-1416354905),f=md5_ii(f,i,h,m,d[r+5],21,-57434055),m=md5_ii(m,f,i,h,d[r+12],6,1700485571),h=md5_ii(h,m,f,i,d[r+3],10,-1894986606),i=md5_ii(i,h,m,f,d[r+10],15,-1051523),f=md5_ii(f,i,h,m,d[r+1],21,-2054922799),m=md5_ii(m,f,i,h,d[r+8],6,1873313359),h=md5_ii(h,m,f,i,d[r+15],10,-30611744),i=md5_ii(i,h,m,f,d[r+6],15,-1560198380),f=md5_ii(f,i,h,m,d[r+13],21,1309151649),m=md5_ii(m,f,i,h,d[r+4],6,-145523070),h=md5_ii(h,m,f,i,d[r+11],10,-1120210379),i=md5_ii(i,h,m,f,d[r+2],15,718787259),f=md5_ii(f,i,h,m,d[r+9],21,-343485551),m=safe_add(m,n),f=safe_add(f,e),i=safe_add(i,g),h=safe_add(h,t)}return Array(m,f,i,h)}function md5_cmn(d,_,m,f,i,h){return safe_add(bit_rol(safe_add(safe_add(_,d),safe_add(f,h)),i),m)}function md5_ff(d,_,m,f,i,h,r){return md5_cmn(_&m|~_&f,d,_,i,h,r)}function md5_gg(d,_,m,f,i,h,r){return md5_cmn(_&f|m&~f,d,_,i,h,r)}function md5_hh(d,_,m,f,i,h,r){return md5_cmn(_^m^f,d,_,i,h,r)}function md5_ii(d,_,m,f,i,h,r){return md5_cmn(m^(_|~f),d,_,i,h,r)}function safe_add(d,_){var m=(65535&d)+(65535&_),f=(d>>16)+(_>>16)+(m>>16);return f<<16|65535&m}function bit_rol(d,_){return d<<_|d>>>32-_}var helpers=require("./helpers");module.exports=function(d){return helpers.hash(d,core_md5,16)};
},{"./helpers":98}],101:[function(require,module,exports){
!function(){var r,n,t=this;r=function(r){for(var n,n,t=new Array(r),o=0;r>o;o++)0==(3&o)&&(n=4294967296*Math.random()),t[o]=n>>>((3&o)<<3)&255;return t},t.crypto&&crypto.getRandomValues&&(n=function(r){var n=new Uint8Array(r);return crypto.getRandomValues(n),n}),module.exports=n||r}();
},{}],102:[function(require,module,exports){
function core_sha1(r,a){r[a>>5]|=128<<24-a%32,r[(a+64>>9<<4)+15]=a;for(var e=Array(80),d=1732584193,s=-271733879,f=-1732584194,n=271733878,t=-1009589776,o=0;o<r.length;o+=16){for(var _=d,u=s,h=f,l=n,c=t,i=0;80>i;i++){e[i]=16>i?r[o+i]:rol(e[i-3]^e[i-8]^e[i-14]^e[i-16],1);var v=safe_add(safe_add(rol(d,5),sha1_ft(i,s,f,n)),safe_add(safe_add(t,e[i]),sha1_kt(i)));t=n,n=f,f=rol(s,30),s=d,d=v}d=safe_add(d,_),s=safe_add(s,u),f=safe_add(f,h),n=safe_add(n,l),t=safe_add(t,c)}return Array(d,s,f,n,t)}function sha1_ft(r,a,e,d){return 20>r?a&e|~a&d:40>r?a^e^d:60>r?a&e|a&d|e&d:a^e^d}function sha1_kt(r){return 20>r?1518500249:40>r?1859775393:60>r?-1894007588:-899497514}function safe_add(r,a){var e=(65535&r)+(65535&a),d=(r>>16)+(a>>16)+(e>>16);return d<<16|65535&e}function rol(r,a){return r<<a|r>>>32-a}var helpers=require("./helpers");module.exports=function(r){return helpers.hash(r,core_sha1,20,!0)};
},{"./helpers":98}],103:[function(require,module,exports){
var helpers=require("./helpers"),safe_add=function(a,e){var r=(65535&a)+(65535&e),d=(a>>16)+(e>>16)+(r>>16);return d<<16|65535&r},S=function(a,e){return a>>>e|a<<32-e},R=function(a,e){return a>>>e},Ch=function(a,e,r){return a&e^~a&r},Maj=function(a,e,r){return a&e^a&r^e&r},Sigma0256=function(a){return S(a,2)^S(a,13)^S(a,22)},Sigma1256=function(a){return S(a,6)^S(a,11)^S(a,25)},Gamma0256=function(a){return S(a,7)^S(a,18)^R(a,3)},Gamma1256=function(a){return S(a,17)^S(a,19)^R(a,10)},core_sha256=function(a,e){var r,d,n,f,s,t,u,_,o,i,S,c,m=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),h=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),g=new Array(64);a[e>>5]|=128<<24-e%32,a[(e+64>>9<<4)+15]=e;for(var o=0;o<a.length;o+=16){r=h[0],d=h[1],n=h[2],f=h[3],s=h[4],t=h[5],u=h[6],_=h[7];for(var i=0;64>i;i++)g[i]=16>i?a[i+o]:safe_add(safe_add(safe_add(Gamma1256(g[i-2]),g[i-7]),Gamma0256(g[i-15])),g[i-16]),S=safe_add(safe_add(safe_add(safe_add(_,Sigma1256(s)),Ch(s,t,u)),m[i]),g[i]),c=safe_add(Sigma0256(r),Maj(r,d,n)),_=u,u=t,t=s,s=safe_add(f,S),f=n,n=d,d=r,r=safe_add(S,c);h[0]=safe_add(r,h[0]),h[1]=safe_add(d,h[1]),h[2]=safe_add(n,h[2]),h[3]=safe_add(f,h[3]),h[4]=safe_add(s,h[4]),h[5]=safe_add(t,h[5]),h[6]=safe_add(u,h[6]),h[7]=safe_add(_,h[7])}return h};module.exports=function(a){return helpers.hash(a,core_sha256,32,!0)};
},{"./helpers":98}],104:[function(require,module,exports){
function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,s,i,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length))throw t=arguments[1],t instanceof Error?t:TypeError('Uncaught, unspecified "error" event.');if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];n.apply(this,i)}else if(isObject(n)){for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];for(o=n.slice(),s=o.length,r=0;s>r;r++)o[r].apply(this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned){var n;n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),s||(s=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var s=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,s,i,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,s=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(r=i;r-->0;)if(n[r]===t||n[r].listener&&n[r].listener===t){s=r;break}if(0>s)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?isFunction(e._events[t])?1:e._events[t].length:0};
},{}],105:[function(require,module,exports){
module.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};
},{}],106:[function(require,module,exports){
exports.endianness=function(){return"LE"},exports.hostname=function(){return"undefined"!=typeof location?location.hostname:""},exports.loadavg=function(){return[]},exports.uptime=function(){return 0},exports.freemem=function(){return Number.MAX_VALUE},exports.totalmem=function(){return Number.MAX_VALUE},exports.cpus=function(){return[]},exports.type=function(){return"Browser"},exports.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},exports.networkInterfaces=exports.getNetworkInterfaces=function(){return{}},exports.arch=function(){return"javascript"},exports.platform=function(){return"browser"},exports.tmpdir=exports.tmpDir=function(){return"/tmp"},exports.EOL="\n";
},{}],107:[function(require,module,exports){
(function (process){
function normalizeArray(r,t){for(var e=0,n=r.length-1;n>=0;n--){var s=r[n];"."===s?r.splice(n,1):".."===s?(r.splice(n,1),e++):e&&(r.splice(n,1),e--)}if(t)for(;e--;e)r.unshift("..");return r}function filter(r,t){if(r.filter)return r.filter(t);for(var e=[],n=0;n<r.length;n++)t(r[n],n,r)&&e.push(r[n]);return e}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,splitPath=function(r){return splitPathRe.exec(r).slice(1)};exports.resolve=function(){for(var r="",t=!1,e=arguments.length-1;e>=-1&&!t;e--){var n=e>=0?arguments[e]:process.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(r=n+"/"+r,t="/"===n.charAt(0))}return r=normalizeArray(filter(r.split("/"),function(r){return!!r}),!t).join("/"),(t?"/":"")+r||"."},exports.normalize=function(r){var t=exports.isAbsolute(r),e="/"===substr(r,-1);return r=normalizeArray(filter(r.split("/"),function(r){return!!r}),!t).join("/"),r||t||(r="."),r&&e&&(r+="/"),(t?"/":"")+r},exports.isAbsolute=function(r){return"/"===r.charAt(0)},exports.join=function(){var r=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(r,function(r){if("string"!=typeof r)throw new TypeError("Arguments to path.join must be strings");return r}).join("/"))},exports.relative=function(r,t){function e(r){for(var t=0;t<r.length&&""===r[t];t++);for(var e=r.length-1;e>=0&&""===r[e];e--);return t>e?[]:r.slice(t,e-t+1)}r=exports.resolve(r).substr(1),t=exports.resolve(t).substr(1);for(var n=e(r.split("/")),s=e(t.split("/")),i=Math.min(n.length,s.length),o=i,u=0;i>u;u++)if(n[u]!==s[u]){o=u;break}for(var l=[],u=o;u<n.length;u++)l.push("..");return l=l.concat(s.slice(o)),l.join("/")},exports.sep="/",exports.delimiter=":",exports.dirname=function(r){var t=splitPath(r),e=t[0],n=t[1];return e||n?(n&&(n=n.substr(0,n.length-1)),e+n):"."},exports.basename=function(r,t){var e=splitPath(r)[2];return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e},exports.extname=function(r){return splitPath(r)[3]};var substr="b"==="ab".substr(-1)?function(r,t,e){return r.substr(t,e)}:function(r,t,e){return 0>t&&(t=r.length+t),r.substr(t,e)};
}).call(this,require("FWaASH"))
},{"FWaASH":108}],108:[function(require,module,exports){
function noop(){}var process=module.exports={};process.nextTick=function(){var o="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(o)return function(o){return window.setImmediate(o)};if(e){var s=[];return window.addEventListener("message",function(o){var e=o.source;if((e===window||null===e)&&"process-tick"===o.data&&(o.stopPropagation(),s.length>0)){var n=s.shift();n()}},!0),function(o){s.push(o),window.postMessage("process-tick","*")}}return function(o){setTimeout(o,0)}}(),process.title="browser",process.browser=!0,process.env={},process.argv=[],process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(){throw new Error("process.chdir is not supported")};
},{}],109:[function(require,module,exports){
module.exports=require("./lib/_stream_duplex.js");
},{"./lib/_stream_duplex.js":110}],110:[function(require,module,exports){
(function (process){
function Duplex(e){return this instanceof Duplex?(Readable.call(this,e),Writable.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",onend)):new Duplex(e)}function onend(){this.allowHalfOpen||this._writableState.ended||process.nextTick(this.end.bind(this))}function forEach(e,t){for(var i=0,r=e.length;r>i;i++)t(e[i],i)}module.exports=Duplex;var objectKeys=Object.keys||function(e){var t=[];for(var i in e)t.push(i);return t},util=require("core-util-is");util.inherits=require("inherits");var Readable=require("./_stream_readable"),Writable=require("./_stream_writable");util.inherits(Duplex,Readable),forEach(objectKeys(Writable.prototype),function(e){Duplex.prototype[e]||(Duplex.prototype[e]=Writable.prototype[e])});
}).call(this,require("FWaASH"))
},{"./_stream_readable":112,"./_stream_writable":114,"FWaASH":108,"core-util-is":115,"inherits":105}],111:[function(require,module,exports){
function PassThrough(r){return this instanceof PassThrough?void Transform.call(this,r):new PassThrough(r)}module.exports=PassThrough;var Transform=require("./_stream_transform"),util=require("core-util-is");util.inherits=require("inherits"),util.inherits(PassThrough,Transform),PassThrough.prototype._transform=function(r,s,i){i(null,r)};
},{"./_stream_transform":113,"core-util-is":115,"inherits":105}],112:[function(require,module,exports){
(function (process){
function ReadableState(e){e=e||{};var t=e.highWaterMark;this.highWaterMark=t||0===t?t:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder),this.decoder=new StringDecoder(e.encoding),this.encoding=e.encoding)}function Readable(e){return this instanceof Readable?(this._readableState=new ReadableState(e,this),this.readable=!0,void Stream.call(this)):new Readable(e)}function readableAddChunk(e,t,n,r,i){var a=chunkInvalid(t,n);if(a)e.emit("error",a);else if(null===n||void 0===n)t.reading=!1,t.ended||onEofChunk(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var d=new Error("stream.push() after EOF");e.emit("error",d)}else if(t.endEmitted&&i){var d=new Error("stream.unshift() after end event");e.emit("error",d)}else!t.decoder||i||r||(n=t.decoder.write(n)),t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):(t.reading=!1,t.buffer.push(n)),t.needReadable&&emitReadable(e),maybeReadMore(e,t);else i||(t.reading=!1);return needMoreData(t)}function needMoreData(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function roundUpToNextPowerOf2(e){if(e>=MAX_HWM)e=MAX_HWM;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function howMuchToRead(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||null===e?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=roundUpToNextPowerOf2(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function chunkInvalid(e,t){var n=null;return Buffer.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||n||(n=new TypeError("Invalid non-string/buffer chunk")),n}function onEofChunk(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.length>0?emitReadable(e):endReadable(e)}function emitReadable(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?process.nextTick(function(){emitReadable_(e)}):emitReadable_(e))}function emitReadable_(e){e.emit("readable")}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(function(){maybeReadMore_(e,t)}))}function maybeReadMore_(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function pipeOnDrain(e){return function(){var t=e._readableState;t.awaitDrain--,0===t.awaitDrain&&flow(e)}}function flow(e){function t(e){var t=e.write(n);!1===t&&r.awaitDrain++}var n,r=e._readableState;for(r.awaitDrain=0;r.pipesCount&&null!==(n=e.read());)if(1===r.pipesCount?t(r.pipes,0,null):forEach(r.pipes,t),e.emit("data",n),r.awaitDrain>0)return;return 0===r.pipesCount?(r.flowing=!1,void(EE.listenerCount(e,"data")>0&&emitDataEvents(e))):void(r.ranOut=!0)}function pipeOnReadable(){this._readableState.ranOut&&(this._readableState.ranOut=!1,flow(this))}function emitDataEvents(e,t){var n=e._readableState;if(n.flowing)throw new Error("Cannot switch to old mode now.");var r=t||!1,i=!1;e.readable=!0,e.pipe=Stream.prototype.pipe,e.on=e.addListener=Stream.prototype.on,e.on("readable",function(){i=!0;for(var t;!r&&null!==(t=e.read());)e.emit("data",t);null===t&&(i=!1,e._readableState.needReadable=!0)}),e.pause=function(){r=!0,this.emit("pause")},e.resume=function(){r=!1,i?process.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}function fromList(e,t){var n,r=t.buffer,i=t.length,a=!!t.decoder,d=!!t.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(d)n=r.shift();else if(!e||e>=i)n=a?r.join(""):Buffer.concat(r,i),r.length=0;else if(e<r[0].length){var o=r[0];n=o.slice(0,e),r[0]=o.slice(e)}else if(e===r[0].length)n=r.shift();else{n=a?"":new Buffer(e);for(var l=0,s=0,u=r.length;u>s&&e>l;s++){var o=r[0],h=Math.min(e-l,o.length);a?n+=o.slice(0,h):o.copy(n,l,0,h),h<o.length?r[0]=o.slice(h):r.shift(),l+=h}}return n}function endReadable(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,process.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function forEach(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}function indexOf(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}module.exports=Readable;var isArray=require("isarray"),Buffer=require("buffer").Buffer;Readable.ReadableState=ReadableState;var EE=require("events").EventEmitter;EE.listenerCount||(EE.listenerCount=function(e,t){return e.listeners(t).length});var Stream=require("stream"),util=require("core-util-is");util.inherits=require("inherits");var StringDecoder;util.inherits(Readable,Stream),Readable.prototype.push=function(e,t){var n=this._readableState;return"string"!=typeof e||n.objectMode||(t=t||n.defaultEncoding,t!==n.encoding&&(e=new Buffer(e,t),t="")),readableAddChunk(this,n,e,t,!1)},Readable.prototype.unshift=function(e){var t=this._readableState;return readableAddChunk(this,t,e,"",!0)},Readable.prototype.setEncoding=function(e){StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder),this._readableState.decoder=new StringDecoder(e),this._readableState.encoding=e};var MAX_HWM=8388608;Readable.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return emitReadable(this),null;if(e=howMuchToRead(e,t),0===e&&t.ended)return 0===t.length&&endReadable(this),null;var r=t.needReadable;t.length-e<=t.highWaterMark&&(r=!0),(t.ended||t.reading)&&(r=!1),r&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),r&&!t.reading&&(e=howMuchToRead(n,t));var i;return i=e>0?fromList(e,t):null,null===i&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&endReadable(this),i},Readable.prototype._read=function(){this.emit("error",new Error("not implemented"))},Readable.prototype.pipe=function(e,t){function n(e){e===s&&i()}function r(){e.end()}function i(){e.removeListener("close",d),e.removeListener("finish",o),e.removeListener("drain",p),e.removeListener("error",a),e.removeListener("unpipe",n),s.removeListener("end",r),s.removeListener("end",i),(!e._writableState||e._writableState.needDrain)&&p()}function a(t){l(),e.removeListener("error",a),0===EE.listenerCount(e,"error")&&e.emit("error",t)}function d(){e.removeListener("finish",o),l()}function o(){e.removeListener("close",d),l()}function l(){s.unpipe(e)}var s=this,u=this._readableState;switch(u.pipesCount){case 0:u.pipes=e;break;case 1:u.pipes=[u.pipes,e];break;default:u.pipes.push(e)}u.pipesCount+=1;var h=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,f=h?r:i;u.endEmitted?process.nextTick(f):s.once("end",f),e.on("unpipe",n);var p=pipeOnDrain(s);return e.on("drain",p),e._events&&e._events.error?isArray(e._events.error)?e._events.error.unshift(a):e._events.error=[a,e._events.error]:e.on("error",a),e.once("close",d),e.once("finish",o),e.emit("pipe",s),u.flowing||(this.on("readable",pipeOnReadable),u.flowing=!0,process.nextTick(function(){flow(s)})),e},Readable.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",pipeOnReadable),t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",pipeOnReadable),t.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var i=indexOf(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},Readable.prototype.on=function(e,t){var n=Stream.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||emitDataEvents(this),"readable"===e&&this.readable){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&emitReadable(this,r):this.read(0))}return n},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){emitDataEvents(this),this.read(0),this.emit("resume")},Readable.prototype.pause=function(){emitDataEvents(this,!0),this.emit("pause")},Readable.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(t.decoder&&(i=t.decoder.write(i)),i&&(t.objectMode||i.length)){var a=r.push(i);a||(n=!0,e.pause())}});for(var i in e)"function"==typeof e[i]&&"undefined"==typeof this[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var a=["error","close","destroy","pause","resume"];return forEach(a,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(){n&&(n=!1,e.resume())},r},Readable._fromList=fromList;
}).call(this,require("FWaASH"))
},{"FWaASH":108,"buffer":95,"core-util-is":115,"events":104,"inherits":105,"isarray":116,"stream":122,"string_decoder/":117}],113:[function(require,module,exports){
function TransformState(r,t){this.afterTransform=function(r,e){return afterTransform(t,r,e)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function afterTransform(r,t,e){var n=r._transformState;n.transforming=!1;var a=n.writecb;if(!a)return r.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==e&&void 0!==e&&r.push(e),a&&a(t);var i=r._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&r._read(i.highWaterMark)}function Transform(r){if(!(this instanceof Transform))return new Transform(r);Duplex.call(this,r);var t=(this._transformState=new TransformState(r,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(r){done(t,r)}):done(t)})}function done(r,t){if(t)return r.emit("error",t);var e=r._writableState,n=(r._readableState,r._transformState);if(e.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return r.push(null)}module.exports=Transform;var Duplex=require("./_stream_duplex"),util=require("core-util-is");util.inherits=require("inherits"),util.inherits(Transform,Duplex),Transform.prototype.push=function(r,t){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,r,t)},Transform.prototype._transform=function(){throw new Error("not implemented")},Transform.prototype._write=function(r,t,e){var n=this._transformState;if(n.writecb=e,n.writechunk=r,n.writeencoding=t,!n.transforming){var a=this._readableState;(n.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},Transform.prototype._read=function(){var r=this._transformState;null!==r.writechunk&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0};
},{"./_stream_duplex":110,"core-util-is":115,"inherits":105}],114:[function(require,module,exports){
(function (process){
function WriteReq(e,t,i){this.chunk=e,this.encoding=t,this.callback=i}function WritableState(e,t){e=e||{};var i=e.highWaterMark;this.highWaterMark=i||0===i?i:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=e.decodeStrings===!1;this.decodeStrings=!r,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function Writable(e){var t=require("./_stream_duplex");return this instanceof Writable||this instanceof t?(this._writableState=new WritableState(e,this),this.writable=!0,void Stream.call(this)):new Writable(e)}function writeAfterEnd(e,t,i){var r=new Error("write after end");e.emit("error",r),process.nextTick(function(){i(r)})}function validChunk(e,t,i,r){var n=!0;if(!Buffer.isBuffer(i)&&"string"!=typeof i&&null!==i&&void 0!==i&&!t.objectMode){var f=new TypeError("Invalid non-string/buffer chunk");e.emit("error",f),process.nextTick(function(){r(f)}),n=!1}return n}function decodeChunk(e,t,i){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new Buffer(t,i)),t}function writeOrBuffer(e,t,i,r,n){i=decodeChunk(t,i,r),Buffer.isBuffer(i)&&(r="buffer");var f=t.objectMode?1:i.length;t.length+=f;var o=t.length<t.highWaterMark;return o||(t.needDrain=!0),t.writing?t.buffer.push(new WriteReq(i,r,n)):doWrite(e,t,f,i,r,n),o}function doWrite(e,t,i,r,n,f){t.writelen=i,t.writecb=f,t.writing=!0,t.sync=!0,e._write(r,n,t.onwrite),t.sync=!1}function onwriteError(e,t,i,r,n){i?process.nextTick(function(){n(r)}):n(r),e._writableState.errorEmitted=!0,e.emit("error",r)}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var i=e._writableState,r=i.sync,n=i.writecb;if(onwriteStateUpdate(i),t)onwriteError(e,i,r,t,n);else{var f=needFinish(e,i);f||i.bufferProcessing||!i.buffer.length||clearBuffer(e,i),r?process.nextTick(function(){afterWrite(e,i,f,n)}):afterWrite(e,i,f,n)}}function afterWrite(e,t,i,r){i||onwriteDrain(e,t),r(),i&&finishMaybe(e,t)}function onwriteDrain(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer(e,t){t.bufferProcessing=!0;for(var i=0;i<t.buffer.length;i++){var r=t.buffer[i],n=r.chunk,f=r.encoding,o=r.callback,a=t.objectMode?1:n.length;if(doWrite(e,t,a,n,f,o),t.writing){i++;break}}t.bufferProcessing=!1,i<t.buffer.length?t.buffer=t.buffer.slice(i):t.buffer.length=0}function needFinish(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function finishMaybe(e,t){var i=needFinish(e,t);return i&&(t.finished=!0,e.emit("finish")),i}function endWritable(e,t,i){t.ending=!0,finishMaybe(e,t),i&&(t.finished?process.nextTick(i):e.once("finish",i)),t.ended=!0}module.exports=Writable;var Buffer=require("buffer").Buffer;Writable.WritableState=WritableState;var util=require("core-util-is");util.inherits=require("inherits");var Stream=require("stream");util.inherits(Writable,Stream),Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},Writable.prototype.write=function(e,t,i){var r=this._writableState,n=!1;return"function"==typeof t&&(i=t,t=null),Buffer.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof i&&(i=function(){}),r.ended?writeAfterEnd(this,r,i):validChunk(this,r,e,i)&&(n=writeOrBuffer(this,r,e,t,i)),n},Writable.prototype._write=function(e,t,i){i(new Error("not implemented"))},Writable.prototype.end=function(e,t,i){var r=this._writableState;"function"==typeof e?(i=e,e=null,t=null):"function"==typeof t&&(i=t,t=null),"undefined"!=typeof e&&null!==e&&this.write(e,t),r.ending||r.finished||endWritable(this,r,i)};
}).call(this,require("FWaASH"))
},{"./_stream_duplex":110,"FWaASH":108,"buffer":95,"core-util-is":115,"inherits":105,"stream":122}],115:[function(require,module,exports){
(function (Buffer){
function isArray(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isSymbol(e){return"symbol"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"==typeof e&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function isBuffer(e){return Buffer.isBuffer(e)}function objectToString(e){return Object.prototype.toString.call(e)}exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=isBuffer;
}).call(this,require("buffer").Buffer)
},{"buffer":95}],116:[function(require,module,exports){
module.exports=Array.isArray||function(r){return"[object Array]"==Object.prototype.toString.call(r)};
},{}],117:[function(require,module,exports){
function assertEncoding(e){if(e&&!isBufferEncoding(e))throw new Error("Unknown encoding: "+e)}function passThroughWrite(e){return e.toString(this.encoding)}function utf16DetectIncompleteChar(e){var t=this.charReceived=e.length%2;return this.charLength=t?2:0,t}function base64DetectIncompleteChar(e){var t=this.charReceived=e.length%3;return this.charLength=t?3:0,t}var Buffer=require("buffer").Buffer,isBufferEncoding=Buffer.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},StringDecoder=exports.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),assertEncoding(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:return void(this.write=passThroughWrite)}this.charBuffer=new Buffer(6),this.charReceived=0,this.charLength=0};StringDecoder.prototype.write=function(e){for(var t="",r=0;this.charLength;){var h=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,r,h),this.charReceived+=h-r,r=h,this.charReceived<this.charLength)return"";t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=t.charCodeAt(t.length-1);if(!(i>=55296&&56319>=i)){if(this.charReceived=this.charLength=0,h==e.length)return t;e=e.slice(h,e.length);break}this.charLength+=this.surrogateSize,t=""}var c=this.detectIncompleteChar(e),n=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-c,n),this.charReceived=c,n-=c),t+=e.toString(this.encoding,0,n);var n=t.length-1,i=t.charCodeAt(n);if(i>=55296&&56319>=i){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),this.charBuffer.write(t.charAt(t.length-1),this.encoding),t.substring(0,n)}return t},StringDecoder.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(2>=t&&r>>4==14){this.charLength=3;break}if(3>=t&&r>>3==30){this.charLength=4;break}}return t},StringDecoder.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,h=this.charBuffer,i=this.encoding;t+=h.slice(0,r).toString(i)}return t};
},{"buffer":95}],118:[function(require,module,exports){
module.exports=require("./lib/_stream_passthrough.js");
},{"./lib/_stream_passthrough.js":111}],119:[function(require,module,exports){
exports=module.exports=require("./lib/_stream_readable.js"),exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js");
},{"./lib/_stream_duplex.js":110,"./lib/_stream_passthrough.js":111,"./lib/_stream_readable.js":112,"./lib/_stream_transform.js":113,"./lib/_stream_writable.js":114}],120:[function(require,module,exports){
module.exports=require("./lib/_stream_transform.js");
},{"./lib/_stream_transform.js":113}],121:[function(require,module,exports){
module.exports=require("./lib/_stream_writable.js");
},{"./lib/_stream_writable.js":114}],122:[function(require,module,exports){
function Stream(){EE.call(this)}module.exports=Stream;var EE=require("events").EventEmitter,inherits=require("inherits");inherits(Stream,EE),Stream.Readable=require("readable-stream/readable.js"),Stream.Writable=require("readable-stream/writable.js"),Stream.Duplex=require("readable-stream/duplex.js"),Stream.Transform=require("readable-stream/transform.js"),Stream.PassThrough=require("readable-stream/passthrough.js"),Stream.Stream=Stream,Stream.prototype.pipe=function(e,r){function t(r){e.writable&&!1===e.write(r)&&m.pause&&m.pause()}function n(){m.readable&&m.resume&&m.resume()}function a(){u||(u=!0,e.end())}function o(){u||(u=!0,"function"==typeof e.destroy&&e.destroy())}function i(e){if(s(),0===EE.listenerCount(this,"error"))throw e}function s(){m.removeListener("data",t),e.removeListener("drain",n),m.removeListener("end",a),m.removeListener("close",o),m.removeListener("error",i),e.removeListener("error",i),m.removeListener("end",s),m.removeListener("close",s),e.removeListener("close",s)}var m=this;m.on("data",t),e.on("drain",n),e._isStdio||r&&r.end===!1||(m.on("end",a),m.on("close",o));var u=!1;return m.on("error",i),e.on("error",i),m.on("end",s),m.on("close",s),e.on("close",s),e.emit("pipe",m),e};
},{"events":104,"inherits":105,"readable-stream/duplex.js":109,"readable-stream/passthrough.js":118,"readable-stream/readable.js":119,"readable-stream/transform.js":120,"readable-stream/writable.js":121}],123:[function(require,module,exports){
module.exports=require(93)
},{}],124:[function(require,module,exports){
module.exports=require(94)
},{"./support/isBuffer":123,"FWaASH":108,"inherits":105}],125:[function(require,module,exports){
(function (global){
!function(e){"use strict";function n(e,n){e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function t(e,n){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),n&&n.length&&Object.defineProperty(this,"path",{value:n,enumerable:!0})}function i(e,n,t){i.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:n,enumerable:!0}),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function a(e,n){a.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function r(e,n){r.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:n,enumerable:!0})}function f(e,n,t){f.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:n,enumerable:!0}),Object.defineProperty(this,"item",{value:t,enumerable:!0})}function l(e,n,t){var i=e.slice((t||n)+1||e.length);return e.length=0>n?e.length+n:n,e.push.apply(e,i),e}function u(n,t,o,c,s,p,h){s=s||[];var b=s.slice(0);if(p){if(c&&c(b,p))return;b.push(p)}var d=typeof n,y=typeof t;if("undefined"===d)"undefined"!==y&&o(new a(b,t));else if("undefined"===y)o(new r(b,n));else if(d!==y)o(new i(b,n,t));else if(n instanceof Date&&t instanceof Date&&n-t!=0)o(new i(b,n,t));else if("object"===d&&null!=n&&null!=t){if(h=h||[],h.indexOf(n)<0){if(h.push(n),Array.isArray(n)){var m,v=(n.length,function(e){o(new f(b,m,e))});for(m=0;m<n.length;m++)m>=t.length?o(new f(b,m,new r(e,n[m]))):u(n[m],t[m],v,c,[],null,h);for(;m<t.length;)o(new f(b,m,new a(e,t[m++])))}else{var g=Object.keys(n),w=Object.keys(t);g.forEach(function(i){var a=w.indexOf(i);a>=0?(u(n[i],t[i],o,c,b,i,h),w=l(w,a)):u(n[i],e,o,c,b,i,h)}),w.forEach(function(n){u(e,t[n],o,c,b,n,h)})}h.length=h.length-1}}else n!==t&&("number"===d&&isNaN(n)&&isNaN(t)||o(new i(b,n,t)))}function o(n,t,i,a){return a=a||[],u(n,t,function(e){e&&a.push(e)},i),a.length?a:e}function c(e,n,t){if(t.path&&t.path.length){var i,a=e[n],r=t.path.length-1;for(i=0;r>i;i++)a=a[t.path[i]];switch(t.kind){case"A":c(a[t.path[i]],t.index,t.item);break;case"D":delete a[t.path[i]];break;case"E":case"N":a[t.path[i]]=t.rhs}}else switch(t.kind){case"A":c(e[n],t.index,t.item);break;case"D":e=l(e,n);break;case"E":case"N":e[n]=t.rhs}return e}function s(e,n,i){if(!(i instanceof t))throw new TypeError("[Object] change must be instanceof Diff");if(e&&n&&i){var a,r,f=e;for(r=i.path.length-1,a=0;r>a;a++)"undefined"==typeof f[i.path[a]]&&(f[i.path[a]]={}),f=f[i.path[a]];switch(i.kind){case"A":c(f[i.path[a]],i.index,i.item);break;case"D":delete f[i.path[a]];break;case"E":case"N":f[i.path[a]]=i.rhs}}}function p(e,n,t){if(e&&n){var i=function(i){(!t||t(e,n,i))&&s(e,n,i)};u(e,n,i)}}var h,b,d=[];h="object"==typeof global&&global?global:"undefined"!=typeof window?window:{},b=h.DeepDiff,b&&d.push(function(){"undefined"!=typeof b&&h.DeepDiff===o&&(h.DeepDiff=b,b=e)}),n(i,t),n(a,t),n(r,t),n(f,t),Object.defineProperties(o,{diff:{value:o,enumerable:!0},observableDiff:{value:u,enumerable:!0},applyDiff:{value:p,enumerable:!0},applyChange:{value:s,enumerable:!0},isConflict:{get:function(){return"undefined"!=typeof b},enumerable:!0},noConflict:{value:function(){return d&&(d.forEach(function(e){e()}),d=null),o},enumerable:!0}}),"undefined"!=typeof module&&module&&"object"==typeof exports&&exports&&module.exports===exports?module.exports=o:h.DeepDiff=o}();
}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],126:[function(require,module,exports){
(function (global){
(function(){function n(n,t,r){for(var e=(r||0)-1,u=n?n.length:0;++e<u;)if(n[e]===t)return e;return-1}function t(t,r){var e=typeof r;if(t=t.cache,"boolean"==e||null==r)return t[r]?0:-1;"number"!=e&&"string"!=e&&(e="object");var u="number"==e?r:m+r;return t=(t=t[e])&&t[u],"object"==e?t&&n(t,r)>-1?0:-1:t?0:-1}function r(n){var t=this.cache,r=typeof n;if("boolean"==r||null==n)t[n]=!0;else{"number"!=r&&"string"!=r&&(r="object");var e="number"==r?n:m+n,u=t[r]||(t[r]={});"object"==r?(u[e]||(u[e]=[])).push(n):u[e]=!0}}function e(n){return n.charCodeAt(0)}function u(n,t){for(var r=n.criteria,e=t.criteria,u=-1,o=r.length;++u<o;){var a=r[u],i=e[u];if(a!==i){if(a>i||"undefined"==typeof a)return 1;if(i>a||"undefined"==typeof i)return-1}}return n.index-t.index}function o(n){var t=-1,e=n.length,u=n[0],o=n[e/2|0],a=n[e-1];if(u&&"object"==typeof u&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;var i=f();i["false"]=i["null"]=i["true"]=i.undefined=!1;var l=f();for(l.array=n,l.cache=i,l.push=r;++t<e;)l.push(n[t]);return l}function a(n){return"\\"+G[n]}function i(){return h.pop()||[]}function f(){return g.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function l(n){n.length=0,h.length<d&&h.push(n)}function c(n){var t=n.cache;t&&c(t),n.array=n.cache=n.criteria=n.object=n.number=n.string=n.value=null,g.length<d&&g.push(n)}function p(n,t,r){t||(t=0),"undefined"==typeof r&&(r=n?n.length:0);for(var e=-1,u=r-t||0,o=Array(0>u?0:u);++e<u;)o[e]=n[t+e];return o}function s(r){function h(n){return n&&"object"==typeof n&&!Xe(n)&&De.call(n,"__wrapped__")?n:new g(n)}function g(n,t){this.__chain__=!!t,this.__wrapped__=n}function d(n){function t(){if(e){var n=p(e);Te.apply(n,arguments)}if(this instanceof t){var o=J(r.prototype),a=r.apply(o,n||arguments);return It(a)?a:o}return r.apply(u,n||arguments)}var r=n[0],e=n[2],u=n[4];return Qe(t,n),t}function G(n,t,r,e,u){if(r){var o=r(n);if("undefined"!=typeof o)return o}var a=It(n);if(!a)return n;var f=Oe.call(n);if(!K[f])return n;var c=He[f];switch(f){case F:case B:return new c(+n);case q:case P:return new c(n);case L:return o=c(n.source,C.exec(n)),o.lastIndex=n.lastIndex,o}var s=Xe(n);if(t){var v=!e;e||(e=i()),u||(u=i());for(var h=e.length;h--;)if(e[h]==n)return u[h];o=s?c(n.length):{}}else o=s?p(n):uu({},n);return s&&(De.call(n,"index")&&(o.index=n.index),De.call(n,"input")&&(o.input=n.input)),t?(e.push(n),u.push(o),(s?Qt:iu)(n,function(n,a){o[a]=G(n,t,r,e,u)}),v&&(l(e),l(u)),o):o}function J(n){return It(n)?qe(n):{}}function Q(n,t,r){if("function"!=typeof n)return Xr;if("undefined"==typeof t||!("prototype"in n))return n;var e=n.__bindData__;if("undefined"==typeof e&&(Je.funcNames&&(e=!n.name),e=e||!Je.funcDecomp,!e)){var u=Se.call(n);Je.funcNames||(e=!O.test(u)),e||(e=I.test(u),Qe(n,e))}if(e===!1||e!==!0&&1&e[1])return n;switch(r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,o){return n.call(t,r,e,u,o)}}return Tr(n,t)}function X(n){function t(){var n=f?a:this;if(u){var h=p(u);Te.apply(h,arguments)}if((o||c)&&(h||(h=p(arguments)),o&&Te.apply(h,o),c&&h.length<i))return e|=16,X([r,s?e:-4&e,h,null,a,i]);if(h||(h=arguments),l&&(r=n[v]),this instanceof t){n=J(r.prototype);var g=r.apply(n,h);return It(g)?g:n}return r.apply(n,h)}var r=n[0],e=n[1],u=n[2],o=n[3],a=n[4],i=n[5],f=1&e,l=2&e,c=4&e,s=8&e,v=r;return Qe(t,n),t}function Y(r,e){var u=-1,a=ft(),i=r?r.length:0,f=i>=b&&a===n,l=[];if(f){var p=o(e);p?(a=t,e=p):f=!1}for(;++u<i;){var s=r[u];a(e,s)<0&&l.push(s)}return f&&c(e),l}function nt(n,t,r,e){for(var u=(e||0)-1,o=n?n.length:0,a=[];++u<o;){var i=n[u];if(i&&"object"==typeof i&&"number"==typeof i.length&&(Xe(i)||st(i))){t||(i=nt(i,t,r));var f=-1,l=i.length,c=a.length;for(a.length+=l;++f<l;)a[c++]=i[f]}else r||a.push(i)}return a}function tt(n,t,r,e,u,o){if(r){var a=r(n,t);if("undefined"!=typeof a)return!!a}if(n===t)return 0!==n||1/n==1/t;var f=typeof n,c=typeof t;if(!(n!==n||n&&V[f]||t&&V[c]))return!1;if(null==n||null==t)return n===t;var p=Oe.call(n),s=Oe.call(t);if(p==T&&(p=z),s==T&&(s=z),p!=s)return!1;switch(p){case F:case B:return+n==+t;case q:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case L:case P:return n==we(t)}var v=p==$;if(!v){var h=De.call(n,"__wrapped__"),g=De.call(t,"__wrapped__");if(h||g)return tt(h?n.__wrapped__:n,g?t.__wrapped__:t,r,e,u,o);if(p!=z)return!1;var y=n.constructor,m=t.constructor;if(y!=m&&!(Et(y)&&y instanceof y&&Et(m)&&m instanceof m)&&"constructor"in n&&"constructor"in t)return!1}var b=!u;u||(u=i()),o||(o=i());for(var d=u.length;d--;)if(u[d]==n)return o[d]==t;var _=0;if(a=!0,u.push(n),o.push(t),v){if(d=n.length,_=t.length,a=_==d,a||e)for(;_--;){var w=d,j=t[_];if(e)for(;w--&&!(a=tt(n[w],j,r,e,u,o)););else if(!(a=tt(n[_],j,r,e,u,o)))break}}else au(t,function(t,i,f){return De.call(f,i)?(_++,a=De.call(n,i)&&tt(n[i],t,r,e,u,o)):void 0}),a&&!e&&au(n,function(n,t,r){return De.call(r,t)?a=--_>-1:void 0});return u.pop(),o.pop(),b&&(l(u),l(o)),a}function rt(n,t,r,e,u){(Xe(t)?Qt:iu)(t,function(t,o){var a,i,f=t,l=n[o];if(t&&((i=Xe(t))||fu(t))){for(var c=e.length;c--;)if(a=e[c]==t){l=u[c];break}if(!a){var p;r&&(f=r(l,t),(p="undefined"!=typeof f)&&(l=f)),p||(l=i?Xe(l)?l:[]:fu(l)?l:{}),e.push(t),u.push(l),p||rt(l,t,r,e,u)}}else r&&(f=r(l,t),"undefined"==typeof f&&(f=t)),"undefined"!=typeof f&&(l=f);n[o]=l})}function et(n,t){return n+Ie(Ge()*(t-n+1))}function ut(r,e,u){var a=-1,f=ft(),p=r?r.length:0,s=[],v=!e&&p>=b&&f===n,h=u||v?i():s;if(v){var g=o(h);f=t,h=g}for(;++a<p;){var y=r[a],m=u?u(y,a,r):y;(e?!a||h[h.length-1]!==m:f(h,m)<0)&&((u||v)&&h.push(m),s.push(y))}return v?(l(h.array),c(h)):u&&l(h),s}function ot(n){return function(t,r,e){var u={};r=h.createCallback(r,e,3);var o=-1,a=t?t.length:0;if("number"==typeof a)for(;++o<a;){var i=t[o];n(u,i,r(i,o,t),t)}else iu(t,function(t,e,o){n(u,t,r(t,e,o),o)});return u}}function at(n,t,r,e,u,o){var a=1&t,i=2&t,f=4&t,l=16&t,c=32&t;if(!i&&!Et(n))throw new je;l&&!r.length&&(t&=-17,l=r=!1),c&&!e.length&&(t&=-33,c=e=!1);var s=n&&n.__bindData__;if(s&&s!==!0)return s=p(s),s[2]&&(s[2]=p(s[2])),s[3]&&(s[3]=p(s[3])),!a||1&s[1]||(s[4]=u),!a&&1&s[1]&&(t|=8),!f||4&s[1]||(s[5]=o),l&&Te.apply(s[2]||(s[2]=[]),r),c&&Be.apply(s[3]||(s[3]=[]),e),s[1]|=t,at.apply(null,s);var v=1==t||17===t?d:X;return v([n,t,r,e,u,o])}function it(n){return nu[n]}function ft(){var t=(t=h.indexOf)===mr?n:t;return t}function lt(n){return"function"==typeof n&&Ne.test(n)}function ct(n){var t,r;return n&&Oe.call(n)==z&&(t=n.constructor,!Et(t)||t instanceof t)?(au(n,function(n,t){r=t}),"undefined"==typeof r||De.call(n,r)):!1}function pt(n){return tu[n]}function st(n){return n&&"object"==typeof n&&"number"==typeof n.length&&Oe.call(n)==T||!1}function vt(n,t,r,e){return"boolean"!=typeof t&&null!=t&&(e=r,r=t,t=!1),G(n,t,"function"==typeof r&&Q(r,e,1))}function ht(n,t,r){return G(n,!0,"function"==typeof t&&Q(t,r,1))}function gt(n,t){var r=J(n);return t?uu(r,t):r}function yt(n,t,r){var e;return t=h.createCallback(t,r,3),iu(n,function(n,r,u){return t(n,r,u)?(e=r,!1):void 0}),e}function mt(n,t,r){var e;return t=h.createCallback(t,r,3),dt(n,function(n,r,u){return t(n,r,u)?(e=r,!1):void 0}),e}function bt(n,t,r){var e=[];au(n,function(n,t){e.push(t,n)});var u=e.length;for(t=Q(t,r,3);u--&&t(e[u--],e[u],n)!==!1;);return n}function dt(n,t,r){var e=Ze(n),u=e.length;for(t=Q(t,r,3);u--;){var o=e[u];if(t(n[o],o,n)===!1)break}return n}function _t(n){var t=[];return au(n,function(n,r){Et(n)&&t.push(r)}),t.sort()}function wt(n,t){return n?De.call(n,t):!1}function jt(n){for(var t=-1,r=Ze(n),e=r.length,u={};++t<e;){var o=r[t];u[n[o]]=o}return u}function kt(n){return n===!0||n===!1||n&&"object"==typeof n&&Oe.call(n)==F||!1}function xt(n){return n&&"object"==typeof n&&Oe.call(n)==B||!1}function Ct(n){return n&&1===n.nodeType||!1}function Ot(n){var t=!0;if(!n)return t;var r=Oe.call(n),e=n.length;return r==$||r==P||r==T||r==z&&"number"==typeof e&&Et(n.splice)?!e:(iu(n,function(){return t=!1}),t)}function Nt(n,t,r,e){return tt(n,t,"function"==typeof r&&Q(r,e,2))}function Rt(n){return Le(n)&&!Pe(parseFloat(n))}function Et(n){return"function"==typeof n}function It(n){return!(!n||!V[typeof n])}function St(n){return Dt(n)&&n!=+n}function At(n){return null===n}function Dt(n){return"number"==typeof n||n&&"object"==typeof n&&Oe.call(n)==q||!1}function Tt(n){return n&&"object"==typeof n&&Oe.call(n)==L||!1}function $t(n){return"string"==typeof n||n&&"object"==typeof n&&Oe.call(n)==P||!1}function Ft(n){return"undefined"==typeof n}function Bt(n,t,r){var e={};return t=h.createCallback(t,r,3),iu(n,function(n,r,u){e[r]=t(n,r,u)}),e}function Wt(n){var t=arguments,r=2;if(!It(n))return n;if("number"!=typeof t[2]&&(r=t.length),r>3&&"function"==typeof t[r-2])var e=Q(t[--r-1],t[r--],2);else r>2&&"function"==typeof t[r-1]&&(e=t[--r]);for(var u=p(arguments,1,r),o=-1,a=i(),f=i();++o<r;)rt(n,u[o],e,a,f);return l(a),l(f),n}function qt(n,t,r){var e={};if("function"!=typeof t){var u=[];au(n,function(n,t){u.push(t)}),u=Y(u,nt(arguments,!0,!1,1));for(var o=-1,a=u.length;++o<a;){var i=u[o];e[i]=n[i]}}else t=h.createCallback(t,r,3),au(n,function(n,r,u){t(n,r,u)||(e[r]=n)});return e}function zt(n){for(var t=-1,r=Ze(n),e=r.length,u=ve(e);++t<e;){var o=r[t];u[t]=[o,n[o]]}return u}function Lt(n,t,r){var e={};if("function"!=typeof t)for(var u=-1,o=nt(arguments,!0,!1,1),a=It(n)?o.length:0;++u<a;){var i=o[u];i in n&&(e[i]=n[i])}else t=h.createCallback(t,r,3),au(n,function(n,r,u){t(n,r,u)&&(e[r]=n)});return e}function Pt(n,t,r,e){var u=Xe(n);if(null==r)if(u)r=[];else{var o=n&&n.constructor,a=o&&o.prototype;r=J(a)}return t&&(t=h.createCallback(t,e,4),(u?Qt:iu)(n,function(n,e,u){return t(r,n,e,u)})),r}function Kt(n){for(var t=-1,r=Ze(n),e=r.length,u=ve(e);++t<e;)u[t]=n[r[t]];return u}function Ut(n){for(var t=arguments,r=-1,e=nt(t,!0,!1,1),u=t[2]&&t[2][t[1]]===n?1:e.length,o=ve(u);++r<u;)o[r]=n[e[r]];return o}function Mt(n,t,r){var e=-1,u=ft(),o=n?n.length:0,a=!1;return r=(0>r?Ue(0,o+r):r)||0,Xe(n)?a=u(n,t,r)>-1:"number"==typeof o?a=($t(n)?n.indexOf(t,r):u(n,t,r))>-1:iu(n,function(n){return++e>=r?!(a=n===t):void 0}),a}function Vt(n,t,r){var e=!0;t=h.createCallback(t,r,3);var u=-1,o=n?n.length:0;if("number"==typeof o)for(;++u<o&&(e=!!t(n[u],u,n)););else iu(n,function(n,r,u){return e=!!t(n,r,u)});return e}function Gt(n,t,r){var e=[];t=h.createCallback(t,r,3);var u=-1,o=n?n.length:0;if("number"==typeof o)for(;++u<o;){var a=n[u];t(a,u,n)&&e.push(a)}else iu(n,function(n,r,u){t(n,r,u)&&e.push(n)});return e}function Ht(n,t,r){t=h.createCallback(t,r,3);var e=-1,u=n?n.length:0;if("number"!=typeof u){var o;return iu(n,function(n,r,e){return t(n,r,e)?(o=n,!1):void 0}),o}for(;++e<u;){var a=n[e];if(t(a,e,n))return a}}function Jt(n,t,r){var e;return t=h.createCallback(t,r,3),Xt(n,function(n,r,u){return t(n,r,u)?(e=n,!1):void 0}),e}function Qt(n,t,r){var e=-1,u=n?n.length:0;if(t=t&&"undefined"==typeof r?t:Q(t,r,3),"number"==typeof u)for(;++e<u&&t(n[e],e,n)!==!1;);else iu(n,t);return n}function Xt(n,t,r){var e=n?n.length:0;if(t=t&&"undefined"==typeof r?t:Q(t,r,3),"number"==typeof e)for(;e--&&t(n[e],e,n)!==!1;);else{var u=Ze(n);e=u.length,iu(n,function(n,r,o){return r=u?u[--e]:--e,t(o[r],r,o)})}return n}function Yt(n,t){var r=p(arguments,2),e=-1,u="function"==typeof t,o=n?n.length:0,a=ve("number"==typeof o?o:0);return Qt(n,function(n){a[++e]=(u?t:n[t]).apply(n,r)}),a}function Zt(n,t,r){var e=-1,u=n?n.length:0;if(t=h.createCallback(t,r,3),"number"==typeof u)for(var o=ve(u);++e<u;)o[e]=t(n[e],e,n);else o=[],iu(n,function(n,r,u){o[++e]=t(n,r,u)});return o}function nr(n,t,r){var u=-1/0,o=u;if("function"!=typeof t&&r&&r[t]===n&&(t=null),null==t&&Xe(n))for(var a=-1,i=n.length;++a<i;){var f=n[a];f>o&&(o=f)}else t=null==t&&$t(n)?e:h.createCallback(t,r,3),Qt(n,function(n,r,e){var a=t(n,r,e);a>u&&(u=a,o=n)});return o}function tr(n,t,r){var u=1/0,o=u;if("function"!=typeof t&&r&&r[t]===n&&(t=null),null==t&&Xe(n))for(var a=-1,i=n.length;++a<i;){var f=n[a];o>f&&(o=f)}else t=null==t&&$t(n)?e:h.createCallback(t,r,3),Qt(n,function(n,r,e){var a=t(n,r,e);u>a&&(u=a,o=n)});return o}function rr(n,t,r,e){if(!n)return r;var u=arguments.length<3;t=h.createCallback(t,e,4);var o=-1,a=n.length;if("number"==typeof a)for(u&&(r=n[++o]);++o<a;)r=t(r,n[o],o,n);else iu(n,function(n,e,o){r=u?(u=!1,n):t(r,n,e,o)});return r}function er(n,t,r,e){var u=arguments.length<3;return t=h.createCallback(t,e,4),Xt(n,function(n,e,o){r=u?(u=!1,n):t(r,n,e,o)}),r}function ur(n,t,r){return t=h.createCallback(t,r,3),Gt(n,function(n,r,e){return!t(n,r,e)})}function or(n,t,r,e){if(collection&&"number"!=typeof collection.length&&(collection=Kt(collection)),null==r||e)return collection?collection[et(0,collection.length-1)]:v;var u=ar(collection);return u.length=Me(Ue(0,r),u.length),u}function ar(n){var t=-1,r=n?n.length:0,e=ve("number"==typeof r?r:0);return Qt(n,function(n){var r=et(0,++t);e[t]=e[r],e[r]=n}),e}function ir(n){var t=n?n.length:0;return"number"==typeof t?t:Ze(n).length}function fr(n,t,r){var e;t=h.createCallback(t,r,3);var u=-1,o=n?n.length:0;if("number"==typeof o)for(;++u<o&&!(e=t(n[u],u,n)););else iu(n,function(n,r,u){return!(e=t(n,r,u))});return!!e}function lr(n,t,r){var e=-1,o=Xe(t),a=n?n.length:0,p=ve("number"==typeof a?a:0);for(o||(t=h.createCallback(t,r,3)),Qt(n,function(n,r,u){var a=p[++e]=f();o?a.criteria=Zt(t,function(t){return n[t]}):(a.criteria=i())[0]=t(n,r,u),a.index=e,a.value=n}),a=p.length,p.sort(u);a--;){var s=p[a];p[a]=s.value,o||l(s.criteria),c(s)}return p}function cr(n){return n&&"number"==typeof n.length?p(n):Kt(n)}function pr(n){for(var t=-1,r=n?n.length:0,e=[];++t<r;){var u=n[t];u&&e.push(u)}return e}function sr(n){return Y(n,nt(arguments,!0,!0,1))}function vr(n,t,r){var e=-1,u=n?n.length:0;for(t=h.createCallback(t,r,3);++e<u;)if(t(n[e],e,n))return e;return-1}function hr(n,t,r){var e=n?n.length:0;for(t=h.createCallback(t,r,3);e--;)if(t(n[e],e,n))return e;return-1}function gr(n,t,r){var e=0,u=n?n.length:0;if("number"!=typeof t&&null!=t){var o=-1;for(t=h.createCallback(t,r,3);++o<u&&t(n[o],o,n);)e++}else if(e=t,null==e||r)return n?n[0]:v;return p(n,0,Me(Ue(0,e),u))}function yr(n,t,r,e){return"boolean"!=typeof t&&null!=t&&(e=r,r="function"!=typeof t&&e&&e[t]===n?null:t,t=!1),null!=r&&(n=Zt(n,r,e)),nt(n,t)}function mr(t,r,e){if("number"==typeof e){var u=t?t.length:0;e=0>e?Ue(0,u+e):e||0}else if(e){var o=Or(t,r);return t[o]===r?o:-1}return n(t,r,e)}function br(n,t,r){var e=0,u=n?n.length:0;if("number"!=typeof t&&null!=t){var o=u;for(t=h.createCallback(t,r,3);o--&&t(n[o],o,n);)e++}else e=null==t||r?1:t||e;return p(n,0,Me(Ue(0,u-e),u))}function dr(){for(var r=[],e=-1,u=arguments.length,a=i(),f=ft(),p=f===n,s=i();++e<u;){var v=arguments[e];(Xe(v)||st(v))&&(r.push(v),a.push(p&&v.length>=b&&o(e?r[e]:s)))}var h=r[0],g=-1,y=h?h.length:0,m=[];n:for(;++g<y;){var d=a[0];if(v=h[g],(d?t(d,v):f(s,v))<0){for(e=u,(d||s).push(v);--e;)if(d=a[e],(d?t(d,v):f(r[e],v))<0)continue n;m.push(v)}}for(;u--;)d=a[u],d&&c(d);return l(a),l(s),m}function _r(n,t,r){var e=0,u=n?n.length:0;if("number"!=typeof t&&null!=t){var o=u;for(t=h.createCallback(t,r,3);o--&&t(n[o],o,n);)e++}else if(e=t,null==e||r)return n?n[u-1]:v;return p(n,Ue(0,u-e))}function wr(n,t,r){var e=n?n.length:0;for("number"==typeof r&&(e=(0>r?Ue(0,e+r):Me(r,e-1))+1);e--;)if(n[e]===t)return e;return-1}function jr(n){for(var t=arguments,r=0,e=t.length,u=n?n.length:0;++r<e;)for(var o=-1,a=t[r];++o<u;)n[o]===a&&(Fe.call(n,o--,1),u--);return n}function kr(n,t,r){n=+n||0,r="number"==typeof r?r:+r||1,null==t&&(t=n,n=0);for(var e=-1,u=Ue(0,Re((t-n)/(r||1))),o=ve(u);++e<u;)o[e]=n,n+=r;return o}function xr(n,t,r){var e=-1,u=n?n.length:0,o=[];for(t=h.createCallback(t,r,3);++e<u;){var a=n[e];t(a,e,n)&&(o.push(a),Fe.call(n,e--,1),u--)}return o}function Cr(n,t,r){if("number"!=typeof t&&null!=t){var e=0,u=-1,o=n?n.length:0;for(t=h.createCallback(t,r,3);++u<o&&t(n[u],u,n);)e++}else e=null==t||r?1:Ue(0,t);return p(n,e)}function Or(n,t,r,e){var u=0,o=n?n.length:u;for(r=r?h.createCallback(r,e,1):Xr,t=r(t);o>u;){var a=u+o>>>1;r(n[a])<t?u=a+1:o=a}return u}function Nr(){return ut(nt(arguments,!0,!0))}function Rr(n,t,r,e){return"boolean"!=typeof t&&null!=t&&(e=r,r="function"!=typeof t&&e&&e[t]===n?null:t,t=!1),null!=r&&(r=h.createCallback(r,e,3)),ut(n,t,r)}function Er(n){return Y(n,p(arguments,1))}function Ir(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(Xe(r)||st(r))var e=e?ut(Y(e,r).concat(Y(r,e))):r}return e||[]}function Sr(){for(var n=arguments.length>1?arguments:arguments[0],t=-1,r=n?nr(su(n,"length")):0,e=ve(0>r?0:r);++t<r;)e[t]=su(n,t);return e}function Ar(n,t){var r=-1,e=n?n.length:0,u={};for(t||!e||Xe(n[0])||(t=[]);++r<e;){var o=n[r];t?u[o]=t[r]:o&&(u[o[0]]=o[1])}return u}function Dr(n,t){if(!Et(t))throw new je;return function(){return--n<1?t.apply(this,arguments):void 0}}function Tr(n,t){return arguments.length>2?at(n,17,p(arguments,2),null,t):at(n,1,null,null,t)}function $r(n){for(var t=arguments.length>1?nt(arguments,!0,!1,1):_t(n),r=-1,e=t.length;++r<e;){var u=t[r];n[u]=at(n[u],1,null,null,n)}return n}function Fr(n,t){return arguments.length>2?at(t,19,p(arguments,2),null,n):at(t,3,null,null,n)}function Br(){for(var n=arguments,t=n.length;t--;)if(!Et(n[t]))throw new je;return function(){for(var t=arguments,r=n.length;r--;)t=[n[r].apply(this,t)];return t[0]}}function Wr(n,t){return t="number"==typeof t?t:+t||n.length,at(n,4,null,null,null,t)}function qr(n,t,r){var e,u,o,a,i,f,l,c=0,p=!1,s=!0;if(!Et(n))throw new je;if(t=Ue(0,t)||0,r===!0){var h=!0;s=!1}else It(r)&&(h=r.leading,p="maxWait"in r&&(Ue(t,r.maxWait)||0),s="trailing"in r?r.trailing:s);var g=function(){var r=t-(hu()-a);if(0>=r){u&&Ee(u);var p=l;u=f=l=v,p&&(c=hu(),o=n.apply(i,e),f||u||(e=i=null))}else f=$e(g,r)},y=function(){f&&Ee(f),u=f=l=v,(s||p!==t)&&(c=hu(),o=n.apply(i,e),f||u||(e=i=null))};return function(){if(e=arguments,a=hu(),i=this,l=s&&(f||!h),p===!1)var r=h&&!f;else{u||h||(c=a);var v=p-(a-c),m=0>=v;m?(u&&(u=Ee(u)),c=a,o=n.apply(i,e)):u||(u=$e(y,v))}return m&&f?f=Ee(f):f||t===p||(f=$e(g,t)),r&&(m=!0,o=n.apply(i,e)),!m||f||u||(e=i=null),o}}function zr(n){if(!Et(n))throw new je;var t=p(arguments,1);return $e(function(){n.apply(v,t)},1)}function Lr(n,t){if(!Et(n))throw new je;var r=p(arguments,2);return $e(function(){n.apply(v,r)},t)}function Pr(n,t){if(!Et(n))throw new je;var r=function(){var e=r.cache,u=t?t.apply(this,arguments):m+arguments[0];return De.call(e,u)?e[u]:e[u]=n.apply(this,arguments)};return r.cache={},r}function Kr(n){var t,r;if(!Et(n))throw new je;return function(){return t?r:(t=!0,r=n.apply(this,arguments),n=null,r)}}function Ur(n){return at(n,16,p(arguments,1))}function Mr(n){return at(n,32,null,p(arguments,1))}function Vr(n,t,r){var e=!0,u=!0;if(!Et(n))throw new je;return r===!1?e=!1:It(r)&&(e="leading"in r?r.leading:e,u="trailing"in r?r.trailing:u),U.leading=e,U.maxWait=t,U.trailing=u,qr(n,t,U)}function Gr(n,t){return at(t,16,[n])}function Hr(n){return function(){return n}}function Jr(n,t,r){var e=typeof n;if(null==n||"function"==e)return Q(n,t,r);if("object"!=e)return te(n);var u=Ze(n),o=u[0],a=n[o];return 1!=u.length||a!==a||It(a)?function(t){for(var r=u.length,e=!1;r--&&(e=tt(t[u[r]],n[u[r]],null,!0)););return e}:function(n){var t=n[o];return a===t&&(0!==a||1/a==1/t)}}function Qr(n){return null==n?"":we(n).replace(eu,it)}function Xr(n){return n}function Yr(n,t,r){var e=!0,u=t&&_t(t);t&&(r||u.length)||(null==r&&(r=t),o=g,t=n,n=h,u=_t(t)),r===!1?e=!1:It(r)&&"chain"in r&&(e=r.chain);var o=n,a=Et(o);Qt(u,function(r){var u=n[r]=t[r];a&&(o.prototype[r]=function(){var t=this.__chain__,r=this.__wrapped__,a=[r];Te.apply(a,arguments);var i=u.apply(n,a);if(e||t){if(r===i&&It(i))return this;i=new o(i),i.__chain__=t}return i})})}function Zr(){return r._=Ce,this}function ne(){}function te(n){return function(t){return t[n]}}function re(n,t,r){var e=null==n,u=null==t;if(null==r&&("boolean"==typeof n&&u?(r=n,n=1):u||"boolean"!=typeof t||(r=t,u=!0)),e&&u&&(t=1),n=+n||0,u?(t=n,n=0):t=+t||0,r||n%1||t%1){var o=Ge();return Me(n+o*(t-n+parseFloat("1e-"+((o+"").length-1))),t)}return et(n,t)}function ee(n,t){if(n){var r=n[t];return Et(r)?n[t]():r}}function ue(n,t,r){var e=h.templateSettings;n=we(n||""),r=ou({},r,e);var u,o=ou({},r.imports,e.imports),i=Ze(o),f=Kt(o),l=0,c=r.interpolate||E,p="__p += '",s=_e((r.escape||E).source+"|"+c.source+"|"+(c===N?x:E).source+"|"+(r.evaluate||E).source+"|$","g");n.replace(s,function(t,r,e,o,i,f){return e||(e=o),p+=n.slice(l,f).replace(S,a),r&&(p+="' +\n__e("+r+") +\n'"),i&&(u=!0,p+="';\n"+i+";\n__p += '"),e&&(p+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),l=f+t.length,t}),p+="';\n";var g=r.variable,y=g;y||(g="obj",p="with ("+g+") {\n"+p+"\n}\n"),p=(u?p.replace(w,""):p).replace(j,"$1").replace(k,"$1;"),p="function("+g+") {\n"+(y?"":g+" || ("+g+" = {});\n")+"var __t, __p = '', __e = _.escape"+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m="\n/*\n//# sourceURL="+(r.sourceURL||"/lodash/template/source["+D++ +"]")+"\n*/";try{var b=ye(i,"return "+p+m).apply(v,f)}catch(d){throw d.source=p,d}return t?b(t):(b.source=p,b)}function oe(n,t,r){n=(n=+n)>-1?n:0;var e=-1,u=ve(n);for(t=Q(t,r,1);++e<n;)u[e]=t(e);return u}function ae(n){return null==n?"":we(n).replace(ru,pt)}function ie(n){var t=++y;return we(null==n?"":n)+t}function fe(n){return n=new g(n),n.__chain__=!0,n}function le(n,t){return t(n),n}function ce(){return this.__chain__=!0,this}function pe(){return we(this.__wrapped__)}function se(){return this.__wrapped__}r=r?Z.defaults(H.Object(),r,Z.pick(H,A)):H;var ve=r.Array,he=r.Boolean,ge=r.Date,ye=r.Function,me=r.Math,be=r.Number,de=r.Object,_e=r.RegExp,we=r.String,je=r.TypeError,ke=[],xe=de.prototype,Ce=r._,Oe=xe.toString,Ne=_e("^"+we(Oe).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Re=me.ceil,Ee=r.clearTimeout,Ie=me.floor,Se=ye.prototype.toString,Ae=lt(Ae=de.getPrototypeOf)&&Ae,De=xe.hasOwnProperty,Te=ke.push,$e=r.setTimeout,Fe=ke.splice,Be=ke.unshift,We=function(){try{var n={},t=lt(t=de.defineProperty)&&t,r=t(n,n,n)&&t}catch(e){}return r}(),qe=lt(qe=de.create)&&qe,ze=lt(ze=ve.isArray)&&ze,Le=r.isFinite,Pe=r.isNaN,Ke=lt(Ke=de.keys)&&Ke,Ue=me.max,Me=me.min,Ve=r.parseInt,Ge=me.random,He={};He[$]=ve,He[F]=he,He[B]=ge,He[W]=ye,He[z]=de,He[q]=be,He[L]=_e,He[P]=we,g.prototype=h.prototype;var Je=h.support={};Je.funcDecomp=!lt(r.WinRTError)&&I.test(s),Je.funcNames="string"==typeof ye.name,h.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:N,variable:"",imports:{_:h}},qe||(J=function(){function n(){}return function(t){if(It(t)){n.prototype=t;var e=new n;n.prototype=null}return e||r.Object()}}());var Qe=We?function(n,t){M.value=t,We(n,"__bindData__",M)}:ne,Xe=ze||function(n){return n&&"object"==typeof n&&"number"==typeof n.length&&Oe.call(n)==$||!1},Ye=function(n){var t,r=n,e=[];if(!r)return e;if(!V[typeof n])return e;for(t in r)De.call(r,t)&&e.push(t);return e},Ze=Ke?function(n){return It(n)?Ke(n):[]}:Ye,nu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tu=jt(nu),ru=_e("("+Ze(tu).join("|")+")","g"),eu=_e("["+Ze(nu).join("")+"]","g"),uu=function(n,t,r){var e,u=n,o=u;if(!u)return o;var a=arguments,i=0,f="number"==typeof r?2:a.length;if(f>3&&"function"==typeof a[f-2])var l=Q(a[--f-1],a[f--],2);else f>2&&"function"==typeof a[f-1]&&(l=a[--f]);for(;++i<f;)if(u=a[i],u&&V[typeof u])for(var c=-1,p=V[typeof u]&&Ze(u),s=p?p.length:0;++c<s;)e=p[c],o[e]=l?l(o[e],u[e]):u[e];return o},ou=function(n,t,r){var e,u=n,o=u;if(!u)return o;for(var a=arguments,i=0,f="number"==typeof r?2:a.length;++i<f;)if(u=a[i],u&&V[typeof u])for(var l=-1,c=V[typeof u]&&Ze(u),p=c?c.length:0;++l<p;)e=c[l],"undefined"==typeof o[e]&&(o[e]=u[e]);return o},au=function(n,t,r){var e,u=n,o=u;if(!u)return o;if(!V[typeof u])return o;t=t&&"undefined"==typeof r?t:Q(t,r,3);for(e in u)if(t(u[e],e,n)===!1)return o;return o},iu=function(n,t,r){var e,u=n,o=u;if(!u)return o;if(!V[typeof u])return o;t=t&&"undefined"==typeof r?t:Q(t,r,3);for(var a=-1,i=V[typeof u]&&Ze(u),f=i?i.length:0;++a<f;)if(e=i[a],t(u[e],e,n)===!1)return o;return o},fu=Ae?function(n){if(!n||Oe.call(n)!=z)return!1;var t=n.valueOf,r=lt(t)&&(r=Ae(t))&&Ae(r);return r?n==r||Ae(n)==r:ct(n)}:ct,lu=ot(function(n,t,r){De.call(n,r)?n[r]++:n[r]=1}),cu=ot(function(n,t,r){(De.call(n,r)?n[r]:n[r]=[]).push(t)}),pu=ot(function(n,t,r){n[r]=t}),su=Zt,vu=Gt,hu=lt(hu=ge.now)&&hu||function(){return(new ge).getTime()},gu=8==Ve(_+"08")?Ve:function(n,t){return Ve($t(n)?n.replace(R,""):n,t||0)};return h.after=Dr,h.assign=uu,h.at=Ut,h.bind=Tr,h.bindAll=$r,h.bindKey=Fr,h.chain=fe,h.compact=pr,h.compose=Br,h.constant=Hr,h.countBy=lu,h.create=gt,h.createCallback=Jr,h.curry=Wr,h.debounce=qr,h.defaults=ou,h.defer=zr,h.delay=Lr,h.difference=sr,h.filter=Gt,h.flatten=yr,h.forEach=Qt,h.forEachRight=Xt,h.forIn=au,h.forInRight=bt,h.forOwn=iu,h.forOwnRight=dt,h.functions=_t,h.groupBy=cu,h.indexBy=pu,h.initial=br,h.intersection=dr,h.invert=jt,h.invoke=Yt,h.keys=Ze,h.map=Zt,h.mapValues=Bt,h.max=nr,h.memoize=Pr,h.merge=Wt,h.min=tr,h.omit=qt,h.once=Kr,h.pairs=zt,h.partial=Ur,h.partialRight=Mr,h.pick=Lt,h.pluck=su,h.property=te,h.pull=jr,h.range=kr,h.reject=ur,h.remove=xr,h.rest=Cr,h.shuffle=ar,h.sortBy=lr,h.tap=le,h.throttle=Vr,h.times=oe,h.toArray=cr,h.transform=Pt,h.union=Nr,h.uniq=Rr,h.values=Kt,h.where=vu,h.without=Er,h.wrap=Gr,h.xor=Ir,h.zip=Sr,h.zipObject=Ar,h.collect=Zt,h.drop=Cr,h.each=Qt,h.eachRight=Xt,h.extend=uu,h.methods=_t,h.object=Ar,h.select=Gt,h.tail=Cr,h.unique=Rr,h.unzip=Sr,Yr(h),h.clone=vt,h.cloneDeep=ht,h.contains=Mt,h.escape=Qr,h.every=Vt,h.find=Ht,h.findIndex=vr,h.findKey=yt,h.findLast=Jt,h.findLastIndex=hr,h.findLastKey=mt,h.has=wt,h.identity=Xr,h.indexOf=mr,h.isArguments=st,h.isArray=Xe,h.isBoolean=kt,h.isDate=xt,h.isElement=Ct,h.isEmpty=Ot,h.isEqual=Nt,h.isFinite=Rt,h.isFunction=Et,h.isNaN=St,h.isNull=At,h.isNumber=Dt,h.isObject=It,h.isPlainObject=fu,h.isRegExp=Tt,h.isString=$t,h.isUndefined=Ft,h.lastIndexOf=wr,h.mixin=Yr,h.noConflict=Zr,h.noop=ne,h.now=hu,h.parseInt=gu,h.random=re,h.reduce=rr,h.reduceRight=er,h.result=ee,h.runInContext=s,h.size=ir,h.some=fr,h.sortedIndex=Or,h.template=ue,h.unescape=ae,h.uniqueId=ie,h.all=Vt,h.any=fr,h.detect=Ht,h.findWhere=Ht,h.foldl=rr,h.foldr=er,h.include=Mt,h.inject=rr,Yr(function(){var n={};return iu(h,function(t,r){h.prototype[r]||(n[r]=t)}),n}(),!1),h.first=gr,h.last=_r,h.sample=or,h.take=gr,h.head=gr,iu(h,function(n,t){var r="sample"!==t;h.prototype[t]||(h.prototype[t]=function(t,e){var u=this.__chain__,o=n(this.__wrapped__,t,e);return u||null!=t&&(!e||r&&"function"==typeof t)?new g(o,u):o})}),h.VERSION="2.4.1",h.prototype.chain=ce,h.prototype.toString=pe,h.prototype.value=se,h.prototype.valueOf=se,Qt(["join","pop","shift"],function(n){var t=ke[n];h.prototype[n]=function(){var n=this.__chain__,r=t.apply(this.__wrapped__,arguments);return n?new g(r,n):r}}),Qt(["push","reverse","sort","unshift"],function(n){var t=ke[n];h.prototype[n]=function(){return t.apply(this.__wrapped__,arguments),this}}),Qt(["concat","slice","splice"],function(n){var t=ke[n];h.prototype[n]=function(){return new g(t.apply(this.__wrapped__,arguments),this.__chain__)}}),h}var v,h=[],g=[],y=0,m=+new Date+"",b=75,d=40,_=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",w=/\b__p \+= '';/g,j=/\b(__p \+=) '' \+/g,k=/(__e\(.*?\)|\b__t\)) \+\n'';/g,x=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,C=/\w*$/,O=/^\s*function[ \n\r\t]+\w/,N=/<%=([\s\S]+?)%>/g,R=RegExp("^["+_+"]*0+(?=.$)"),E=/($^)/,I=/\bthis\b/,S=/['\n\r\t\u2028\u2029\\]/g,A=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],D=0,T="[object Arguments]",$="[object Array]",F="[object Boolean]",B="[object Date]",W="[object Function]",q="[object Number]",z="[object Object]",L="[object RegExp]",P="[object String]",K={};K[W]=!1,K[T]=K[$]=K[F]=K[B]=K[q]=K[z]=K[L]=K[P]=!0;var U={leading:!1,maxWait:0,trailing:!1},M={configurable:!1,enumerable:!1,value:null,writable:!1},V={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},G={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},H=V[typeof window]&&window||this,J=V[typeof exports]&&exports&&!exports.nodeType&&exports,Q=V[typeof module]&&module&&!module.nodeType&&module,X=Q&&Q.exports===J&&J,Y=V[typeof global]&&global;!Y||Y.global!==Y&&Y.window!==Y||(H=Y);var Z=s();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(H._=Z,define(function(){return Z})):J&&Q?X?(Q.exports=Z)._=Z:J._=Z:H._=Z}).call(this);
}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],127:[function(require,module,exports){
module.exports={telltale:{key:"_TELLTALE",value:"a94hgd9gal2gl2bmc,=1aga"}};
},{}],128:[function(require,module,exports){
var _=require("lodash"),util=require("util"),constants=require("./constants");module.exports=function(t){var e=function(){var r=Array.prototype.slice.call(arguments),s=r[0];return s?e.error.apply(t||this,r):e.success.apply(t||this,r.slice(1))};return e[constants.telltale.key]=constants.telltale.value,e};
},{"./constants":127,"lodash":126,"util":124}],129:[function(require,module,exports){
var _=require("lodash"),util=require("util"),factory=require("./factory"),normalize=require("./normalize"),redirect=require("./redirect"),wildcard=require("./wildcard"),constants=require("./constants"),switchback=function(e,r,t){if(!_.isObject(e)&&!_.isFunction(e))return e;var i=factory(t);e=normalize.callback(e),_.extend(i,e);var n=function(e,t){return function(){var e=Array.prototype.slice.call(arguments);if(t=(e[0]?util.inspect(e[0])+"        ":"")+(t?"("+(t||"")+")":""),_.isObject(r)&&_.isFunction(r["*"]))return r["*"](t);throw new Error(t)}};return _.isObject(r)&&(r=_.mapValues(r,function(e,a){return _.isFunction(e)?e:function(){var c,s=e,l=Array.prototype.slice.call(arguments),u=t||this,o=5,d=0;do c=s,s=i[s],d++;while(_.isString(s)&&o>=d);if(d>o)throw new Error("Default handlers object ("+util.inspect(r)+") has a cyclic redirect.");_.isFunction(s)||(s=n(s,"`"+a+"` case triggered, but no handler was implemented.")),s.apply(u,l)}})),_.defaults(i,r,{success:n("success","`success` case triggered, but no handler was implemented."),error:n("error","`error` case triggered, but no handler was implemented."),invalid:n("invalid","`invalid` case triggered, but no handler was implemented.")}),i};switchback.isSwitchback=function(e){return _.isObject(e)&&e[constants.telltale.key]===constants.telltale.value},module.exports=switchback;
},{"./constants":127,"./factory":128,"./normalize":130,"./redirect":131,"./wildcard":132,"lodash":126,"util":124}],130:[function(require,module,exports){
var _=require("lodash"),util=require("util");module.exports={callback:function(r,t){if(_.isFunction(r)){var e=r;r={success:function(){var r=Array.prototype.slice.call(arguments);r.unshift(null),e.apply(t||this,r)},error:function(){var r=Array.prototype.slice.call(arguments);r[0]||(r[0]=new Error),e.apply(t||this,r)}},r=r||{}}return r}};
},{"lodash":126,"util":124}],131:[function(require,module,exports){
module.exports=require(91)
},{}],132:[function(require,module,exports){
module.exports=require(91)
},{}],133:[function(require,module,exports){
(function (process){
function convert(t){var e,r=Object.keys(validate.messages),o=!1;r=r.concat(["description","dependencies"]);for(e in t)if(r.indexOf(e)>0){o=!0;break}return(!o||t.validator||t.warning||"undefined"!=typeof t.empty)&&(t.description=t.message,t.message=t.warning,"function"==typeof t.validator?t.conform=t.validator:t.pattern=t.validator,"undefined"!=typeof t.empty&&(t.required=!t.empty),delete t.warning,delete t.validator,delete t.empty),t}var events=require("events"),readline=require("readline"),utile=require("utile"),async=utile.async,read=require("read"),validate=require("revalidator").validate,winston=require("winston");readline.Interface.prototype.setPrompt=function(t,e){if(this._prompt=t,e)this._promptLength=e;else{var r=t.split(/[\r\n]/),o=r[r.length-1];this._promptLength=o.replace(/\u001b\[(\d+(;\d+)*)?m/g,"").length}},require("pkginfo")(module,"version");var stdin,stdout,history=[],prompt=module.exports=Object.create(events.EventEmitter.prototype),logger=prompt.logger=new winston.Logger({transports:[new winston.transports.Console]});prompt.started=!1,prompt.paused=!1,prompt.allowEmpty=!1,prompt.message="prompt",prompt.delimiter=": ",prompt.colors=!0,prompt.properties={},logger.cli(),prompt.start=function(t){return prompt.started?void 0:(t=t||{},stdin=t.stdin||process.stdin,stdout=t.stdout||process.stdout,prompt.memory=t.memory||10,prompt.allowEmpty=t.allowEmpty||!1,prompt.message=t.message||prompt.message,prompt.delimiter=t.delimiter||prompt.delimiter,prompt.colors=t.colors||prompt.colors,"win32"!==process.platform&&process.on("SIGINT",function(){stdout.write("\n"),process.exit(1)}),prompt.emit("start"),prompt.started=!0,prompt)},prompt.pause=function(){return prompt.started&&!prompt.paused?(stdin.pause(),prompt.emit("pause"),prompt.paused=!0,prompt):void 0},prompt.resume=function(){return prompt.started&&prompt.paused?(stdin.resume(),prompt.emit("resume"),prompt.paused=!1,prompt):void 0},prompt.history=function(t){if("number"==typeof t)return history[t]||{};var e=history.map(function(t){return"string"==typeof t.property?t.property:t.property.name});return~e.indexOf(t)?history.filter(function(e){return"string"==typeof e.property?e.property===t:e.property.name===t})[0]:null},prompt.get=function(t,e){function r(t,e){var o=[];return e=e||[],t.properties?(Object.keys(t.properties).forEach(function(p){var n={};n[p]=t.properties[p],o=o.concat(r(n[p],e.concat(p)))}),o):{path:e,schema:t}}function o(t,e,o){var p=[],n={};"string"==typeof t?p.push({path:[t],schema:prompt.properties[t.toLowerCase()]||{}}):p=Array.isArray(t)?t.map(function(t){return"string"==typeof t?{path:[t],schema:prompt.properties[t.toLowerCase()]||{}}:t.properties?{path:[Object.keys(t.properties)[0]],schema:t.properties[Object.keys(t.properties)[0]]}:t.path&&t.schema?t:{path:[t.name||"question"],schema:t}}):t.properties?r(t):[{schema:t.schema?t.schema:t,path:t.path||[t.name||"question"]}],async.forEachSeries(p,function(t,r){e(t,function(e,o){function p(t,e){var r={};return t.length?(r[t[0]]=p(t.slice(1),e),r):e}function i(t,e){var r;return"object"!=typeof e||e instanceof Array?e:(r=Object.keys(e),r.length&&(t[r[0]]||(t[r[0]]={}),t[r[0]]=i(t[r[0]],e[r[0]])),t)}return e?r(e):(n=i(n,p(t.path,o)),void r())})},function(t){return t?o(t):o(null,n)})}return o(t,function(t,e){prompt.getInput(t,function(t,r){return t?e(t):e(null,r)})},e),prompt},prompt.confirm=function(){function t(t,e){var r=t.yes||i,o=utile.mixin({description:"string"==typeof t?t:t.description||"yes/no",pattern:t.pattern||s,name:"confirm",message:t.message||"yes/no"},p||{});prompt.get([o],function(t,p){e(t?!1:r.test(p[o.name]))})}var e=Array.prototype.slice.call(arguments),r=e.shift(),o=e.pop(),p=e.shift(),n=Array.isArray(r)?r:[r],i=/^[yt]{1}/i,s=/^[yntf]{1}/i;async.rejectSeries(n,t,function(t){o(null,0===t.length)})};var tmp=[];prompt.getInput=function(t,e){var r,o,p,n,i,s=t.schema||t,a=t.path&&t.path.join(":")||t,m=prompt.properties[a.toLowerCase()],u=prompt.delimiter;if(s instanceof Object&&!Object.keys(s).length&&"undefined"!=typeof m&&(s=m),"string"!=typeof t||m||(s={}),s=convert(s),r=s.default,p=t.description||s.description||a,n=prompt.colors?[prompt.message,u+p.grey,u.grey]:[prompt.message,u+p,u],t={schema:s,path:a.split(":")},s.properties||(s=function(){var t={properties:{}};return t.properties[a]=s,t}()),prompt.override&&prompt.override[a]){if(prompt._performValidation(p,t,prompt.override,s,-1,e))return e(null,prompt.override[a]);delete prompt.override[a]}var c=(s.properties&&s.properties[p]&&s.properties[p].type||"").toLowerCase().trim(),l="array"===c;"array"===c&&(o=t.schema.maxItems,i=o?(tmp.length+1).toString()+"/"+o.toString():(tmp.length+1).toString(),i+=u,n.push(prompt.colors?i.grey:i)),o=n.join("").length,n[0]=n[0],i=n.join(""),s.help&&s.help.forEach(function(t){logger.help(t)}),prompt.emit("prompt",t),"undefined"==typeof r&&(r=""),r=r.toString(),read({prompt:i,silent:t.schema&&t.schema.hidden,"default":r,input:stdin,output:stdout},function(r,o){if(r&&l===!1)return e(r);var n,i,m={};if(""!==o){if(s.properties[p]){var u=(s.properties[p].type||"").toLowerCase().trim()||void 0;if("number"==u&&(n=parseFloat(o,10),isNaN(n)||(o=n)),"boolean"==u&&("true"===o&&(o=!0),"false"===o&&(o=!1)),"array"==u){var c=t.schema.maxItems;r?"canceled"==r.message&&(l=!1,stdout.write("\n")):(c?tmp.length+1<c?(i=!1,l=!0):(i=!0,l=!1):(i=!1,l=!0),tmp.push(o)),o=tmp}}m[a]=o}return t&&t.schema.before&&(o=t.schema.before(o)),void 0===i&&(i=prompt._performValidation(p,t,m,s,o,e)),i?(logger.input(o.yellow),prompt._remember(a,o),e(null,o),void(tmp=[])):prompt.getInput(t,e)})},prompt._performValidation=function(t,e,r,o,p,n){var i,s;try{i=validate(r,o)}catch(a){return-1!==p?n(a):!1}return i.valid||(s=-1!==p?"Invalid input for ":"Invalid command-line input for ",logger.error(prompt.colors?s+t.grey:s+t),e.schema.message&&logger.error(e.schema.message),prompt.emit("invalid",e,p)),i.valid},prompt.addProperties=function(t,e,r){return e=e.filter(function(e){return"undefined"==typeof t[e]}),0===e.length?r(t):(prompt.get(e,function(e,o){function p(t,e,r){for(var o,p=t;e.length>1;)o=e.shift(),p[o]||(p[o]={}),p=p[o];p[e.shift()]=r}return e?r(e):o?(Object.keys(o).forEach(function(e){p(t,e.split("."),o[e])}),void r(null,t)):r(null,t)}),prompt)},prompt._remember=function(t,e){history.unshift({property:t,value:e}),history.length>prompt.memory&&history.splice(prompt.memory,history.length-prompt.memory)};
}).call(this,require("FWaASH"))
},{"FWaASH":108,"events":104,"pkginfo":134,"read":135,"readline":91,"revalidator":137,"utile":142,"winston":155}],134:[function(require,module,exports){
(function (__dirname){
var fs=require("fs"),path=require("path"),pkginfo=module.exports=function(n,e){var r=[].slice.call(arguments,2).filter(function(n){return"string"==typeof n});Array.isArray(e)?e={include:e}:"string"==typeof e&&(e={include:[e]}),e=e||{},e.include=e.include||[],r.length>0&&(e.include=e.include.concat(r));var i=pkginfo.read(n,e.dir).package;return Object.keys(i).forEach(function(r){e.include.length>0&&!~e.include.indexOf(r)||n.exports[r]||(n.exports[r]=i[r])}),pkginfo};pkginfo.find=function(n,e){e||(e=path.dirname(n.filename));var r=fs.readdirSync(e);if(~r.indexOf("package.json"))return path.join(e,"package.json");if("/"===e)throw new Error("Could not find package.json up from: "+e);if(!e||"."===e)throw new Error("Cannot find package.json from unspecified directory");return pkginfo.find(n,path.dirname(e))},pkginfo.read=function(n,e){e=pkginfo.find(n,e);var r=fs.readFileSync(e).toString();return{dir:e,"package":JSON.parse(r)}},pkginfo(module,{dir:__dirname,include:["version"],target:pkginfo});
}).call(this,"/node_modules/prompt/node_modules/pkginfo/lib")
},{"fs":91,"path":107}],135:[function(require,module,exports){
(function (process){
function read(e,r){function t(){h=!0,v.close(),process.version.match(/^v0\.6/)&&(v.input.removeAllListeners("data"),v.input.removeAllListeners("keypress"),v.input.pause()),clearTimeout(w),o.mute(),o.end()}function n(e){return h?void 0:(t(),r(e))}function u(e){if(!h){l&&m&&(o.unmute(),o.write("\r\n")),t(),e=e.replace(/\r?\n$/,"");var n=!(!s||e!==c);c&&!e&&(n=!0,e=c),r(null,e,n)}}if(e.num)throw new Error("read() no longer accepts a char number limit");if("undefined"!=typeof e.default&&"string"!=typeof e.default&&"number"!=typeof e.default)throw new Error("default value must be string or number");var i=e.input||process.stdin,o=e.output||process.stdout,a=(e.prompt||"").trim()+" ",l=e.silent,s=!1,p=e.timeout,c=e.default||"";c&&(l?a+="(<default hidden>) ":e.edit?s=!0:a+="("+c+") ");var m=!(!e.terminal&&!o.isTTY),d=new Mute({replace:e.replace,prompt:a});d.pipe(o,{end:!1}),o=d;var f={input:i,output:o,terminal:m};if(process.version.match(/^v0\.6/))var v=readline.createInterface(f.input,f.output);else var v=readline.createInterface(f);o.unmute(),v.setPrompt(a),v.prompt(),l?o.mute():s&&(v.line=c,v.cursor=c.length,v._refreshLine());var h=!1;v.on("line",u),v.on("error",n),v.on("SIGINT",function(){v.close(),n(new Error("canceled"))});var w;p&&(w=setTimeout(function(){n(new Error("timed out"))},p))}module.exports=read;var readline=require("readline"),Mute=require("mute-stream");
}).call(this,require("FWaASH"))
},{"FWaASH":108,"mute-stream":136,"readline":91}],136:[function(require,module,exports){
function MuteStream(t){Stream.apply(this),t=t||{},this.writable=this.readable=!0,this.muted=!1,this.on("pipe",this._onpipe),this.replace=t.replace,this._prompt=t.prompt||null,this._hadControl=!1}function onPipe(t){this._src=t}function getIsTTY(){return this._dest?this._dest.isTTY:this._src?this._src.isTTY:!1}function setIsTTY(t){Object.defineProperty(this,"isTTY",{value:t,enumerable:!0,writable:!0,configurable:!0})}function proxy(t){return function(){var e=this._dest,r=this._src;e&&e[t]&&e[t].apply(e,arguments),r&&r[t]&&r[t].apply(r,arguments)}}var Stream=require("stream");module.exports=MuteStream,MuteStream.prototype=Object.create(Stream.prototype),Object.defineProperty(MuteStream.prototype,"constructor",{value:MuteStream,enumerable:!1}),MuteStream.prototype.mute=function(){this.muted=!0},MuteStream.prototype.unmute=function(){this.muted=!1},Object.defineProperty(MuteStream.prototype,"_onpipe",{value:onPipe,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(MuteStream.prototype,"isTTY",{get:getIsTTY,set:setIsTTY,enumerable:!0,configurable:!0}),Object.defineProperty(MuteStream.prototype,"rows",{get:function(){return this._dest?this._dest.rows:this._src?this._src.rows:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(MuteStream.prototype,"columns",{get:function(){return this._dest?this._dest.columns:this._src?this._src.columns:void 0},enumerable:!0,configurable:!0}),MuteStream.prototype.pipe=function(t){return this._dest=t,Stream.prototype.pipe.call(this,t)},MuteStream.prototype.pause=function(){return this._src?this._src.pause():void 0},MuteStream.prototype.resume=function(){return this._src?this._src.resume():void 0},MuteStream.prototype.write=function(t){if(this.muted){if(!this.replace)return!0;if(t.match(/^\u001b/))return this._hadControl=!0,this.emit("data",t);this._prompt&&this._hadControl&&0===t.indexOf(this._prompt)&&(this._hadControl=!1,this.emit("data",this._prompt),t=t.substr(this._prompt.length)),t=t.toString().replace(/./g,this.replace)}this.emit("data",t)},MuteStream.prototype.end=function(t){this.muted&&(t=t&&this.replace?t.toString().replace(/./g,this.replace):null),t&&this.emit("data",t),this.emit("end")},MuteStream.prototype.destroy=proxy("destroy"),MuteStream.prototype.destroySoon=proxy("destroySoon"),MuteStream.prototype.close=proxy("close");
},{"stream":122}],137:[function(require,module,exports){
!function(e){function t(e,n,r){r=u({},r,t.defaults);var a=[];return F(e,n,r,a),{valid:!a.length,errors:a}}function u(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var u=t.shift();if(u){if("object"!=typeof u)throw new TypeError("mixin non-object");for(var F in u)u.hasOwnProperty(F)&&(e[F]=u[F])}}return e}function F(e,t,u,F){var r,i=Object.keys(e),o=[];if(t.properties){r=t.properties;for(var s in r)r.hasOwnProperty(s)&&(o.push(s),n(e,e[s],s,r[s],u,F))}if(t.patternProperties){r=t.patternProperties;for(var s in r)if(r.hasOwnProperty(s)){var d=new RegExp(s);for(var f in e)e.hasOwnProperty(f)&&(o.push(f),null!==d.exec(f)&&n(e,e[f],s,r[s],u,F))}}if(void 0!==t.additionalProperties){var m,p,l=i.filter(function(e){return-1===o.indexOf(e)});if(t.additionalProperties===!1&&l.length>0)for(m=0,p=l.length;p>m;m++)a("additionalProperties",l[m],e[l[m]],!1,F);else if("object"==typeof t.additionalProperties&&l.length>0)for(m=0,p=l.length;p>m;m++)n(e,e[l[m]],l[m],t.unvisitedProperties,u,F)}}function n(e,u,o,s,d,f){function m(e,t,u){void 0===s[e]||u(t,s[e])||a(e,o,t,s,f)}var p,l;if(void 0===u)return s.required&&"any"!==s.type?a("required",o,void 0,s,f):void 0;if(d.cast&&("integer"!==s.type&&"number"!==s.type||u!=+u||(u=+u,e[o]=u),"boolean"===s.type&&(("true"===u||"1"===u||1===u)&&(u=!0,e[o]=u),("false"===u||"0"===u||0===u)&&(u=!1,e[o]=u))),s.format&&d.validateFormats)if(p=s.format,d.validateFormatExtensions&&(l=t.formatExtensions[p]),l||(l=t.formats[p]),l){if(!l.test(u))return a("format",o,u,s,f)}else if(d.validateFormatsStrict)return a("format",o,u,s,f);if(s["enum"]&&-1===s["enum"].indexOf(u)&&a("enum",o,u,s,f),"string"==typeof s.dependencies&&void 0===e[s.dependencies]&&a("dependencies",o,null,s,f),i(s.dependencies))for(var c=0,D=s.dependencies.length;D>c;c++)void 0===e[s.dependencies[c]]&&a("dependencies",o,null,s,f);"object"==typeof s.dependencies&&F(e,s.dependencies,d,f),r(u,s.type,function(t,r){if(t)return a("type",o,typeof u,s,f);switch(m("conform",u,function(t,u){return u(t,e)}),r||(i(u)?"array":typeof u)){case"string":m("allowEmpty",u,function(e,t){return t?t:""!==e}),m("minLength",u.length,function(e,t){return e>=t}),m("maxLength",u.length,function(e,t){return t>=e}),m("pattern",u,function(e,t){return t="string"==typeof t?t=new RegExp(t):t,t.test(e)});break;case"integer":case"number":m("minimum",u,function(e,t){return e>=t}),m("maximum",u,function(e,t){return t>=e}),m("exclusiveMinimum",u,function(e,t){return e>t}),m("exclusiveMaximum",u,function(e,t){return t>e}),m("divisibleBy",u,function(e,t){var u=Math.max((e-Math.floor(e)).toString().length-2,(t-Math.floor(t)).toString().length-2);return u=u>0?Math.pow(10,u):1,e*u%(t*u)===0});break;case"array":m("items",u,function(t,u){for(var F=0,r=t.length;r>F;F++)n(e,t[F],o,u,d,f);return!0}),m("minItems",u,function(e,t){return e.length>=t}),m("maxItems",u,function(e,t){return e.length<=t}),m("uniqueItems",u,function(e){for(var t={},u=0,F=e.length;F>u;u++){var n=JSON.stringify(e[u]);if(t[n])return!1;t[n]=!0}return!0});break;case"object":(s.properties||s.patternProperties||s.additionalProperties)&&F(u,s,d,f)}})}function r(e,t,u){var F=i(t)?t:[t];if(void 0===t)return u(null,t);for(var n=0,r=F.length;r>n;n++)if(t=F[n].toLowerCase().trim(),"string"===t?"string"==typeof e:"array"===t?i(e):"object"===t?e&&"object"==typeof e&&!i(e):"number"===t?"number"==typeof e:"integer"===t?"number"==typeof e&&~~e===e:"null"===t?null===e:"boolean"===t?"boolean"==typeof e:"date"===t?o(e):"any"===t?"undefined"!=typeof e:!1)return u(null,t);u(!0)}function a(e,u,F,n,r){var a={expected:n[e],actual:F,attribute:e,property:u},i=n.messages&&n.messages[e]||n.message||t.messages[e]||"no default message";i=i.replace(/%\{([a-z]+)\}/gi,function(e,t){return a[t.toLowerCase()]||""}),r.push({attribute:e,property:u,expected:n[e],actual:F,message:i})}function i(e){var t=typeof e;return"object"===t&&e&&"number"==typeof e.length&&!e.propertyIsEnumerable("length")&&"function"==typeof e.splice?!0:!1}function o(e){var t=typeof e;return"object"===t&&e&&"function"==typeof e.getTime?!0:!1}e.validate=t,e.mixin=u,t.defaults={validateFormats:!0,validateFormatsStrict:!1,validateFormatExtensions:!0},t.messages={required:"is required",allowEmpty:"must not be empty",minLength:"is too short (minimum is %{expected} characters)",maxLength:"is too long (maximum is %{expected} characters)",pattern:"invalid input",minimum:"must be greater than or equal to %{expected}",maximum:"must be less than or equal to %{expected}",exclusiveMinimum:"must be greater than %{expected}",exclusiveMaximum:"must be less than %{expected}",divisibleBy:"must be divisible by %{expected}",minItems:"must contain more than %{expected} items",maxItems:"must contain less than %{expected} items",uniqueItems:"must hold a unique set of values",format:"is not a valid %{expected}",conform:"must conform to given constraint",type:"must be of %{expected} type"},t.messages["enum"]="must be present in given enumerator",t.formats={email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,"ip-address":/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/i,ipv6:/^([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4}$/,"date-time":/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:.\d{1,3})?Z$/,date:/^\d{4}-\d{2}-\d{2}$/,time:/^\d{2}:\d{2}:\d{2}$/,color:/^#[a-z0-9]{6}|#[a-z0-9]{3}|(?:rgb\(\s*(?:[+-]?\d+%?)\s*,\s*(?:[+-]?\d+%?)\s*,\s*(?:[+-]?\d+%?)\s*\))aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow$/i,"host-name":/^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])/,"utc-millisec":{test:function(e){return"number"==typeof e&&e>=0}},regex:{test:function(e){try{new RegExp(e)}catch(t){return!1}return!0}}},t.formatExtensions={url:/^(https?|ftp|git):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i}}("object"==typeof module&&module&&module.exports?module.exports:window);
},{}],138:[function(require,module,exports){
var utile=require("./index");module.exports=function(e){var t,r=utile.rargs(e);return Object.defineProperty(r,"first",{value:r[0]}),t=r[r.length-1]||r[r.length],"function"==typeof t&&(Object.defineProperty(r,"callback",{value:t}),Object.defineProperty(r,"cb",{value:t}),r.pop()),r.length&&Object.defineProperty(r,"last",{value:r[r.length-1]}),r};
},{"./index":142}],139:[function(require,module,exports){
(function (Buffer){
var base64=exports;base64.encode=function(e){var r;try{r=new Buffer(e||"").toString("base64")}catch(t){return null}return r},base64.decode=function(e){var r;try{r=new Buffer(e||"","base64").toString("utf8")}catch(t){return null}return r};
}).call(this,require("buffer").Buffer)
},{"buffer":95}],140:[function(require,module,exports){
var fs=require("fs");exports.readJson=exports.readJSON=function(r,e){if("function"!=typeof e)throw new Error("utile.file.readJson needs a callback");fs.readFile(r,"utf-8",function(r,n){if(r)return e(r);try{var t=JSON.parse(n);e(null,t)}catch(r){return e(r)}})},exports.readJsonSync=exports.readJSONSync=function(r){return JSON.parse(fs.readFileSync(r,"utf-8"))};
},{"fs":91}],141:[function(require,module,exports){
var util=require("util");exports=module.exports=function(r){var e=[].slice.call(arguments,1,3);if(!(e[0]instanceof Array&&e[1]instanceof Array)||arguments.length>3)return util.format.apply(null,arguments);var t=e.pop(),e=e.shift();return e.forEach(function(e,n){r=r.replace(new RegExp(e),t[n])}),r};
},{"util":124}],142:[function(require,module,exports){
var fs=require("fs"),path=require("path"),util=require("util"),utile=module.exports;Object.keys(util).forEach(function(e){utile[e]=util[e]}),Object.defineProperties(utile,{async:{get:function(){return utile.async=require("async")}},inflect:{get:function(){return utile.inflect=require("i")()}},mkdirp:{get:function(){return utile.mkdirp=require("mkdirp")}},deepEqual:{get:function(){return utile.deepEqual=require("deep-equal")}},rimraf:{get:function(){return utile.rimraf=require("rimraf")}},cpr:{get:function(){return utile.cpr=require("ncp").ncp}},file:{get:function(){return utile.file=require("./file")}},args:{get:function(){return utile.args=require("./args")}},base64:{get:function(){return utile.base64=require("./base64")}},format:{get:function(){return utile.format=require("./format")}}}),utile.rargs=function(e,r){r||(r=0);var t,n=(e||[]).length,i=new Array(n-r);for(t=r;n>t;t++)i[t-r]=e[t];return i},utile.each=function(e,r){Object.keys(e).forEach(function(t){r(e[t],t,e)})},utile.find=function(e,r){var t,n;for(n in e)if(t=e[n],r(t,n))return t},utile.pad=function(e,r,t){var n;if(t||(t=" "),e=e||"",n=e,e.length<r)for(var i=0;i<r-e.length;i++)n+=t;return n},utile.path=function(e,r){var t,n;for(n in r){if("undefined"==typeof e)return void 0;t=r[n],e=e[t]}return e},utile.createPath=function(e,r,t){var n,i;for(i in r)n=r[i],e[n]||(e[n]=+i+1===r.length?t:{}),e=e[n]},utile.mixin=function(e){return utile.rargs(arguments,1).forEach(function(r){Object.getOwnPropertyNames(r).forEach(function(t){var n=Object.getOwnPropertyDescriptor(r,t).get,i=Object.getOwnPropertyDescriptor(r,t).set;n||i?Object.defineProperty(e,t,{get:n,set:i}):e[t]=r[t]})}),e},utile.capitalize=utile.inflect.camelize,utile.escapeRegExp=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},utile.randomString=function(e){var r,t,n,i,u,c;for(r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_-",i="",u=4,c=e*u||64;c>0;)for(t=Math.floor(4294967296*Math.random()),n=26;n>0&&c>0;n-=u,c-=u)i+=r[63&t>>>n];return i},utile.filter=function(e,r){var t;return Array.isArray(e)?(t=[],utile.each(e,function(n,i){r(n,i,e)&&t.push(n)})):(t={},utile.each(e,function(n,i){r(n,i,e)&&(t[i]=n)})),t},utile.requireDir=function(e){var r={},t=fs.readdirSync(e);return t.forEach(function(t){".js"===t.substr(-3)&&(t=t.substr(0,t.length-3)),r[t]=require(path.resolve(e,t))}),r},utile.requireDirLazy=function(e){var r={},t=fs.readdirSync(e);return t.forEach(function(t){".js"===t.substr(-3)&&(t=t.substr(0,t.length-3)),Object.defineProperty(r,t,{get:function(){return r[t]=require(path.resolve(e,t))}})}),r},utile.clone=function(e,r){return Object.keys(e).reduce(r?function(t,n){return r(n)&&(t[n]=e[n]),t}:function(r,t){return r[t]=e[t],r},{})},utile.camelToUnderscore=function(e){return"object"!=typeof e||null===e?e:Array.isArray(e)?(e.forEach(utile.camelToUnderscore),e):(Object.keys(e).forEach(function(r){var t=utile.inflect.underscore(r);t!==r&&(e[t]=e[r],delete e[r],r=t),utile.camelToUnderscore(e[r])}),e)},utile.underscoreToCamel=function(e){return"object"!=typeof e||null===e?e:Array.isArray(e)?(e.forEach(utile.underscoreToCamel),e):(Object.keys(e).forEach(function(r){var t=utile.inflect.camelize(r,!1);t!==r&&(e[t]=e[r],delete e[r],r=t),utile.underscoreToCamel(e[r])}),e)};
},{"./args":138,"./base64":139,"./file":140,"./format":141,"async":90,"deep-equal":143,"fs":91,"i":147,"mkdirp":152,"ncp":153,"path":107,"rimraf":154,"util":124}],143:[function(require,module,exports){
function isUndefinedOrNull(e){return null===e||void 0===e}function isBuffer(e){return e&&"object"==typeof e&&"number"==typeof e.length?"function"!=typeof e.copy||"function"!=typeof e.slice?!1:e.length>0&&"number"!=typeof e[0]?!1:!0:!1}function objEquiv(e,t,r){var n,i;if(isUndefinedOrNull(e)||isUndefinedOrNull(t))return!1;if(e.prototype!==t.prototype)return!1;if(isArguments(e))return isArguments(t)?(e=pSlice.call(e),t=pSlice.call(t),deepEqual(e,t,r)):!1;if(isBuffer(e)){if(!isBuffer(t))return!1;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}try{var u=objectKeys(e),o=objectKeys(t)}catch(f){return!1}if(u.length!=o.length)return!1;for(u.sort(),o.sort(),n=u.length-1;n>=0;n--)if(u[n]!=o[n])return!1;for(n=u.length-1;n>=0;n--)if(i=u[n],!deepEqual(e[i],t[i],r))return!1;return!0}var pSlice=Array.prototype.slice,objectKeys=require("./lib/keys.js"),isArguments=require("./lib/is_arguments.js"),deepEqual=module.exports=function(e,t,r){return r||(r={}),e===t?!0:e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():"object"!=typeof e&&"object"!=typeof t?r.strict?e===t:e==t:objEquiv(e,t,r)};
},{"./lib/is_arguments.js":144,"./lib/keys.js":145}],144:[function(require,module,exports){
function supported(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function unsupported(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var supportsArgumentsClass="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();exports=module.exports=supportsArgumentsClass?supported:unsupported,exports.supported=supported,exports.unsupported=unsupported;
},{}],145:[function(require,module,exports){
function shim(e){var s=[];for(var t in e)s.push(t);return s}exports=module.exports="function"==typeof Object.keys?Object.keys:shim,exports.shim=shim;
},{}],146:[function(require,module,exports){
module.exports=function(i){i.plural(/$/,"s"),i.plural(/s$/i,"s"),i.plural(/(ax|test)is$/i,"$1es"),i.plural(/(octop|vir)us$/i,"$1i"),i.plural(/(octop|vir)i$/i,"$1i"),i.plural(/(alias|status)$/i,"$1es"),i.plural(/(bu)s$/i,"$1ses"),i.plural(/(buffal|tomat)o$/i,"$1oes"),i.plural(/([ti])um$/i,"$1a"),i.plural(/([ti])a$/i,"$1a"),i.plural(/sis$/i,"ses"),i.plural(/(?:([^f])fe|([lr])f)$/i,"$1ves"),i.plural(/(hive)$/i,"$1s"),i.plural(/([^aeiouy]|qu)y$/i,"$1ies"),i.plural(/(x|ch|ss|sh)$/i,"$1es"),i.plural(/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"),i.plural(/([m|l])ouse$/i,"$1ice"),i.plural(/([m|l])ice$/i,"$1ice"),i.plural(/^(ox)$/i,"$1en"),i.plural(/^(oxen)$/i,"$1"),i.plural(/(quiz)$/i,"$1zes"),i.singular(/s$/i,""),i.singular(/(n)ews$/i,"$1ews"),i.singular(/([ti])a$/i,"$1um"),i.singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,"$1sis"),i.singular(/(^analy)ses$/i,"$1sis"),i.singular(/([^f])ves$/i,"$1fe"),i.singular(/(hive)s$/i,"$1"),i.singular(/(tive)s$/i,"$1"),i.singular(/([lr])ves$/i,"$1f"),i.singular(/([^aeiouy]|qu)ies$/i,"$1y"),i.singular(/(s)eries$/i,"$1eries"),i.singular(/(m)ovies$/i,"$1ovie"),i.singular(/(x|ch|ss|sh)es$/i,"$1"),i.singular(/([m|l])ice$/i,"$1ouse"),i.singular(/(bus)es$/i,"$1"),i.singular(/(o)es$/i,"$1"),i.singular(/(shoe)s$/i,"$1"),i.singular(/(cris|ax|test)es$/i,"$1is"),i.singular(/(octop|vir)i$/i,"$1us"),i.singular(/(alias|status)es$/i,"$1"),i.singular(/^(ox)en/i,"$1"),i.singular(/(vert|ind)ices$/i,"$1ex"),i.singular(/(matr)ices$/i,"$1ix"),i.singular(/(quiz)zes$/i,"$1"),i.singular(/(database)s$/i,"$1"),i.irregular("child","children"),i.irregular("person","people"),i.irregular("man","men"),i.irregular("child","children"),i.irregular("sex","sexes"),i.irregular("move","moves"),i.irregular("cow","kine"),i.irregular("zombie","zombies"),i.uncountable(["equipment","information","rice","money","species","series","fish","sheep","jeans"])};
},{}],147:[function(require,module,exports){
module.exports=function(e){var r=require("./methods");return e&&require("./native")(r),r};
},{"./methods":149,"./native":150}],148:[function(require,module,exports){
var util=require("./util"),Inflections=function(){return this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[],require("./defaults")(this),this};Inflections.prototype.plural=function(s,t){"string"==typeof s&&(this.uncountables=util.array.del(this.uncountables,s)),this.uncountables=util.array.del(this.uncountables,t),this.plurals.unshift([s,t])},Inflections.prototype.singular=function(s,t){"string"==typeof s&&(this.uncountables=util.array.del(this.uncountables,s)),this.uncountables=util.array.del(this.uncountables,t),this.singulars.unshift([s,t])},Inflections.prototype.irregular=function(s,t){this.uncountables=util.array.del(this.uncountables,s),this.uncountables=util.array.del(this.uncountables,t),s[0].toUpperCase()==t[0].toUpperCase()?(this.plural(new RegExp("("+s[0]+")"+s.slice(1)+"$","i"),"$1"+t.slice(1)),this.plural(new RegExp("("+t[0]+")"+t.slice(1)+"$","i"),"$1"+t.slice(1)),this.singular(new RegExp("("+t[0]+")"+t.slice(1)+"$","i"),"$1"+s.slice(1))):(this.plural(new RegExp(""+s[0].toUpperCase()+s.slice(1)+"$"),t[0].toUpperCase()+t.slice(1)),this.plural(new RegExp(""+s[0].toLowerCase()+s.slice(1)+"$"),t[0].toLowerCase()+t.slice(1)),this.plural(new RegExp(""+t[0].toUpperCase()+t.slice(1)+"$"),t[0].toUpperCase()+t.slice(1)),this.plural(new RegExp(""+t[0].toLowerCase()+t.slice(1)+"$"),t[0].toLowerCase()+t.slice(1)),this.singular(new RegExp(""+t[0].toUpperCase()+t.slice(1)+"$"),s[0].toUpperCase()+s.slice(1)),this.singular(new RegExp(""+t[0].toLowerCase()+t.slice(1)+"$"),s[0].toLowerCase()+s.slice(1)))},Inflections.prototype.human=function(s,t){this.humans.unshift([s,t])},Inflections.prototype.uncountable=function(s){this.uncountables=this.uncountables.concat(s)},Inflections.prototype.clear=function(s){switch(null==s&&(s="all"),s){case"all":this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[];default:this[s]=[]}},Inflections.prototype.default=function(){return this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[],require("./defaults")(this),this},module.exports=new Inflections;
},{"./defaults":146,"./util":151}],149:[function(require,module,exports){
var util=require("./util"),inflect=module.exports;inflect.inflections=require("./inflections"),inflect.inflect=function(n){n(inflect.inflections)},inflect.camelize=function(n,i){var t;return null==i&&(i=!0),t=util.string.gsub(n,/\/(.?)/,function(n){return"."+util.string.upcase(n[1])}),t=util.string.gsub(t,/(?:_)(.)/,function(n){return util.string.upcase(n[1])}),i?util.string.upcase(t):util.string.downcase(t)},inflect.underscore=function(n){var i;return i=util.string.gsub(n,/\./,"/"),i=util.string.gsub(i,/([A-Z]+)([A-Z][a-z])/,"$1_$2"),i=util.string.gsub(i,/([a-z\d])([A-Z])/,"$1_$2"),i=util.string.gsub(i,/-/,"_"),i.toLowerCase()},inflect.dasherize=function(n){return util.string.gsub(n,/_/,"-")},inflect.demodulize=function(n){return util.string.gsub(n,/^.*\./,"")},inflect.foreign_key=function(n,i){return null==i&&(i=!0),inflect.underscore(inflect.demodulize(n))+(i?"_id":"id")},inflect.ordinalize=function(n){var i;if(n=parseInt(n),11===(i=Math.abs(n)%100)||12===i||13===i)return""+n+"th";switch(Math.abs(n)%10){case 1:return""+n+"st";case 2:return""+n+"nd";case 3:return""+n+"rd";default:return""+n+"th"}},inflect.uncountability=function(n){return inflect.inflections.uncountables.some(function(i){return null!=n.match(new RegExp("(\\b|_)"+i+"$","i"))})},inflect.pluralize=function(n){var i,t;if(t=n,""===n||inflect.uncountability(n))return t;for(var e=0;e<inflect.inflections.plurals.length&&(i=inflect.inflections.plurals[e],t=util.string.gsub(t,i[0],i[1]),null==n.match(i[0]));e++);return t},inflect.singularize=function(n){var i,t;if(i=n,""===n||inflect.uncountability(n))return i;for(var e=0;e<inflect.inflections.singulars.length&&(t=inflect.inflections.singulars[e],i=util.string.gsub(i,t[0],t[1]),!n.match(t[0]));e++);return i},inflect.humanize=function(n){var i,t;t=n;for(var e=0;e<inflect.inflections.humans.length;e++)i=inflect.inflections.humans[e],t=util.string.gsub(t,i[0],i[1]);return t=util.string.gsub(t,/_id$/,""),t=util.string.gsub(t,/_/," "),util.string.capitalize(t,!0)},inflect.titleize=function(n){var i;return i=inflect.humanize(inflect.underscore(n)),i=util.string.gsub(i,/[^a-zA-Z:']/," "),util.string.capitalize(i)},inflect.tableize=function(n){return inflect.pluralize(inflect.underscore(n))},inflect.classify=function(n){return inflect.camelize(inflect.singularize(util.string.gsub(n,/.*\./,"")))};
},{"./inflections":148,"./util":151}],150:[function(require,module,exports){
module.exports=function(e){var t=function(e,t){String.prototype.__defineGetter__(e,t)},o=["__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","charAt","constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf","charCodeAt","indexOf","lastIndexof","length","localeCompare","match","replace","search","slice","split","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim","trimLeft","trimRight","gsub"];Object.keys(e).forEach(function(r){"inflect"!=r&&"inflections"!=r&&(-1!==o.indexOf(r)?console.log("warn: You should not override String.prototype."+r):t(r,function(){return e[r](this)}))})};
},{}],151:[function(require,module,exports){
var u=module.exports={array:{del:function(r,e){var n=r.indexOf(e);return-1!=n?0==n?r.slice(1):r.slice(0,n).concat(r.slice(n+1)):r},first:function(r){return r[0]},last:function(r){return r[r.length-1]}},string:{gsub:function(r,e,n){var t,s,i,o,a,c,f;if(null==e||null==n)return u.string.value(r);for(c="",f=r;f.length>0;)if(s=f.match(e)){if(c+=f.slice(0,s.index),"function"==typeof n)s[1]=s[1]||s[0],c+=n(s);else if(n.match(/\$[1-9]/)){for(o=s,i=u.array.del(s,void 0);i!==o;)o=i,i=u.array.del(i,void 0);for(s[1]=s[1]||s[0],a=n,t=1;9>=t;t++)i[t]&&(a=u.string.gsub(a,new RegExp("\\$"+t),i[t]));c+=a}else c+=n;f=f.slice(s.index+s[0].length)}else c+=f,f="";return c},upcase:function(r){var e=u.string.gsub(r,/_([a-z])/,function(r){return"_"+r[1].toUpperCase()});return e=u.string.gsub(e,/\/([a-z])/,function(r){return"/"+r[1].toUpperCase()}),e[0].toUpperCase()+e.substr(1)},capitalize:function(r,e){var n=r.toLowerCase();return e||(n=u.string.gsub(n,/\s([a-z])/,function(r){return" "+r[1].toUpperCase()})),n[0].toUpperCase()+n.substr(1)},downcase:function(r){var e=u.string.gsub(r,/_([A-Z])/,function(r){return"_"+r[1].toLowerCase()});return e=u.string.gsub(e,/\/([A-Z])/,function(r){return"/"+r[1].toLowerCase()}),e[0].toLowerCase()+e.substr(1)},value:function(r){return r.substr(0)}}};
},{}],152:[function(require,module,exports){
(function (process){
function mkdirP(r,t,e,i){"function"==typeof t?(e=t,t={}):t&&"object"==typeof t||(t={mode:t});var o=t.mode,c=t.fs||fs;void 0===o&&(o=511&~process.umask()),i||(i=null);var a=e||function(){};r=path.resolve(r),c.mkdir(r,o,function(e){if(!e)return i=i||r,a(null,i);switch(e.code){case"ENOENT":mkdirP(path.dirname(r),t,function(e,i){e?a(e,i):mkdirP(r,t,a,i)});break;default:c.stat(r,function(r,t){r||!t.isDirectory()?a(e,i):a(null,i)})}})}var path=require("path"),fs=require("fs");module.exports=mkdirP.mkdirp=mkdirP.mkdirP=mkdirP,mkdirP.sync=function r(t,e,i){e&&"object"==typeof e||(e={mode:e});var o=e.mode,c=e.fs||fs;void 0===o&&(o=511&~process.umask()),i||(i=null),t=path.resolve(t);try{c.mkdirSync(t,o),i=i||t}catch(a){switch(a.code){case"ENOENT":i=r(path.dirname(t),e,i),r(t,e,i);break;default:var n;try{n=c.statSync(t)}catch(d){throw a}if(!n.isDirectory())throw a}}return i};
}).call(this,require("FWaASH"))
},{"FWaASH":108,"fs":91,"path":107}],153:[function(require,module,exports){
(function (process){
function ncp(n,e,t,r){function i(n){if(N++,w)if(w instanceof RegExp){if(!w.test(n))return y(!0)}else if("function"==typeof w&&!w(n))return y(!0);return u(n)}function o(n){return"function"==typeof setImmediate?setImmediate(n):process.nextTick(n)}function u(n){return R>=T?o(function(){u(n)}):(R++,void fs.lstat(n,function(e,t){var r={};return e?h(e):(r.name=n,r.mode=t.mode,t.isDirectory()?s(r):t.isFile()?f(r):t.isSymbolicLink()?p(n):void 0)}))}function f(n){var e=n.name.replace(S,b);k(e,function(t){return t?c(n,e):void(q&&a(e,function(){c(n,e)}))})}function c(n,e){var t=fs.createReadStream(n.name),r=fs.createWriteStream(e,{mode:n.mode});x?x(t,r,n):t.pipe(r),t.once("end",y)}function a(n,e){fs.unlink(n,function(n){return n?h(n):e()})}function s(n){var e=n.name.replace(S,b);k(e,function(t){return t?d(n,e):void m(n.name)})}function d(n,e){fs.mkdir(e,n.mode,function(e){return e?h(e):void m(n.name)})}function m(n){fs.readdir(n,function(e,t){return e?h(e):(t.forEach(function(e){i(n+"/"+e)}),y())})}function p(n){var e=n.replace(S,b);fs.readlink(n,function(n,t){return n?h(n):void l(t,e)})}function l(n,e){k(e,function(t){return t?v(n,e):void fs.readlink(e,function(t,r){return t?h(t):r===n?y():a(e,function(){v(n,e)})})})}function v(n,e){fs.symlink(n,e,function(n){return n?h(n):y()})}function k(n,e){fs.lstat(n,function(n){return e(n?"ENOENT"===n.code?!0:!1:!1)})}function h(n){return t.stopOnError?r(n):(!I&&t.errs?I=fs.createWriteStream(t.errs):I||(I=[]),"undefined"==typeof I.write?I.push(n):I.write(n.stack+"\n\n"),y())}function y(n){return n||R--,O++,N===O&&0===R?r(I?I:null):void 0}r||(r=t,t={});var E=process.cwd(),S=path.resolve(E,n),b=path.resolve(E,e),w=t.filter,x=t.transform,q=t.clobber!==!1,I=null,N=0,O=0,R=0,T=t.limit||ncp.limit||16;T=1>T?1:T>512?512:T,i(S)}var fs=require("fs"),path=require("path");module.exports=ncp,ncp.ncp=ncp;
}).call(this,require("FWaASH"))
},{"FWaASH":108,"fs":91,"path":107}],154:[function(require,module,exports){
(function (process){
function defaults(r){var t=["unlink","chmod","stat","rmdir","readdir"];t.forEach(function(t){r[t]=r[t]||fs[t],t+="Sync",r[t]=r[t]||fs[t]})}function rimraf(r,t,n){if("function"==typeof t&&(n=t,t={}),assert(r),assert(t),assert("function"==typeof n),defaults(t),!n)throw new Error("No callback passed to rimraf()");var i=0;rimraf_(r,t,function e(o){if(o){if(isWindows&&("EBUSY"===o.code||"ENOTEMPTY"===o.code)&&i<exports.BUSYTRIES_MAX){i++;var s=100*i;return setTimeout(function(){rimraf_(r,t,e)},s)}if("EMFILE"===o.code&&timeout<exports.EMFILE_MAX)return setTimeout(function(){rimraf_(r,t,e)},timeout++);"ENOENT"===o.code&&(o=null)}timeout=0,n(o)})}function rimraf_(r,t,n){assert(r),assert(t),assert("function"==typeof n),t.unlink(r,function(i){if(i){if("ENOENT"===i.code)return n(null);if("EPERM"===i.code)return isWindows?fixWinEPERM(r,t,i,n):rmdir(r,t,i,n);if("EISDIR"===i.code)return rmdir(r,t,i,n)}return n(i)})}function fixWinEPERM(r,t,n,i){assert(r),assert(t),assert("function"==typeof i),n&&assert(n instanceof Error),t.chmod(r,666,function(e){e?i("ENOENT"===e.code?null:n):t.stat(r,function(e,o){e?i("ENOENT"===e.code?null:n):o.isDirectory()?rmdir(r,t,n,i):t.unlink(r,i)})})}function fixWinEPERMSync(r,t,n){assert(r),assert(t),n&&assert(n instanceof Error);try{t.chmodSync(r,666)}catch(i){if("ENOENT"===i.code)return;throw n}try{var e=t.statSync(r)}catch(o){if("ENOENT"===o.code)return;throw n}e.isDirectory()?rmdirSync(r,t,n):t.unlinkSync(r)}function rmdir(r,t,n,i){assert(r),assert(t),n&&assert(n instanceof Error),assert("function"==typeof i),t.rmdir(r,function(e){!e||"ENOTEMPTY"!==e.code&&"EEXIST"!==e.code&&"EPERM"!==e.code?i(e&&"ENOTDIR"===e.code?n:e):rmkids(r,t,i)})}function rmkids(r,t,n){assert(r),assert(t),assert("function"==typeof n),t.readdir(r,function(i,e){if(i)return n(i);var o=e.length;if(0===o)return t.rmdir(r,n);var s;e.forEach(function(i){rimraf(path.join(r,i),t,function(i){return s?void 0:i?n(s=i):void(0===--o&&t.rmdir(r,n))})})})}function rimrafSync(r,t){t=t||{},defaults(t),assert(r),assert(t);try{t.unlinkSync(r)}catch(n){if("ENOENT"===n.code)return;if("EPERM"===n.code)return isWindows?fixWinEPERMSync(r,t,n):rmdirSync(r,t,n);if("EISDIR"!==n.code)throw n;rmdirSync(r,t,n)}}function rmdirSync(r,t,n){assert(r),assert(t),n&&assert(n instanceof Error);try{t.rmdirSync(r)}catch(i){if("ENOENT"===i.code)return;if("ENOTDIR"===i.code)throw n;("ENOTEMPTY"===i.code||"EEXIST"===i.code||"EPERM"===i.code)&&rmkidsSync(r,t)}}function rmkidsSync(r,t){assert(r),assert(t),t.readdirSync(r).forEach(function(n){rimrafSync(path.join(r,n),t)}),t.rmdirSync(r,t)}module.exports=rimraf,rimraf.sync=rimrafSync;var assert=require("assert"),path=require("path"),fs=require("fs"),timeout=0;exports.EMFILE_MAX=1e3,exports.BUSYTRIES_MAX=3;var isWindows="win32"===process.platform;
}).call(this,require("FWaASH"))
},{"FWaASH":108,"assert":92,"fs":91,"path":107}],155:[function(require,module,exports){
var winston=exports;require("pkginfo")(module,"version"),winston.transports=require("./winston/transports");var common=require("./winston/common");winston.hash=common.hash,winston.clone=common.clone,winston.longestElement=common.longestElement,winston.exception=require("./winston/exception"),winston.config=require("./winston/config"),winston.addColors=winston.config.addColors,winston.Container=require("./winston/container").Container,winston.Logger=require("./winston/logger").Logger,winston.Transport=require("./winston/transports/transport").Transport,winston.loggers=new winston.Container;var defaultLogger=new winston.Logger({transports:[new winston.transports.Console]}),methods=["log","query","stream","add","remove","profile","startTimer","extend","cli","handleExceptions","unhandleExceptions"];common.setLevels(winston,null,defaultLogger.levels),methods.forEach(function(n){winston[n]=function(){return defaultLogger[n].apply(defaultLogger,arguments)}}),winston.cli=function(){return winston.padLevels=!0,common.setLevels(winston,defaultLogger.levels,winston.config.cli.levels),defaultLogger.setLevels(winston.config.cli.levels),winston.config.addColors(winston.config.cli.colors),defaultLogger.transports.console&&(defaultLogger.transports.console.colorize=!0,defaultLogger.transports.console.timestamp=!1),winston},winston.setLevels=function(n){common.setLevels(winston,defaultLogger.levels,n),defaultLogger.setLevels(n)},["emitErrs","exitOnError","padLevels","level","levelLength","stripColors"].forEach(function(n){Object.defineProperty(winston,n,{get:function(){return defaultLogger[n]},set:function(e){defaultLogger[n]=e}})}),Object.defineProperty(winston,"default",{get:function(){return{transports:defaultLogger.transports,exceptionHandlers:defaultLogger.exceptionHandlers}}});
},{"./winston/common":156,"./winston/config":157,"./winston/container":161,"./winston/exception":162,"./winston/logger":163,"./winston/transports":164,"./winston/transports/transport":165,"pkginfo":170}],156:[function(require,module,exports){
(function (Buffer){
var util=require("util"),crypto=require("crypto"),cycle=require("cycle"),config=require("./config");exports.setLevels=function(e,t,n){return t&&Object.keys(t).forEach(function(t){delete e[t]}),e.levels=n||config.npm.levels,e.padLevels&&(e.levelLength=exports.longestElement(Object.keys(e.levels))),Object.keys(e.levels).forEach(function(t){e[t]=function(n){var r=Array.prototype.slice.call(arguments),o="function"!=typeof r[r.length-1]&&r[r.length-1]?null:r.pop(),l=2===r.length?r.pop():null;return e.log(t,n,l,o)}}),e},exports.longestElement=function(e){return Math.max.apply(null,e.map(function(e){return e.length}))},exports.clone=function(e){if(!(e instanceof Object))return e;if(e instanceof Date)return e;var t={};for(var n in e)Array.isArray(e[n])?t[n]=e[n].slice(0):e[n]instanceof Buffer?t[n]=e[n].slice(0):"function"!=typeof e[n]&&(t[n]=e[n]instanceof Object?exports.clone(e[n]):e[n]);return t},exports.log=function(e){var t,n="function"==typeof e.timestamp?e.timestamp:exports.timestamp,r=e.timestamp?n():null,o=e.meta?exports.clone(cycle.decycle(e.meta)):null;return e.raw?("object"!=typeof o&&null!=o&&(o={meta:o}),t=exports.clone(o)||{},t.level=e.level,t.message=e.message.stripColors,JSON.stringify(t)):e.json?("object"!=typeof o&&null!=o&&(o={meta:o}),t=exports.clone(o)||{},t.level=e.level,t.message=e.message,r&&(t.timestamp=r),"function"==typeof e.stringify?e.stringify(t):JSON.stringify(t,function(e,t){return t instanceof Buffer?t.toString("base64"):t})):(t=r?r+" - ":"",t+=e.colorize?config.colorize(e.level):e.level,t+=": "+e.message,o&&("object"!=typeof o?t+=" "+o:Object.keys(o).length>0&&(t+=" "+(e.prettyPrint?"\n"+util.inspect(o,!1,null,e.colorize):exports.serialize(o)))),t)},exports.capitalize=function(e){return e&&e[0].toUpperCase()+e.slice(1)},exports.hash=function(e){return crypto.createHash("sha1").update(e).digest("hex")},exports.pad=function(e){return 10>e?"0"+e.toString(10):e.toString(10)},exports.timestamp=function(){return(new Date).toISOString()},exports.serialize=function(e,t){if(null===e?e="null":void 0===e?e="undefined":e===!1&&(e="false"),"object"!=typeof e)return t?t+"="+e:e;if(e instanceof Buffer)return t?t+"="+e.toString("base64"):e.toString("base64");for(var n="",r=Object.keys(e),o=r.length,l=0;o>l;l++){if(Array.isArray(e[r[l]])){n+=r[l]+"=[";for(var i=0,s=e[r[l]].length;s>i;i++)n+=exports.serialize(e[r[l]][i]),s-1>i&&(n+=", ");n+="]"}else n+=e[r[l]]instanceof Date?r[l]+"="+e[r[l]]:exports.serialize(e[r[l]],r[l]);o-1>l&&(n+=", ")}return n};
}).call(this,require("buffer").Buffer)
},{"./config":157,"buffer":95,"crypto":99,"cycle":169,"util":124}],157:[function(require,module,exports){
function mixin(o){var r=Array.prototype.slice.call(arguments,1);return r.forEach(function(r){for(var n=Object.keys(r),i=0;i<n.length;i++)o[n[i]]=r[n[i]]}),o}var colors=require("colors"),config=exports,allColors=exports.allColors={};config.addColors=function(o){mixin(allColors,o)},config.colorize=function(o){return o[allColors[o]]},config.cli=require("./config/cli-config"),config.npm=require("./config/npm-config"),config.syslog=require("./config/syslog-config"),config.addColors(config.npm.colors),config.addColors(config.syslog.colors);
},{"./config/cli-config":158,"./config/npm-config":159,"./config/syslog-config":160,"colors":168}],158:[function(require,module,exports){
var cliConfig=exports;cliConfig.levels={silly:0,input:1,verbose:2,prompt:3,info:4,data:5,help:6,warn:7,debug:8,error:9},cliConfig.colors={silly:"magenta",input:"grey",verbose:"cyan",prompt:"grey",info:"green",data:"grey",help:"cyan",warn:"yellow",debug:"blue",error:"red"};
},{}],159:[function(require,module,exports){
var npmConfig=exports;npmConfig.levels={silly:0,verbose:1,info:2,warn:3,debug:4,error:5},npmConfig.colors={silly:"magenta",verbose:"cyan",info:"green",warn:"yellow",debug:"blue",error:"red"};
},{}],160:[function(require,module,exports){
var syslogConfig=exports;syslogConfig.levels={debug:0,info:1,notice:2,warning:3,error:4,crit:5,alert:6,emerg:7},syslogConfig.colors={debug:"blue",info:"green",notice:"yellow",warning:"red",error:"red",crit:"red",alert:"yellow",emerg:"red"};
},{}],161:[function(require,module,exports){
var common=require("./common"),winston=require("../winston"),Container=exports.Container=function(t){this.loggers={},this.options=t||{},this.default={transports:[new winston.transports.Console({level:"silly",colorize:!1})]}};Container.prototype.get=Container.prototype.add=function(t,o){return this.loggers[t]||(o=common.clone(o||this.options||this.default),o.transports=o.transports||[],0!==o.transports.length||o&&o.console||o.transports.push(this.default.transports[0]),Object.keys(o).forEach(function(n){if("transports"!==n){var r=common.capitalize(n);if(!winston.transports[r])throw new Error("Cannot add unknown transport: "+r);var s=o[n];s.id=t,o.transports.push(new winston.transports[r](s))}}),this.loggers[t]=new winston.Logger(o)),this.loggers[t]},Container.prototype.has=function(t){return!!this.loggers[t]},Container.prototype.close=function(t){function o(t){n.loggers[t]&&(n.loggers[t].close(),delete n.loggers[t])}var n=this;return t?o(t):Object.keys(this.loggers).forEach(function(t){o(t)})};
},{"../winston":155,"./common":156}],162:[function(require,module,exports){
(function (process){
var os=require("os"),stackTrace=require("stack-trace"),exception=exports;exception.getAllInfo=function(e){return{date:(new Date).toString(),process:exception.getProcessInfo(),os:exception.getOsInfo(),trace:exception.getTrace(e),stack:e.stack&&e.stack.split("\n")}},exception.getProcessInfo=function(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}},exception.getOsInfo=function(){return{loadavg:os.loadavg(),uptime:os.uptime()}},exception.getTrace=function(e){var t=e?stackTrace.parse(e):stackTrace.get();return t.map(function(e){return{column:e.getColumnNumber(),file:e.getFileName(),"function":e.getFunctionName(),line:e.getLineNumber(),method:e.getMethodName(),"native":e.isNative()}})};
}).call(this,require("FWaASH"))
},{"FWaASH":108,"os":106,"stack-trace":171}],163:[function(require,module,exports){
(function (process){
var events=require("events"),util=require("util"),async=require("async"),config=require("./config"),common=require("./common"),exception=require("./exception"),Stream=require("stream").Stream,ticksPerMillisecond=1e4,Logger=exports.Logger=function(t){events.EventEmitter.call(this),t=t||{};var e=this,r=!1;this.padLevels=t.padLevels||!1,this.setLevels(t.levels),t.colors&&config.addColors(t.colors),this.level=t.level||"info",this.emitErrs=t.emitErrs||!1,this.stripColors=t.stripColors||!1,this.exitOnError="undefined"!=typeof t.exitOnError?t.exitOnError:!0,this.transports={},this.rewriters=[],this.exceptionHandlers={},this.profilers={},this._names=[],this._hnames=[],t.transports&&t.transports.forEach(function(t){e.add(t,null,!0),t.handleExceptions&&(r=!0)}),t.rewriters&&t.rewriters.forEach(function(t){e.addRewriter(t)}),t.exceptionHandlers&&(r=!0,t.exceptionHandlers.forEach(function(t){e._hnames.push(t.name),e.exceptionHandlers[t.name]=t})),(t.handleExceptions||r)&&this.handleExceptions()};util.inherits(Logger,events.EventEmitter),Logger.prototype.extend=function(t){var e=this;return["log","profile","startTimer"].concat(Object.keys(this.levels)).forEach(function(r){t[r]=function(){return e[r].apply(e,arguments)}}),this},Logger.prototype.log=function(t,e){function r(t){s?s(t):a.emitErrs&&a.emit("error",t)}function n(r,n){var s=a.transports[r];s.level&&a.levels[s.level]<=a.levels[t]||!s.level&&a.levels[a.level]<=a.levels[t]?s.log(t,e,i,function(r){return r?(r.transport=s,o(r),n()):(a.emit("logging",s,t,e,i),void n())}):n()}function o(r){if(s){if(r)return s(r);s(null,t,e,i)}s=null}var s,i,a=this;if(3===arguments.length?"function"==typeof arguments[2]?(i={},s=arguments[2]):"object"==typeof arguments[2]&&(i=arguments[2]):4===arguments.length&&(i=arguments[2],s=arguments[3]),this.padLevels&&(e=new Array(this.levelLength-t.length+1).join(" ")+e),0===this.transports.length)return r(new Error("Cannot log with no transports."));if("undefined"==typeof a.levels[t])return r(new Error("Unknown log level: "+t));if(this.rewriters.forEach(function(r){i=r(t,e,i)}),this.stripColors){var c=/\u001b\[(\d+(;\d+)*)?m/g;e=(""+e).replace(c,"")}return async.forEach(this._names,n,o),this},Logger.prototype.query=function(t,e){function r(e,r){t.query&&(t.query=e.formatQuery(a)),e.query(t,function(n,o){return n?r(n):void r(null,e.formatResults(o,t.format))})}function n(t,e){r(t,function(r,n){n=r||n,n&&(i[t.name]=n),e()})}"function"==typeof t&&(e=t,t={});var o,s=this,t=t||{},i={},a=common.clone(t.query)||{};return t.transport?(t.transport=t.transport.toLowerCase(),r(this.transports[t.transport],e)):(o=this._names.map(function(t){return s.transports[t]}).filter(function(t){return!!t.query}),void async.forEach(o,n,function(){e(null,i)}))},Logger.prototype.stream=function(t){var e,r=this,t=t||{},n=new Stream,o=[];if(t.transport){var s=this.transports[t.transport];if(delete t.transport,s&&s.stream)return s.stream(t)}return n._streams=o,n.destroy=function(){for(var t=o.length;t--;)o[t].destroy()},e=this._names.map(function(t){return r.transports[t]}).filter(function(t){return!!t.stream}),e.forEach(function(e){var r=e.stream(t);r&&(o.push(r),r.on("log",function(t){t.transport=t.transport||[],t.transport.push(e.name),n.emit("log",t)}),r.on("error",function(t){t.transport=t.transport||[],t.transport.push(e.name),n.emit("error",t)}))}),n},Logger.prototype.close=function(){var t=this;this._names.forEach(function(e){var r=t.transports[e];r&&r.close&&r.close()})},Logger.prototype.handleExceptions=function(){var t=Array.prototype.slice.call(arguments),e=[],r=this;t.forEach(function(t){Array.isArray(t)?e=e.concat(t):e.push(t)}),e.forEach(function(t){r.exceptionHandlers[t.name]=t}),this._hnames=Object.keys(r.exceptionHandlers),this.catchExceptions||(this.catchExceptions=this._uncaughtException.bind(this),process.on("uncaughtException",this.catchExceptions))},Logger.prototype.unhandleExceptions=function(){var t=this;this.catchExceptions&&(Object.keys(this.exceptionHandlers).forEach(function(){handler.close&&handler.close()}),this.exceptionHandlers={},Object.keys(this.transports).forEach(function(e){var r=t.transports[e];r.handleExceptions&&(r.handleExceptions=!1)}),process.removeListener("uncaughtException",this.catchExceptions),this.catchExceptions=!1)},Logger.prototype.add=function(t,e,r){var n=r?t:new t(e);if(!n.name&&!n.log)throw new Error("Unknown transport with no log() method");if(this.transports[n.name])throw new Error("Transport already attached: "+n.name);return this.transports[n.name]=n,this._names=Object.keys(this.transports),n._onError=this._onError.bind(this,n),n.on("error",n._onError),n.handleExceptions&&!this.catchExceptions&&this.handleExceptions(),this},Logger.prototype.addRewriter=function(t){this.rewriters.push(t)},Logger.prototype.clear=function(){for(var t in this.transports)this.remove({name:t})},Logger.prototype.remove=function(t){var e=t.name||t.prototype.name;if(!this.transports[e])throw new Error("Transport "+e+" not attached to this instance");var r=this.transports[e];return delete this.transports[e],this._names=Object.keys(this.transports),r.close&&r.close(),r.removeListener("error",r._onError),this};var ProfileHandler=function(t){this.logger=t,this.start=Date.now(),this.done=function(t){var e,r,n;return e=Array.prototype.slice.call(arguments),r="function"==typeof e[e.length-1]?e.pop():null,n="object"==typeof e[e.length-1]?e.pop():{},n.duration=Date.now()-this.start+"ms",this.logger.info(t,n,r)}};Logger.prototype.startTimer=function(){return new ProfileHandler(this)},Logger.prototype.profile=function(t){var e,r,n,o,s,i=Date.now();return this.profilers[t]?(e=this.profilers[t],delete this.profilers[t],r=Array.prototype.slice.call(arguments),s="function"==typeof r[r.length-1]?r.pop():null,o="object"==typeof r[r.length-1]?r.pop():{},n=2===r.length?r[1]:t,o.duration=i-e+"ms",this.info(n,o,s)):(this.profilers[t]=i,this)},Logger.prototype.setLevels=function(t){return common.setLevels(this,this.levels,t)},Logger.prototype.cli=function(){return this.padLevels=!0,this.setLevels(config.cli.levels),config.addColors(config.cli.colors),this.transports.console&&(this.transports.console.colorize=!0,this.transports.console.timestamp=!1),this},Logger.prototype._uncaughtException=function(t){function e(e,r){e.logException("uncaughtException",i,r,t)}function r(){o&&!s&&(clearTimeout(n),s=!0,process.exit(1))}var n,o,s=!1,i=exception.getAllInfo(t),a=this._getExceptionHandlers();return o="function"==typeof this.exitOnError?this.exitOnError(t):this.exitOnError,a&&0!==a.length?(async.forEach(a,e,r),void(o&&(n=setTimeout(r,3e3)))):r()},Logger.prototype._getExceptionHandlers=function(){var t=this;return this._hnames.map(function(e){return t.exceptionHandlers[e]}).concat(this._names.map(function(e){return t.transports[e].handleExceptions&&t.transports[e]})).filter(Boolean)},Logger.prototype._onError=function(t,e){this.emitErrs&&this.emit("error",e,t)};
}).call(this,require("FWaASH"))
},{"./common":156,"./config":157,"./exception":162,"FWaASH":108,"async":166,"events":104,"stream":122,"util":124}],164:[function(require,module,exports){
(function (__dirname){
var fs=require("fs"),path=require("path"),common=require("./common"),transports=exports;fs.readdirSync(path.join(__dirname,"transports")).forEach(function(r){var t=r.replace(".js",""),e=common.capitalize(t);"transport"!==t&&transports.__defineGetter__(e,function(){return require("./transports/"+t)[e]})});
}).call(this,"/node_modules/prompt/node_modules/winston/lib/winston")
},{"./common":156,"fs":91,"path":107}],165:[function(require,module,exports){
var events=require("events"),util=require("util"),Transport=exports.Transport=function(t){events.EventEmitter.call(this),t=t||{},this.level=t.level||"info",this.silent=t.silent||!1,this.raw=t.raw||!1,this.handleExceptions=t.handleExceptions||!1};util.inherits(Transport,events.EventEmitter),Transport.prototype.formatQuery=function(t){return t},Transport.prototype.normalizeQuery=function(t){return t=t||{},t.rows=t.rows||t.limit||10,t.start=t.start||0,t.from=t.from||new Date-864e5,"object"!=typeof t.from&&(t.from=new Date(t.from)),t.until=t.until||new Date,"object"!=typeof t.until&&(t.until=new Date(t.until)),t.order=t.order||"desc",t.fields=t.fields,t},Transport.prototype.formatResults=function(t){return t},Transport.prototype.logException=function(t,e,r){function n(){i.removeListener("error",o),r()}function o(){i.removeListener("logged",n),r()}var i=this;this.once("logged",n),this.once("error",o),this.log("error",t,e,function(){})};
},{"events":104,"util":124}],166:[function(require,module,exports){
module.exports=require("./lib/async");
},{"./lib/async":167}],167:[function(require,module,exports){
(function (process){
!function(){var n={},t=this,r=t.async;"undefined"!=typeof module&&module.exports?module.exports=n:t.async=n,n.noConflict=function(){return t.async=r,n};var e=function(n,t){if(n.forEach)return n.forEach(t);for(var r=0;r<n.length;r+=1)t(n[r],r,n)},u=function(n,t){if(n.map)return n.map(t);var r=[];return e(n,function(n,e,u){r.push(t(n,e,u))}),r},c=function(n,t,r){return n.reduce?n.reduce(t,r):(e(n,function(n,e,u){r=t(r,n,e,u)}),r)},o=function(n){if(Object.keys)return Object.keys(n);var t=[];for(var r in n)n.hasOwnProperty(r)&&t.push(r);return t};n.nextTick="undefined"!=typeof process&&process.nextTick?process.nextTick:function(n){setTimeout(n,0)},n.forEach=function(n,t,r){if(r=r||function(){},!n.length)return r();var u=0;e(n,function(e){t(e,function(t){t?(r(t),r=function(){}):(u+=1,u===n.length&&r(null))})})},n.forEachSeries=function(n,t,r){if(r=r||function(){},!n.length)return r();var e=0,u=function(){t(n[e],function(t){t?(r(t),r=function(){}):(e+=1,e===n.length?r(null):u())})};u()},n.forEachLimit=function(n,t,r,e){if(e=e||function(){},!n.length||0>=t)return e();var u=0,c=0,o=0;!function i(){if(u===n.length)return e();for(;t>o&&c<n.length;)c+=1,o+=1,r(n[c-1],function(t){t?(e(t),e=function(){}):(u+=1,o-=1,u===n.length?e():i())})}()};var i=function(t){return function(){var r=Array.prototype.slice.call(arguments);return t.apply(null,[n.forEach].concat(r))}},a=function(t){return function(){var r=Array.prototype.slice.call(arguments);return t.apply(null,[n.forEachSeries].concat(r))}},f=function(n,t,r,e){var c=[];t=u(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){r(n.value,function(r,e){c[n.index]=e,t(r)})},function(n){e(n,c)})};n.map=i(f),n.mapSeries=a(f),n.reduce=function(t,r,e,u){n.forEachSeries(t,function(n,t){e(r,n,function(n,e){r=e,t(n)})},function(n){u(n,r)})},n.inject=n.reduce,n.foldl=n.reduce,n.reduceRight=function(t,r,e,c){var o=u(t,function(n){return n}).reverse();n.reduce(o,r,e,c)},n.foldr=n.reduceRight;var l=function(n,t,r,e){var c=[];t=u(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){r(n.value,function(r){r&&c.push(n),t()})},function(){e(u(c.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};n.filter=i(l),n.filterSeries=a(l),n.select=n.filter,n.selectSeries=n.filterSeries;var s=function(n,t,r,e){var c=[];t=u(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){r(n.value,function(r){r||c.push(n),t()})},function(){e(u(c.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};n.reject=i(s),n.rejectSeries=a(s);var p=function(n,t,r,e){n(t,function(n,t){r(n,function(r){r?(e(n),e=function(){}):t()})},function(){e()})};n.detect=i(p),n.detectSeries=a(p),n.some=function(t,r,e){n.forEach(t,function(n,t){r(n,function(n){n&&(e(!0),e=function(){}),t()})},function(){e(!1)})},n.any=n.some,n.every=function(t,r,e){n.forEach(t,function(n,t){r(n,function(n){n||(e(!1),e=function(){}),t()})},function(){e(!0)})},n.all=n.every,n.sortBy=function(t,r,e){n.map(t,function(n,t){r(n,function(r,e){r?t(r):t(null,{value:n,criteria:e})})},function(n,t){if(n)return e(n);var r=function(n,t){var r=n.criteria,e=t.criteria;return e>r?-1:r>e?1:0};e(null,u(t.sort(r),function(n){return n.value}))})},n.auto=function(n,t){t=t||function(){};var r=o(n);if(!r.length)return t(null);var u={},i=[],a=function(n){i.unshift(n)},f=function(n){for(var t=0;t<i.length;t+=1)if(i[t]===n)return void i.splice(t,1)},l=function(){e(i.slice(0),function(n){n()})};a(function(){o(u).length===r.length&&(t(null,u),t=function(){})}),e(r,function(r){var e=n[r]instanceof Function?[n[r]]:n[r],o=function(n){if(n)t(n),t=function(){};else{var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),u[r]=e,l()}},i=e.slice(0,Math.abs(e.length-1))||[],s=function(){return c(i,function(n,t){return n&&u.hasOwnProperty(t)},!0)&&!u.hasOwnProperty(r)};if(s())e[e.length-1](o,u);else{var p=function(){s()&&(f(p),e[e.length-1](o,u))};a(p)}})},n.waterfall=function(t,r){if(r=r||function(){},!t.length)return r();var e=function(t){return function(u){if(u)r(u),r=function(){};else{var c=Array.prototype.slice.call(arguments,1),o=t.next();c.push(o?e(o):r),n.nextTick(function(){t.apply(null,c)})}}};e(n.iterator(t))()},n.parallel=function(t,r){if(r=r||function(){},t.constructor===Array)n.map(t,function(n,t){n&&n(function(n){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),t.call(null,n,r)})},r);else{var e={};n.forEach(o(t),function(n,r){t[n](function(t){var u=Array.prototype.slice.call(arguments,1);u.length<=1&&(u=u[0]),e[n]=u,r(t)})},function(n){r(n,e)})}},n.series=function(t,r){if(r=r||function(){},t.constructor===Array)n.mapSeries(t,function(n,t){n&&n(function(n){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),t.call(null,n,r)})},r);else{var e={};n.forEachSeries(o(t),function(n,r){t[n](function(t){var u=Array.prototype.slice.call(arguments,1);u.length<=1&&(u=u[0]),e[n]=u,r(t)})},function(n){r(n,e)})}},n.iterator=function(n){var t=function(r){var e=function(){return n.length&&n[r].apply(null,arguments),e.next()};return e.next=function(){return r<n.length-1?t(r+1):null},e};return t(0)},n.apply=function(n){var t=Array.prototype.slice.call(arguments,1);return function(){return n.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var v=function(n,t,r,e){var u=[];n(t,function(n,t){r(n,function(n,r){u=u.concat(r||[]),t(n)})},function(n){e(n,u)})};n.concat=i(v),n.concatSeries=a(v),n.whilst=function(t,r,e){t()?r(function(u){return u?e(u):void n.whilst(t,r,e)}):e()},n.until=function(t,r,e){t()?e():r(function(u){return u?e(u):void n.until(t,r,e)})},n.queue=function(t,r){var u=0,c={tasks:[],concurrency:r,saturated:null,empty:null,drain:null,push:function(t,u){t.constructor!==Array&&(t=[t]),e(t,function(t){c.tasks.push({data:t,callback:"function"==typeof u?u:null}),c.saturated&&c.tasks.length==r&&c.saturated(),n.nextTick(c.process)})},process:function(){if(u<c.concurrency&&c.tasks.length){var n=c.tasks.shift();c.empty&&0==c.tasks.length&&c.empty(),u+=1,t(n.data,function(){u-=1,n.callback&&n.callback.apply(n,arguments),c.drain&&c.tasks.length+u==0&&c.drain(),c.process()})}},length:function(){return c.tasks.length},running:function(){return u}};return c};var y=function(n){return function(t){var r=Array.prototype.slice.call(arguments,1);t.apply(null,r.concat([function(t){var r=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[n]&&e(r,function(t){console[n](t)}))}]))}};n.log=y("log"),n.dir=y("dir"),n.memoize=function(n,t){var r={},e={};t=t||function(n){return n};var u=function(){var u=Array.prototype.slice.call(arguments),c=u.pop(),o=t.apply(null,u);o in r?c.apply(null,r[o]):o in e?e[o].push(c):(e[o]=[c],n.apply(null,u.concat([function(){r[o]=arguments;var n=e[o];delete e[o];for(var t=0,u=n.length;u>t;t++)n[t].apply(null,arguments)}])))};return u.unmemoized=n,u},n.unmemoize=function(n){return function(){return(n.unmemoized||n).apply(null,arguments)}}}();
}).call(this,require("FWaASH"))
},{"FWaASH":108}],168:[function(require,module,exports){
function stylize(e,r){var n;if("console"===exports.mode)n={bold:["[1m","[22m"],italic:["[3m","[23m"],underline:["[4m","[24m"],inverse:["[7m","[27m"],strikethrough:["[9m","[29m"],white:["[37m","[39m"],grey:["[90m","[39m"],black:["[30m","[39m"],blue:["[34m","[39m"],cyan:["[36m","[39m"],green:["[32m","[39m"],magenta:["[35m","[39m"],red:["[31m","[39m"],yellow:["[33m","[39m"],whiteBG:["[47m","[49m"],greyBG:["[49;5;8m","[49m"],blackBG:["[40m","[49m"],blueBG:["[44m","[49m"],cyanBG:["[46m","[49m"],greenBG:["[42m","[49m"],magentaBG:["[45m","[49m"],redBG:["[41m","[49m"],yellowBG:["[43m","[49m"]};else if("browser"===exports.mode)n={bold:["<b>","</b>"],italic:["<i>","</i>"],underline:["<u>","</u>"],inverse:['<span style="background-color:black;color:white;">',"</span>"],strikethrough:["<del>","</del>"],white:['<span style="color:white;">',"</span>"],grey:['<span style="color:gray;">',"</span>"],black:['<span style="color:black;">',"</span>"],blue:['<span style="color:blue;">',"</span>"],cyan:['<span style="color:cyan;">',"</span>"],green:['<span style="color:green;">',"</span>"],magenta:['<span style="color:magenta;">',"</span>"],red:['<span style="color:red;">',"</span>"],yellow:['<span style="color:yellow;">',"</span>"],whiteBG:['<span style="background-color:white;">',"</span>"],greyBG:['<span style="background-color:gray;">',"</span>"],blackBG:['<span style="background-color:black;">',"</span>"],blueBG:['<span style="background-color:blue;">',"</span>"],cyanBG:['<span style="background-color:cyan;">',"</span>"],greenBG:['<span style="background-color:green;">',"</span>"],magentaBG:['<span style="background-color:magenta;">',"</span>"],redBG:['<span style="background-color:red;">',"</span>"],yellowBG:['<span style="background-color:yellow;">',"</span>"]};else{if("none"===exports.mode)return e+"";console.log('unsupported mode, try "browser", "console" or "none"')}return n[r][0]+e+n[r][1]}function applyTheme(e){var r=["__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","charAt","constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf","charCodeAt","indexOf","lastIndexof","length","localeCompare","match","replace","search","slice","split","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim","trimLeft","trimRight"];Object.keys(e).forEach(function(n){-1!==r.indexOf(n)?console.log("warn: ".red+("String.prototype"+n).magenta+" is probably something you don't want to override. Ignoring style name"):"string"==typeof e[n]?addProperty(n,function(){return exports[e[n]](this)}):addProperty(n,function(){for(var r=this,o=0;o<e[n].length;o++)r=exports[e[n][o]](r);return r})})}function sequencer(e){return function(){if(!isHeadless)return this.replace(/( )/,"$1");var r=this.split("");return r=r.map(e),r.join("")}}function zalgo(e){function r(e){var r=Math.floor(Math.random()*e);return r}function n(e){var r=!1;return a.filter(function(n){r=n===e}),r}function o(e,o){var a,s,l="";o=o||{},o.up=o.up||!0,o.mid=o.mid||!0,o.down=o.down||!0,o.size=o.size||"maxi",e=e.split("");for(s in e)if(!n(s)){switch(l+=e[s],a={up:0,down:0,mid:0},o.size){case"mini":a.up=r(8),a.min=r(2),a.down=r(8);break;case"maxi":a.up=r(16)+3,a.min=r(4)+1,a.down=r(64)+3;break;default:a.up=r(8)+1,a.mid=r(6)/2,a.down=r(8)+1}var i=["up","mid","down"];for(var p in i)for(var c=i[p],u=0;u<=a[c];u++)o[c]&&(l+=t[c][r(t[c].length)])}return l}var t={up:["̍","̎","̄","̅","̿","̑","̆","̐","͒","͗","͑","̇","̈","̊","͂","̓","̈","͊","͋","͌","̃","̂","̌","͐","̀","́","̋","̏","̒","̓","̔","̽","̉","ͣ","ͤ","ͥ","ͦ","ͧ","ͨ","ͩ","ͪ","ͫ","ͬ","ͭ","ͮ","ͯ","̾","͛","͆","̚"],down:["̖","̗","̘","̙","̜","̝","̞","̟","̠","̤","̥","̦","̩","̪","̫","̬","̭","̮","̯","̰","̱","̲","̳","̹","̺","̻","̼","ͅ","͇","͈","͉","͍","͎","͓","͔","͕","͖","͙","͚","̣"],mid:["̕","̛","̀","́","͘","̡","̢","̧","̨","̴","̵","̶","͜","͝","͞","͟","͠","͢","̸","̷","͡"," ҉"]},a=[].concat(t.up,t.down,t.mid);return o(e)}var isHeadless=!1;if("undefined"!=typeof module&&(isHeadless=!0),isHeadless)exports.mode="console";else{var exports={},module={},colors=exports;exports.mode="browser"}var addProperty=function(e,r){exports[e]=function(e){return r.apply(e)},String.prototype.__defineGetter__(e,r)},x=["bold","underline","strikethrough","italic","inverse","grey","black","yellow","red","green","blue","white","cyan","magenta","greyBG","blackBG","yellowBG","redBG","greenBG","blueBG","whiteBG","cyanBG","magentaBG"];x.forEach(function(e){addProperty(e,function(){return stylize(this,e)})});var rainbowMap=function(){var e=["red","yellow","green","blue","magenta"];return function(r,n){return" "===r?r:stylize(r,e[n++%e.length])}}();exports.themes={},exports.addSequencer=function(e,r){addProperty(e,sequencer(r))},exports.addSequencer("rainbow",rainbowMap),exports.addSequencer("zebra",function(e,r){return r%2===0?e:e.inverse}),exports.setTheme=function(e){if("string"==typeof e)try{return exports.themes[e]=require(e),applyTheme(exports.themes[e]),exports.themes[e]}catch(r){return console.log(r),r}else applyTheme(e)},addProperty("stripColors",function(){return(""+this).replace(/\x1B\[\d+m/g,"")}),addProperty("zalgo",function(){return zalgo(this)});
},{}],169:[function(require,module,exports){
var cycle=exports;cycle.decycle=function(e){"use strict";var t=[],r=[];return function a(e,n){var i,o,c;if(!("object"!=typeof e||null===e||e instanceof Boolean||e instanceof Date||e instanceof Number||e instanceof RegExp||e instanceof String)){for(i=0;i<t.length;i+=1)if(t[i]===e)return{$ref:r[i]};if(t.push(e),r.push(n),"[object Array]"===Object.prototype.toString.apply(e))for(c=[],i=0;i<e.length;i+=1)c[i]=a(e[i],n+"["+i+"]");else{c={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&(c[o]=a(e[o],n+"["+JSON.stringify(o)+"]"))}return c}return e}(e,"$")},cycle.retrocycle=function retrocycle($){"use strict";var px=/^\$(?:\[(?:\d+|\"(?:[^\\\"\u0000-\u001f]|\\([\\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*\")\])*$/;return function rez(value){var i,item,name,path;if(value&&"object"==typeof value)if("[object Array]"===Object.prototype.toString.apply(value))for(i=0;i<value.length;i+=1)item=value[i],item&&"object"==typeof item&&(path=item.$ref,"string"==typeof path&&px.test(path)?value[i]=eval(path):rez(item));else for(name in value)"object"==typeof value[name]&&(item=value[name],item&&(path=item.$ref,"string"==typeof path&&px.test(path)?value[name]=eval(path):rez(item)))}($),$};
},{}],170:[function(require,module,exports){
(function (__dirname){
var fs=require("fs"),path=require("path"),pkginfo=module.exports=function(n,r){var e=[].slice.call(arguments,2).filter(function(n){return"string"==typeof n});Array.isArray(r)?r={include:r}:"string"==typeof r&&(r={include:[r]}),r=r||{include:[]},e.length>0&&(r.include=r.include.concat(e));var i=pkginfo.read(n,r.dir).package;return Object.keys(i).forEach(function(e){r.include.length>0&&!~r.include.indexOf(e)||n.exports[e]||(n.exports[e]=i[e])}),pkginfo};pkginfo.find=function(n,r){r=r||n.filename,r=path.dirname(r);var e=fs.readdirSync(r);if(~e.indexOf("package.json"))return path.join(r,"package.json");if("/"===r)throw new Error("Could not find package.json up from: "+r);if(!r||"."===r)throw new Error("Cannot find package.json from unspecified directory");return pkginfo.find(n,r)},pkginfo.read=function(n,r){r=pkginfo.find(n,r);var e=fs.readFileSync(r).toString();return{dir:r,"package":JSON.parse(e)}},pkginfo(module,{dir:__dirname,include:["version"],target:pkginfo});
}).call(this,"/node_modules/prompt/node_modules/winston/node_modules/pkginfo/lib")
},{"fs":91,"path":107}],171:[function(require,module,exports){
exports.get=function(r){var e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var t={},a=Error.prepareStackTrace;Error.prepareStackTrace=function(r,e){return e},Error.captureStackTrace(t,r||exports.get);var n=t.stack;return Error.prepareStackTrace=a,Error.stackTraceLimit=e,n},exports.parse=function(r){if(!r.stack)return[];var e=this,t=r.stack.split("\n").slice(1);return t.map(function(r){if(r.match(/^\s*[-]{4,}$/))return e._createParsedCallSite({fileName:r,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,"native":null});var t=r.match(/at (?:(.+)\s+)?\(?(?:(.+?):(\d+):(\d+)|([^)]+))\)?/);if(t){var a=null,n=null,l=null,u=null,c=null,i="native"===t[5];if(t[1]){var o=t[1].match(/([^\.]+)(?:\.(.+))?/);a=o[1],n=o[2],l=t[1],u="Object"}n&&(u=a,c=n),"<anonymous>"===n&&(c=null,l="");var s={fileName:t[2]||null,lineNumber:parseInt(t[3],10)||null,functionName:l,typeName:u,methodName:c,columnNumber:parseInt(t[4],10)||null,"native":i};return e._createParsedCallSite(s)}}).filter(function(r){return!!r})},exports._createParsedCallSite=function(r){var e={};for(var t in r){var a="get";"native"===t&&(a="is");var n=a+t.substr(0,1).toUpperCase()+t.substr(1);!function(t){e[n]=function(){return r[t]}}(t)}var l=Object.create(e);for(var t in r)l[t]=r[t];return l};
},{}],172:[function(require,module,exports){
(function (process){
!function(t){if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=t}else Q=t()}(function(){"use strict";function t(t){return function(){return K.apply(t,arguments)}}function n(t){return t===Object(t)}function e(t){return"[object StopIteration]"===nn(t)||t instanceof z}function r(t,n){if(Q&&n.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(en)){for(var e=[],r=n;r;r=r.source)r.stack&&e.unshift(r.stack);e.unshift(t.stack);var i=e.join("\n"+en+"\n");t.stack=o(i)}}function o(t){for(var n=t.split("\n"),e=[],r=0;r<n.length;++r){var o=n[r];c(o)||i(o)||!o||e.push(o)}return e.join("\n")}function i(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function u(t){var n=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(n)return[n[1],Number(n[2])];var e=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(e)return[e[1],Number(e[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function c(t){var n=u(t);if(!n)return!1;var e=n[0],r=n[1];return e===q&&r>=G&&cn>=r}function s(){if(Q)try{throw new Error}catch(t){var n=t.stack.split("\n"),e=n[0].indexOf("@")>0?n[1]:n[2],r=u(e);if(!r)return;return q=r[0],r[1]}}function f(t,n,e){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(n+" is deprecated, use "+e+" instead.",new Error("").stack),t.apply(t,arguments)}}function p(t){return m(t)?t:g(t)?S(t):O(t)}function a(){function t(t){n=t,i.source=t,W(e,function(n,e){J(function(){t.promiseDispatch.apply(t,e)})},void 0),e=void 0,r=void 0}var n,e=[],r=[],o=Z(a.prototype),i=Z(h.prototype);if(i.promiseDispatch=function(t,o,i){var u=L(arguments);e?(e.push(u),"when"===o&&i[1]&&r.push(i[1])):J(function(){n.promiseDispatch.apply(n,u)})},i.valueOf=function(){if(e)return i;var t=v(n);return m(t)&&(n=t),t},i.inspect=function(){return n?n.inspect():{state:"pending"}},p.longStackSupport&&Q)try{throw new Error}catch(u){i.stack=u.stack.substring(u.stack.indexOf("\n")+1)}return o.promise=i,o.resolve=function(e){n||t(p(e))},o.fulfill=function(e){n||t(O(e))},o.reject=function(e){n||t(T(e))},o.notify=function(t){n||W(r,function(n,e){J(function(){e(t)})},void 0)},o}function l(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var n=a();try{t(n.resolve,n.reject,n.notify)}catch(e){n.reject(e)}return n.promise}function d(t){return l(function(n,e){for(var r=0,o=t.length;o>r;r++)p(t[r]).then(n,e)})}function h(t,n,e){void 0===n&&(n=function(t){return T(new Error("Promise does not support operation: "+t))}),void 0===e&&(e=function(){return{state:"unknown"}});var r=Z(h.prototype);if(r.promiseDispatch=function(e,o,i){var u;try{u=t[o]?t[o].apply(r,i):n.call(r,o,i)}catch(c){u=T(c)}e&&e(u)},r.inspect=e,e){var o=e();"rejected"===o.state&&(r.exception=o.reason),r.valueOf=function(){var t=e();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function y(t,n,e,r){return p(t).then(n,e,r)}function v(t){if(m(t)){var n=t.inspect();if("fulfilled"===n.state)return n.value}return t}function m(t){return n(t)&&"function"==typeof t.promiseDispatch&&"function"==typeof t.inspect}function g(t){return n(t)&&"function"==typeof t.then}function k(t){return m(t)&&"pending"===t.inspect().state}function j(t){return!m(t)||"fulfilled"===t.inspect().state}function w(t){return m(t)&&"rejected"===t.inspect().state}function b(){rn.length=0,on.length=0,un||(un=!0)}function x(t,n){un&&(on.push(t),rn.push(n&&"undefined"!=typeof n.stack?n.stack:"(no stack) "+n))}function R(t){if(un){var n=X(on,t);-1!==n&&(on.splice(n,1),rn.splice(n,1))}}function T(t){var n=h({when:function(n){return n&&R(this),n?n(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return x(n,t),n}function O(t){return h({when:function(){return t},get:function(n){return t[n]},set:function(n,e){t[n]=e},"delete":function(n){delete t[n]},post:function(n,e){return null===n||void 0===n?t.apply(void 0,e):t[n].apply(t,e)},apply:function(n,e){return t.apply(n,e)},keys:function(){return tn(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function S(t){var n=a();return J(function(){try{t.then(n.resolve,n.reject,n.notify)}catch(e){n.reject(e)}}),n.promise}function N(t){return h({isDef:function(){}},function(n,e){return I(t,n,e)},function(){return p(t).inspect()})}function D(t,n,e){return p(t).spread(n,e)}function E(t){return function(){function n(t,n){var u;if("undefined"==typeof StopIteration){try{u=r[t](n)}catch(c){return T(c)}return u.done?u.value:y(u.value,o,i)}try{u=r[t](n)}catch(c){return e(c)?c.value:T(c)}return y(u,o,i)}var r=t.apply(this,arguments),o=n.bind(n,"next"),i=n.bind(n,"throw");return o()}}function P(t){p.done(p.async(t)())}function A(t){throw new z(t)}function C(t){return function(){return D([this,F(arguments)],function(n,e){return t.apply(n,e)})}}function I(t,n,e){return p(t).dispatch(n,e)}function F(t){return y(t,function(t){var n=0,e=a();return W(t,function(r,o,i){var u;m(o)&&"fulfilled"===(u=o.inspect()).state?t[i]=u.value:(++n,y(o,function(r){t[i]=r,0===--n&&e.resolve(t)},e.reject,function(t){e.notify({index:i,value:t})}))},void 0),0===n&&e.resolve(t),e.promise})}function M(t){return y(t,function(t){return t=Y(t,p),y(F(Y(t,function(t){return y(t,H,H)})),function(){return t})})}function U(t){return p(t).allSettled()}function $(t,n){return p(t).then(void 0,void 0,n)}function B(t,n){return p(t).nodeify(n)}var Q=!1;try{throw new Error}catch(V){Q=!!V.stack}var q,z,G=s(),H=function(){},J=function(){function t(){for(;n.next;){n=n.next;var e=n.task;n.task=void 0;var o=n.domain;o&&(n.domain=void 0,o.enter());try{e()}catch(u){if(i)throw o&&o.exit(),setTimeout(t,0),o&&o.enter(),u;setTimeout(function(){throw u},0)}o&&o.exit()}r=!1}var n={task:void 0,next:null},e=n,r=!1,o=void 0,i=!1;if(J=function(t){e=e.next={task:t,domain:i&&process.domain,next:null},r||(r=!0,o())},"undefined"!=typeof process&&process.nextTick)i=!0,o=function(){process.nextTick(t)};else if("function"==typeof setImmediate)o="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};else if("undefined"!=typeof MessageChannel){var u=new MessageChannel;u.port1.onmessage=function(){o=c,u.port1.onmessage=t,t()};var c=function(){u.port2.postMessage(0)};o=function(){setTimeout(t,0),c()}}else o=function(){setTimeout(t,0)};return J}(),K=Function.call,L=t(Array.prototype.slice),W=t(Array.prototype.reduce||function(t,n){var e=0,r=this.length;if(1===arguments.length)for(;;){if(e in this){n=this[e++];break}if(++e>=r)throw new TypeError}for(;r>e;e++)e in this&&(n=t(n,this[e],e));return n}),X=t(Array.prototype.indexOf||function(t){for(var n=0;n<this.length;n++)if(this[n]===t)return n;return-1}),Y=t(Array.prototype.map||function(t,n){var e=this,r=[];return W(e,function(o,i,u){r.push(t.call(n,i,u,e))},void 0),r}),Z=Object.create||function(t){function n(){}return n.prototype=t,new n},_=t(Object.prototype.hasOwnProperty),tn=Object.keys||function(t){var n=[];for(var e in t)_(t,e)&&n.push(e);return n},nn=t(Object.prototype.toString);z="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var en="From previous event:";p.resolve=p,p.nextTick=J,p.longStackSupport=!1,p.defer=a,a.prototype.makeNodeResolver=function(){var t=this;return function(n,e){n?t.reject(n):t.resolve(arguments.length>2?L(arguments,1):e)}},p.Promise=l,p.promise=l,l.race=d,l.all=F,l.reject=T,l.resolve=p,p.passByCopy=function(t){return t},h.prototype.passByCopy=function(){return this},p.join=function(t,n){return p(t).join(n)},h.prototype.join=function(t){return p([this,t]).spread(function(t,n){if(t===n)return t;throw new Error("Can't join: not the same: "+t+" "+n)})},p.race=d,h.prototype.race=function(){return this.then(p.race)},p.makePromise=h,h.prototype.toString=function(){return"[object Promise]"},h.prototype.then=function(t,n,e){function o(n){try{return"function"==typeof t?t(n):n}catch(e){return T(e)}}function i(t){if("function"==typeof n){r(t,c);try{return n(t)}catch(e){return T(e)}}return T(t)}function u(t){return"function"==typeof e?e(t):t}var c=this,s=a(),f=!1;return J(function(){c.promiseDispatch(function(t){f||(f=!0,s.resolve(o(t)))},"when",[function(t){f||(f=!0,s.resolve(i(t)))}])}),c.promiseDispatch(void 0,"when",[void 0,function(t){var n,e=!1;try{n=u(t)}catch(r){if(e=!0,!p.onerror)throw r;p.onerror(r)}e||s.notify(n)}]),s.promise},p.when=y,h.prototype.thenResolve=function(t){return this.then(function(){return t})},p.thenResolve=function(t,n){return p(t).thenResolve(n)},h.prototype.thenReject=function(t){return this.then(function(){throw t})},p.thenReject=function(t,n){return p(t).thenReject(n)},p.nearer=v,p.isPromise=m,p.isPromiseAlike=g,p.isPending=k,h.prototype.isPending=function(){return"pending"===this.inspect().state},p.isFulfilled=j,h.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},p.isRejected=w,h.prototype.isRejected=function(){return"rejected"===this.inspect().state};var rn=[],on=[],un=!0;p.resetUnhandledRejections=b,p.getUnhandledReasons=function(){return rn.slice()},p.stopUnhandledRejectionTracking=function(){b(),un=!1},b(),p.reject=T,p.fulfill=O,p.master=N,p.spread=D,h.prototype.spread=function(t,n){return this.all().then(function(n){return t.apply(void 0,n)},n)},p.async=E,p.spawn=P,p["return"]=A,p.promised=C,p.dispatch=I,h.prototype.dispatch=function(t,n){var e=this,r=a();return J(function(){e.promiseDispatch(r.resolve,t,n)}),r.promise},p.get=function(t,n){return p(t).dispatch("get",[n])},h.prototype.get=function(t){return this.dispatch("get",[t])},p.set=function(t,n,e){return p(t).dispatch("set",[n,e])},h.prototype.set=function(t,n){return this.dispatch("set",[t,n])},p.del=p["delete"]=function(t,n){return p(t).dispatch("delete",[n])},h.prototype.del=h.prototype["delete"]=function(t){return this.dispatch("delete",[t])},p.mapply=p.post=function(t,n,e){return p(t).dispatch("post",[n,e])},h.prototype.mapply=h.prototype.post=function(t,n){return this.dispatch("post",[t,n])},p.send=p.mcall=p.invoke=function(t,n){return p(t).dispatch("post",[n,L(arguments,2)])},h.prototype.send=h.prototype.mcall=h.prototype.invoke=function(t){return this.dispatch("post",[t,L(arguments,1)])},p.fapply=function(t,n){return p(t).dispatch("apply",[void 0,n])},h.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},p["try"]=p.fcall=function(t){return p(t).dispatch("apply",[void 0,L(arguments,1)])},h.prototype.fcall=function(){return this.dispatch("apply",[void 0,L(arguments)])},p.fbind=function(t){var n=p(t),e=L(arguments,1);return function(){return n.dispatch("apply",[this,e.concat(L(arguments))])}},h.prototype.fbind=function(){var t=this,n=L(arguments);return function(){return t.dispatch("apply",[this,n.concat(L(arguments))])}},p.keys=function(t){return p(t).dispatch("keys",[])},h.prototype.keys=function(){return this.dispatch("keys",[])},p.all=F,h.prototype.all=function(){return F(this)},p.allResolved=f(M,"allResolved","allSettled"),h.prototype.allResolved=function(){return M(this)},p.allSettled=U,h.prototype.allSettled=function(){return this.then(function(t){return F(Y(t,function(t){function n(){return t.inspect()}return t=p(t),t.then(n,n)}))})},p.fail=p["catch"]=function(t,n){return p(t).then(void 0,n)},h.prototype.fail=h.prototype["catch"]=function(t){return this.then(void 0,t)},p.progress=$,h.prototype.progress=function(t){return this.then(void 0,void 0,t)},p.fin=p["finally"]=function(t,n){return p(t)["finally"](n)},h.prototype.fin=h.prototype["finally"]=function(t){return t=p(t),this.then(function(n){return t.fcall().then(function(){return n})},function(n){return t.fcall().then(function(){throw n})})},p.done=function(t,n,e,r){return p(t).done(n,e,r)},h.prototype.done=function(t,n,e){var o=function(t){J(function(){if(r(t,i),!p.onerror)throw t;p.onerror(t)})},i=t||n||e?this.then(t,n,e):this;"object"==typeof process&&process&&process.domain&&(o=process.domain.bind(o)),i.then(void 0,o)},p.timeout=function(t,n,e){return p(t).timeout(n,e)},h.prototype.timeout=function(t,n){var e=a(),r=setTimeout(function(){e.reject(new Error(n||"Timed out after "+t+" ms"))},t);return this.then(function(t){clearTimeout(r),e.resolve(t)},function(t){clearTimeout(r),e.reject(t)},e.notify),e.promise},p.delay=function(t,n){return void 0===n&&(n=t,t=void 0),p(t).delay(n)},h.prototype.delay=function(t){return this.then(function(n){var e=a();return setTimeout(function(){e.resolve(n)},t),e.promise})},p.nfapply=function(t,n){return p(t).nfapply(n)},h.prototype.nfapply=function(t){var n=a(),e=L(t);return e.push(n.makeNodeResolver()),this.fapply(e).fail(n.reject),n.promise},p.nfcall=function(t){var n=L(arguments,1);return p(t).nfapply(n)},h.prototype.nfcall=function(){var t=L(arguments),n=a();return t.push(n.makeNodeResolver()),this.fapply(t).fail(n.reject),n.promise},p.nfbind=p.denodeify=function(t){var n=L(arguments,1);return function(){var e=n.concat(L(arguments)),r=a();return e.push(r.makeNodeResolver()),p(t).fapply(e).fail(r.reject),r.promise}},h.prototype.nfbind=h.prototype.denodeify=function(){var t=L(arguments);return t.unshift(this),p.denodeify.apply(void 0,t)},p.nbind=function(t,n){var e=L(arguments,2);return function(){function r(){return t.apply(n,arguments)}var o=e.concat(L(arguments)),i=a();return o.push(i.makeNodeResolver()),p(r).fapply(o).fail(i.reject),i.promise}},h.prototype.nbind=function(){var t=L(arguments,0);return t.unshift(this),p.nbind.apply(void 0,t)},p.nmapply=p.npost=function(t,n,e){return p(t).npost(n,e)},h.prototype.nmapply=h.prototype.npost=function(t,n){var e=L(n||[]),r=a();return e.push(r.makeNodeResolver()),this.dispatch("post",[t,e]).fail(r.reject),r.promise},p.nsend=p.nmcall=p.ninvoke=function(t,n){var e=L(arguments,2),r=a();return e.push(r.makeNodeResolver()),p(t).dispatch("post",[n,e]).fail(r.reject),r.promise},h.prototype.nsend=h.prototype.nmcall=h.prototype.ninvoke=function(t){var n=L(arguments,1),e=a();return n.push(e.makeNodeResolver()),this.dispatch("post",[t,n]).fail(e.reject),e.promise},p.nodeify=B,h.prototype.nodeify=function(t){return t?void this.then(function(n){J(function(){t(null,n)})},function(n){J(function(){t(n)})}):this};var cn=s();return p});
}).call(this,require("FWaASH"))
},{"FWaASH":108}],173:[function(require,module,exports){
module.exports=require("./lib");
},{"./lib":178}],174:[function(require,module,exports){
module.exports=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/;
},{}],175:[function(require,module,exports){
var _=require("lodash"),util=require("util");module.exports=function(r,u){return void 0!==u&&r?0===u?null:_.first(r,u):r};
},{"lodash":126,"util":124}],176:[function(require,module,exports){
var _=require("lodash"),util=require("util");module.exports=function(r,e){return e&&r?_.rest(r,e):r};
},{"lodash":126,"util":124}],177:[function(require,module,exports){
function matchSet(r,t,e){return!t||_.isEqual(t,{})?!0:_.all(t,function(t,n){return matchItem(r,n,t,e)})}function matchOr(r,t){var e=[];_.each(t,function(t){matchSet(r,t)&&e.push(!0)});var n=e.length>0?!0:!1;return n}function matchAnd(r,t){var e=!0;return _.each(t,function(t){matchSet(r,t)||(e=!1)}),e}function matchLike(r,t){for(var e in t)if(!checkLike(r[e],t[e]))return!1;return!0}function matchNot(r,t){return!matchSet(r,t)}function matchItem(r,t,e,n){if(n){if("equals"===t||"="===t||"equal"===t)return matchLiteral(r,n,e,compare["="]);if("not"===t||"!"===t){if(Array.isArray(e)){var a=!1;return e.forEach(function(t){compare["="](r[n],t)&&(a=!0)}),a?!1:!0}return matchLiteral(r,n,e,compare["!"])}if("greaterThan"===t||">"===t)return matchLiteral(r,n,e,compare[">"]);if("greaterThanOrEqual"===t||">="===t)return matchLiteral(r,n,e,compare[">="]);if("lessThan"===t||"<"===t)return matchLiteral(r,n,e,compare["<"]);if("lessThanOrEqual"===t||"<="===t)return matchLiteral(r,n,e,compare["<="]);if("startsWith"===t)return matchLiteral(r,n,e,checkStartsWith);if("endsWith"===t)return matchLiteral(r,n,e,checkEndsWith);if("contains"===t)return matchLiteral(r,n,e,checkContains);if("like"===t)return matchLiteral(r,n,e,checkLike);throw new Error("Invalid query syntax!")}return"or"===t.toLowerCase()?matchOr(r,e):"not"===t.toLowerCase()?matchNot(r,e):"and"===t.toLowerCase()?matchAnd(r,e):"like"===t.toLowerCase()?matchLike(r,e):_.isArray(e)?_.any(e,function(e){return compare["="](r[t],e)}):_.isObject(e)&&validSubAttrCriteria(e)?matchSet(r,e,t):matchLiteral(r,t,e,compare["="])}function normalizeComparison(r,t){return(_.isUndefined(r)||null===r)&&(r=""),(_.isUndefined(t)||null===t)&&(t=""),_.isString(r)&&_.isString(t)&&(r=r.toLowerCase(),t=t.toLowerCase()),_.isDate(r)&&_.isDate(t)?[r,t]:(_.isDate(r)&&(r=r.toISOString()),_.isDate(t)&&(t=t.toISOString()),_.isNumber(r)||(r="undefined"!=typeof r.toString?r.toString():""+r),_.isNumber(t)||(t="undefined"!=typeof t.toString?t.toString():""+t),_.isString(r)&&_.isString(t)&&r.match(X_ISO_DATE)&&t.match(X_ISO_DATE)?[new Date(r),new Date(t)]:[r,t])}function validSubAttrCriteria(r){if(!_.isObject(r))return!1;var t=!1,e=["not","greaterThan","lessThan","greaterThanOrEqual","lessThanOrEqual","<","<=","!",">",">=","startsWith","endsWith","contains","like"];return _.each(e,function(e){hasOwnProperty(r,e)&&(t=!0)}),t}function isNumbery(r){return _.isDate(r)?!1:Math.pow(+r,2)>0}function matchLiteral(r,t,e,n){var a=_.cloneDeep(r[t]);return isNumbery(e)&&isNumbery(a)&&(e=+e,a=+a),r.hasOwnProperty(t)?_.isUndefined(e)?!1:n(a,e)?!0:!1:!1}function checkStartsWith(r,t){return sqlLikeMatch(r,t+"%")}function checkEndsWith(r,t){return sqlLikeMatch(r,"%"+t)}function checkContains(r,t){return sqlLikeMatch(r,"%"+t+"%")}function checkLike(r,t){return sqlLikeMatch(r,t)}function sqlLikeMatch(r,t){if(_.isRegExp(t));else{if(!_.isString(t))throw console.error("matchString:"),console.error(t),new Error("Unexpected match string: "+t+" Please use a regexp or string.");t=t.replace(/%%%/g,"%"),t=escapeRegExp(t),t=t.replace(/([^%]*)%([^%]*)/g,"$1.*$2");var e="i";t=new RegExp("^"+t+"$",e)}if(_.isNumber(r))r=""+r;else if(_.isBoolean(r))r=r?"true":"false";else if(!_.isString(r))return!1;return r.match(t)?!0:!1}function escapeRegExp(r){return r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function hasOwnProperty(r,t){return hop.call(r,t)}var _=require("lodash"),X_ISO_DATE=require("../X_ISO_DATE.constant");module.exports=function(r,t){return r?_.filter(r,function(r){return matchSet(r,t)}):r};var compare={"=":function(r,t){var e=normalizeComparison(r,t);return e[0]==e[1]},"!":function(r,t){var e=normalizeComparison(r,t);return e[0]!=e[1]},">":function(r,t){var e=normalizeComparison(r,t);return e[0]>e[1]},">=":function(r,t){var e=normalizeComparison(r,t);return e[0]>=e[1]},"<":function(r,t){var e=normalizeComparison(r,t);return e[0]<e[1]},"<=":function(r,t){var e=normalizeComparison(r,t);return e[0]<=e[1]}},hop=Object.prototype.hasOwnProperty;
},{"../X_ISO_DATE.constant":174,"lodash":126}],178:[function(require,module,exports){
(function (__dirname){
function loadSubModules(e){return require("include-all")({dirname:path.resolve(__dirname,e),filter:/(.+)\.js$/})}var _=require("lodash"),util=require("util"),path=require("path");module.exports=_.extend(require("./query"),{where:require("./filters/where"),limit:require("./filters/limit"),skip:require("./filters/skip"),sort:require("./sort"),groupBy:require("./projections/groupBy"),select:require("./projections/select")});
}).call(this,"/node_modules/waterline-criteria/lib")
},{"./filters/limit":175,"./filters/skip":176,"./filters/where":177,"./projections/groupBy":179,"./projections/select":180,"./query":181,"./sort":182,"include-all":183,"lodash":126,"path":107,"util":124}],179:[function(require,module,exports){
var _=require("lodash"),util=require("util");module.exports=function(r){return r};
},{"lodash":126,"util":124}],180:[function(require,module,exports){
function select(e,t){return"object"!=typeof t?e:(_.isArray(t)&&(t=_.reduce(t,function(e,t){return e[t]=!0,e},{})),_.map(e,function(e){return e=_.pick(e,Object.keys(t)),_.each(t,function(t,r){"object"==typeof t&&(_.isArray(e[r])?e[r]=select(e[r],t):_.isObject(e[r])&&(e[r]=select([e[r]],t)[0]))}),e}))}var _=require("lodash"),util=require("util");module.exports=select;
},{"lodash":126,"util":124}],181:[function(require,module,exports){
var _=require("lodash"),util=require("util"),_where=require("./filters/where"),_limit=require("./filters/limit"),_skip=require("./filters/skip"),_select=require("./projections/select"),_groupBy=require("./projections/groupBy"),_sort=require("./sort");module.exports=function(){var e,r,i,t,s=".(ørigindex)";_.isArray(arguments[0])&&!arguments[2]?(e=arguments[0],t=arguments[1]):(r=arguments[0],i=arguments[1],t=arguments[2],e=i[r]),e=_.cloneDeep(e),_.each(e,function(e,r){e[s]=r}),t=t||{},e=_where(e,t.where),e=_sort(e,t.sort),e=_skip(e,t.skip),e=_limit(e,t.limit),e=_select(e,t.select);var u=_.pluck(e,s);return _.each(e,function(e){delete e[s]}),{results:e,indices:u}};
},{"./filters/limit":175,"./filters/skip":176,"./filters/where":177,"./projections/groupBy":179,"./projections/select":180,"./sort":182,"lodash":126,"util":124}],182:[function(require,module,exports){
function sortData(e,t,r){var n=1,u=-1,s=0;return e.sort(function(e,o){return _(t).reduce(function(t,i,a){var c,f=r(e,a),l=r(o,a);return f||l?!f&&l?c=u:f&&!l?c=n:(f=e[a],l=o[a],c=l>f?u:f>l?n:s):c=s,c===u?t||-i:c===n?t||i:t},0)})}function coerceIntoBestGuessType(e){switch(guessType(e)){case"booleanish":return"true"===e?!0:!1;case"numberish":return+e;case"dateish":return new Date(e);default:return e}}function guessType(e){return _.isString(e)?"true"===e||"false"===e?"booleanish":+e===e?"numberish":e.match(X_ISO_DATE)?"dateish":typeof e:typeof e}var _=require("lodash"),util=require("util"),X_ISO_DATE=require("./X_ISO_DATE.constant");module.exports=function(e,t,r){return t&&e?(r=r||function(e,t){return"undefined"==typeof e[t]||null===e[t]?!1:!0},sortData(_.cloneDeep(e),t,r)):e};
},{"./X_ISO_DATE.constant":174,"lodash":126,"util":124}],183:[function(require,module,exports){
var fs=require("fs"),ltrim=require("underscore.string").ltrim;module.exports=function e(r){function t(e){return r.excludeDirs&&e.match(r.excludeDirs)}var i,a={};if("undefined"==typeof r.force&&(r.force=!0),r.filter||(r.filter=/(.*)/),"undefined"==typeof r._depth&&(r._depth=0),!("undefined"!=typeof r.depth&&r._depth>=r.depth)){r.startDirname||(r.startDirname=r.dirname);try{i=fs.readdirSync(r.dirname)}catch(n){if(r.optional)return{};throw new Error("Directory not found: "+r.dirname)}return i.forEach(function(i){var n=r.dirname+"/"+i;if(fs.statSync(n).isDirectory()){if(t(i))return;a[i]=e({dirname:n,filter:r.filter,pathFilter:r.pathFilter,excludeDirs:r.excludeDirs,startDirname:r.startDirname,dontLoad:r.dontLoad,markDirectories:r.markDirectories,flattenDirectories:r.flattenDirectories,keepDirectoryPath:r.keepDirectoryPath,force:r.force,_depth:r._depth+1,depth:r.depth}),(r.markDirectories||r.flattenDirectories)&&(a[i].isDirectory=!0),r.flattenDirectories&&(a=function u(e,t,i){return t=t||{},Object.keys(e).forEach(function(a){("object"==typeof e[a]||"function"==typeof e[a])&&(e[a].isDirectory?u(e[a],t,i?i+"/"+a:a):t[r.keepDirectoryPath&&i?i+"/"+a:a]=e[a])}),t}(a))}else{var o;if(r.filter){var c=i.match(r.filter);if(!c)return;o=c[1]}if(r.pathFilter){var f=n.replace(r.startDirname,"");f="/"+ltrim(f,"/");var d=f.match(r.pathFilter);if(!d)return;o=d[2]}if(r.dontLoad)a[o]=!0;else{if(r.force){var s=require.resolve(n);require.cache[s]&&delete require.cache[s]}a[o]=require(n)}}}),a}};
},{"fs":91,"underscore.string":184}],184:[function(require,module,exports){
!function(e,n){"use strict";var r=n.prototype.trim,t=n.prototype.trimRight,u=n.prototype.trimLeft,l=function(e){return 1*e||0},i=function(e,n){if(1>n)return"";for(var r="";n>0;)1&n&&(r+=e),n>>=1,e+=e;return r},a=[].slice,o=function(e){return null==e?"\\s":e.source?e.source:"["+h.escapeRegExp(e)+"]"},c={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},s={};for(var f in c)s[c[f]]=f;s["'"]="#39";var p=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var r=i,t=function(){return t.cache.hasOwnProperty(arguments[0])||(t.cache[arguments[0]]=t.parse(arguments[0])),t.format.call(null,t.cache[arguments[0]],arguments)};return t.format=function(t,u){var l,i,a,o,c,s,f,h=1,g=t.length,d="",m=[];for(i=0;g>i;i++)if(d=e(t[i]),"string"===d)m.push(t[i]);else if("array"===d){if(o=t[i],o[2])for(l=u[h],a=0;a<o[2].length;a++){if(!l.hasOwnProperty(o[2][a]))throw new Error(p('[_.sprintf] property "%s" does not exist',o[2][a]));l=l[o[2][a]]}else l=o[1]?u[o[1]]:u[h++];if(/[^s]/.test(o[8])&&"number"!=e(l))throw new Error(p("[_.sprintf] expecting number but found %s",e(l)));switch(o[8]){case"b":l=l.toString(2);break;case"c":l=n.fromCharCode(l);break;case"d":l=parseInt(l,10);break;case"e":l=o[7]?l.toExponential(o[7]):l.toExponential();break;case"f":l=o[7]?parseFloat(l).toFixed(o[7]):parseFloat(l);break;case"o":l=l.toString(8);break;case"s":l=(l=n(l))&&o[7]?l.substring(0,o[7]):l;break;case"u":l=Math.abs(l);break;case"x":l=l.toString(16);break;case"X":l=l.toString(16).toUpperCase()}l=/[def]/.test(o[8])&&o[3]&&l>=0?"+"+l:l,s=o[4]?"0"==o[4]?"0":o[4].charAt(1):" ",f=o[6]-n(l).length,c=o[6]?r(s,f):"",m.push(o[5]?l+c:c+l)}return m.join("")},t.cache={},t.parse=function(e){for(var n=e,r=[],t=[],u=0;n;){if(null!==(r=/^[^\x25]+/.exec(n)))t.push(r[0]);else if(null!==(r=/^\x25{2}/.exec(n)))t.push("%");else{if(null===(r=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(n)))throw new Error("[_.sprintf] huh?");if(r[2]){u|=1;var l=[],i=r[2],a=[];if(null===(a=/^([a-z_][a-z_\d]*)/i.exec(i)))throw new Error("[_.sprintf] huh?");for(l.push(a[1]);""!==(i=i.substring(a[0].length));)if(null!==(a=/^\.([a-z_][a-z_\d]*)/i.exec(i)))l.push(a[1]);else{if(null===(a=/^\[(\d+)\]/.exec(i)))throw new Error("[_.sprintf] huh?");l.push(a[1])}r[2]=l}else u|=2;if(3===u)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");t.push(r)}n=n.substring(r[0].length)}return t},t}(),h={VERSION:"2.3.1",isBlank:function(e){return null==e&&(e=""),/^\s*$/.test(e)},stripTags:function(e){return null==e?"":n(e).replace(/<\/?[^>]+>/g,"")},capitalize:function(e){return e=null==e?"":n(e),e.charAt(0).toUpperCase()+e.slice(1)},chop:function(e,r){return null==e?[]:(e=n(e),r=~~r,r>0?e.match(new RegExp(".{1,"+r+"}","g")):[e])},clean:function(e){return h.strip(e).replace(/\s+/g," ")},count:function(e,r){if(null==e||null==r)return 0;e=n(e),r=n(r);for(var t=0,u=0,l=r.length;;){if(u=e.indexOf(r,u),-1===u)break;t++,u+=l}return t},chars:function(e){return null==e?[]:n(e).split("")},swapCase:function(e){return null==e?"":n(e).replace(/\S/g,function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()})},escapeHTML:function(e){return null==e?"":n(e).replace(/[&<>"']/g,function(e){return"&"+s[e]+";"})},unescapeHTML:function(e){return null==e?"":n(e).replace(/\&([^;]+);/g,function(e,r){var t;return r in c?c[r]:(t=r.match(/^#x([\da-fA-F]+)$/))?n.fromCharCode(parseInt(t[1],16)):(t=r.match(/^#(\d+)$/))?n.fromCharCode(~~t[1]):e})},escapeRegExp:function(e){return null==e?"":n(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(e,n,r,t){var u=h.chars(e);return u.splice(~~n,~~r,t),u.join("")},insert:function(e,n,r){return h.splice(e,n,0,r)},include:function(e,r){return""===r?!0:null==e?!1:-1!==n(e).indexOf(r)},join:function(){var e=a.call(arguments),n=e.shift();return null==n&&(n=""),e.join(n)},lines:function(e){return null==e?[]:n(e).split("\n")},reverse:function(e){return h.chars(e).reverse().join("")},startsWith:function(e,r){return""===r?!0:null==e||null==r?!1:(e=n(e),r=n(r),e.length>=r.length&&e.slice(0,r.length)===r)},endsWith:function(e,r){return""===r?!0:null==e||null==r?!1:(e=n(e),r=n(r),e.length>=r.length&&e.slice(e.length-r.length)===r)},succ:function(e){return null==e?"":(e=n(e),e.slice(0,-1)+n.fromCharCode(e.charCodeAt(e.length-1)+1))},titleize:function(e){return null==e?"":n(e).replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},camelize:function(e){return h.trim(e).replace(/[-_\s]+(.)?/g,function(e,n){return n.toUpperCase()})},underscored:function(e){return h.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(e){return h.trim(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(e){return h.titleize(n(e).replace(/[\W_]/g," ")).replace(/\s/g,"")},humanize:function(e){return h.capitalize(h.underscored(e).replace(/_id$/,"").replace(/_/g," "))},trim:function(e,t){return null==e?"":!t&&r?r.call(e):(t=o(t),n(e).replace(new RegExp("^"+t+"+|"+t+"+$","g"),""))},ltrim:function(e,r){return null==e?"":!r&&u?u.call(e):(r=o(r),n(e).replace(new RegExp("^"+r+"+"),""))},rtrim:function(e,r){return null==e?"":!r&&t?t.call(e):(r=o(r),n(e).replace(new RegExp(r+"+$"),""))},truncate:function(e,r,t){return null==e?"":(e=n(e),t=t||"...",r=~~r,e.length>r?e.slice(0,r)+t:e)},prune:function(e,r,t){if(null==e)return"";if(e=n(e),r=~~r,t=null!=t?n(t):"...",e.length<=r)return e;var u=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},l=e.slice(0,r+1).replace(/.(?=\W*\w*$)/g,u);return l=l.slice(l.length-2).match(/\w\w/)?l.replace(/\s*\S+$/,""):h.rtrim(l.slice(0,l.length-1)),(l+t).length>e.length?e:e.slice(0,l.length)+t},words:function(e,n){return h.isBlank(e)?[]:h.trim(e,n).split(n||/\s+/)},pad:function(e,r,t,u){e=null==e?"":n(e),r=~~r;var l=0;switch(t?t.length>1&&(t=t.charAt(0)):t=" ",u){case"right":return l=r-e.length,e+i(t,l);case"both":return l=r-e.length,i(t,Math.ceil(l/2))+e+i(t,Math.floor(l/2));default:return l=r-e.length,i(t,l)+e}},lpad:function(e,n,r){return h.pad(e,n,r)},rpad:function(e,n,r){return h.pad(e,n,r,"right")},lrpad:function(e,n,r){return h.pad(e,n,r,"both")},sprintf:p,vsprintf:function(e,n){return n.unshift(e),p.apply(null,n)},toNumber:function(e,n){return e?(e=h.trim(e),e.match(/^-?\d+(?:\.\d+)?$/)?l(l(e).toFixed(~~n)):0/0):0},numberFormat:function(e,n,r,t){if(isNaN(e)||null==e)return"";e=e.toFixed(~~n),t="string"==typeof t?t:",";var u=e.split("."),l=u[0],i=u[1]?(r||".")+u[1]:"";return l.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+t)+i},strRight:function(e,r){if(null==e)return"";e=n(e),r=null!=r?n(r):r;var t=r?e.indexOf(r):-1;return~t?e.slice(t+r.length,e.length):e},strRightBack:function(e,r){if(null==e)return"";e=n(e),r=null!=r?n(r):r;var t=r?e.lastIndexOf(r):-1;return~t?e.slice(t+r.length,e.length):e},strLeft:function(e,r){if(null==e)return"";e=n(e),r=null!=r?n(r):r;var t=r?e.indexOf(r):-1;return~t?e.slice(0,t):e},strLeftBack:function(e,n){if(null==e)return"";e+="",n=null!=n?""+n:n;var r=e.lastIndexOf(n);return~r?e.slice(0,r):e},toSentence:function(e,n,r,t){n=n||", ",r=r||" and ";var u=e.slice(),l=u.pop();return e.length>2&&t&&(r=h.rtrim(n)+r),u.length?u.join(n)+r+l:l},toSentenceSerial:function(){var e=a.call(arguments);return e[3]=!0,h.toSentence.apply(h,e)},slugify:function(e){if(null==e)return"";var r="ąàáäâãåæćęèéëêìíïîłńòóöôõøùúüûñçżź",t="aaaaaaaaceeeeeiiiilnoooooouuuunczz",u=new RegExp(o(r),"g");return e=n(e).toLowerCase().replace(u,function(e){var n=r.indexOf(e);return t.charAt(n)||"-"}),h.dasherize(e.replace(/[^\w\s-]/g,""))},surround:function(e,n){return[n,e,n].join("")},quote:function(e){return h.surround(e,'"')},exports:function(){var e={};for(var n in this)this.hasOwnProperty(n)&&!n.match(/^(?:include|contains|reverse)$/)&&(e[n]=this[n]);return e},repeat:function(e,r,t){if(null==e)return"";if(r=~~r,null==t)return i(n(e),r);for(var u=[];r>0;u[--r]=e);return u.join(t)},levenshtein:function(e,r){if(null==e&&null==r)return 0;if(null==e)return n(r).length;if(null==r)return n(e).length;e=n(e),r=n(r);for(var t,u,l=[],i=0;i<=r.length;i++)for(var a=0;a<=e.length;a++)u=i&&a?e.charAt(a-1)===r.charAt(i-1)?t:Math.min(l[a],l[a-1],t)+1:i+a,t=l[a],l[a]=u;return l.pop()}};h.strip=h.trim,h.lstrip=h.ltrim,h.rstrip=h.rtrim,h.center=h.lrpad,h.rjust=h.lpad,h.ljust=h.rpad,h.contains=h.include,h.q=h.quote,"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(module.exports=h),exports._s=h),"function"==typeof define&&define.amd&&define("underscore.string",[],function(){return h}),e._=e._||{},e._.string=e._.str=h}(this,String);
},{}],185:[function(require,module,exports){
var Attributes=require("./waterline-schema/attributes"),ForeignKeys=require("./waterline-schema/foreignKeys"),JoinTables=require("./waterline-schema/joinTables"),References=require("./waterline-schema/references");module.exports=function(e,s,i){return this.schema={},this.schema=new Attributes(e,s,i),this.schema=new ForeignKeys(this.schema),this.schema=new JoinTables(this.schema),this.schema=new References(this.schema),this.schema};
},{"./waterline-schema/attributes":186,"./waterline-schema/foreignKeys":187,"./waterline-schema/joinTables":188,"./waterline-schema/references":189}],186:[function(require,module,exports){
function Attributes(t,e,o){this.attributes={},e=e||{};for(var a in t){var r=this.normalize(t[a].prototype,e,o),i=_.cloneDeep(r.connection),u=_.cloneDeep(r.attributes);this.stripFunctions(u),this.stripProperties(u),this.validatePropertyNames(u),this.attributes[r.identity.toLowerCase()]={connection:i,identity:r.identity.toLowerCase(),tableName:r.tableName||r.identity,attributes:u}}return this.attributes}var _=require("lodash"),utils=require("./utils"),hop=utils.object.hasOwnProperty;module.exports=Attributes,Attributes.prototype.normalize=function(t,e,o){return this.normalizeIdentity(t),this.setDefaults(t,o),this.autoAttributes(t,e),t},Attributes.prototype.setDefaults=function(t,e){e=e||{},hop(t,"connection")||(t.connection=""),hop(t,"attributes")||(t.attributes={});var o={autoPK:!0,autoCreatedAt:!0,autoUpdatedAt:!0};hop(e,"autoPK")&&(o.autoPK=e.autoPK),hop(e,"autoCreatedAt")&&(o.autoCreatedAt=e.autoCreatedAt),hop(e,"autoUpdatedAt")&&(o.autoUpdatedAt=e.autoUpdatedAt),hop(t,"autoPK")&&(o.autoPK=t.autoPK),hop(t,"autoCreatedAt")&&(o.autoCreatedAt=t.autoCreatedAt),hop(t,"autoUpdatedAt")&&(o.autoUpdatedAt=t.autoUpdatedAt);var a={autoPK:o.autoPK,autoCreatedAt:o.autoCreatedAt,autoUpdatedAt:o.autoUpdatedAt};for(var r in a)t[r]=a[r]},Attributes.prototype.normalizeIdentity=function(t){if(hop(t,"tableName")&&!hop(t,"identity")&&(t.identity=t.tableName.toLowerCase()),!hop(t,"identity"))throw new Error("A Collection must include an identity or tableName attribute")},Attributes.prototype.autoAttributes=function(t,e){var o,a=t.attributes,r=!1;for(var i in a)hop(a[i],"primaryKey")&&(r=!0);if(r&&(t.autoPK=!1),!r&&t.autoPK&&!a.id&&(a.id={type:"integer",autoIncrement:!0,primaryKey:!0,unique:!0},o=Array.isArray(t.connection)?t.connection[0]:t.connection,hop(e,o))){var u=e[o];hop(u._adapter,"pkFormat")&&(a.id.type=u._adapter.pkFormat)}var n={type:"datetime","default":"NOW"};t.autoCreatedAt&&!a.createdAt&&(a.createdAt=n),t.autoUpdatedAt&&!a.updatedAt&&(a.updatedAt=n)},Attributes.prototype.stripFunctions=function(t){for(var e in t)"function"==typeof t[e]&&delete t[e]},Attributes.prototype.stripProperties=function(t){for(var e in t)this.stripProperty(t[e])},Attributes.prototype.stripProperty=function(t){for(var e in t)utils.reservedWords.indexOf(e)>-1||delete t[e]},Attributes.prototype.validatePropertyNames=function(t){for(var e in t)if(e.match(/\./g)){var o='Invalid Attribute Name: Attributes may not contain a "."" character';throw new Error(o)}};
},{"./utils":190,"lodash":126}],187:[function(require,module,exports){
function ForeignKeys(e){e=e||{},this.collections=_.clone(e);for(var t in e)this.replaceKeys(e[t].attributes);return e}var _=require("lodash"),utils=require("./utils"),hop=utils.object.hasOwnProperty;module.exports=ForeignKeys,ForeignKeys.prototype.replaceKeys=function(e){for(var t in e)if(hop(e[t],"model")){var o=e[t].model.toLowerCase(),r=this.findPrimaryKey(o),i=this.buildColumnName(t,e[t]),n={columnName:i,type:r.attributes.type,foreignKey:!0,references:o,on:r.attributes.columnName||r.name};delete e[t],e[t]=n}},ForeignKeys.prototype.findPrimaryKey=function(e){if(!this.collections[e])throw new Error("Trying to access a collection "+e+" that is not defined.");if(!this.collections[e].attributes)throw new Error("Collection, "+e+", has no attributes defined.");var t=null;for(var o in this.collections[e].attributes){var r=this.collections[e].attributes[o];hop(r,"primaryKey")&&(t={name:o,attributes:r})}if(!t){var i="Trying to create an association on a model that doesn't have a Primary Key.";throw new Error(i)}return t},ForeignKeys.prototype.buildColumnName=function(e,t){return hop(t,"columnName")?t.columnName:e};
},{"./utils":190,"lodash":126}],188:[function(require,module,exports){
function JoinTables(t){var e,o=this;t=t||{},this.tables={},this.collections=_.cloneDeep(t);for(var i in t)e=this.buildJoins(i),this.uniqueTables(e),this.markCustomJoinTables(i);return this.linkAttributes(),Object.keys(this.tables).forEach(function(t){delete o.tables[t].joinedAttributes}),_.extend(this.collections,this.tables)}var _=require("lodash"),utils=require("./utils"),hop=utils.object.hasOwnProperty;module.exports=JoinTables,JoinTables.prototype.buildJoins=function(t){var e=this,o=[],i=this.collections[t].attributes,n=this.mapCollections(i);return 0===Object.keys(n).length?[]:(n.forEach(function(i){var n=e.parseAttribute(t,i);n&&o.push(e.buildTable(n))}),o)},JoinTables.prototype.mapCollections=function(t){var e=[];for(var o in t)hop(t[o],"collection")&&e.push({key:o,val:t[o]});return e},JoinTables.prototype.parseAttribute=function(t,e){var o="",i=e.val;if(!hop(i,"through")){i.collection=i.collection.toLowerCase();var n=this.collections[i.collection];if(!n)throw o="Collection "+t+" has an attribute named "+e.key+" that is pointing to a collection named "+i.collection+" which doesn't exist. You must  first create the "+i.collection+" collection.",new Error(o);if(!hop(i,"via")||!hop(n.attributes[i.via],"foreignKey")){hop(i,"via")||(i.via=e.key+"_"+i.collection);var r={column_one:{collection:t.toLowerCase(),attribute:e.key,via:i.via},column_two:{collection:i.collection,attribute:i.via,via:e.key}};return r}}},JoinTables.prototype.buildTable=function(t){var e={},o=t.column_one,i=t.column_two;if(e.identity=this.buildCollectionName(t).toLowerCase(),e.tableName=e.identity,e.tables=[o.collection,i.collection],e.joinedAttributes=[],e.junctionTable=!0,e.connection=this.findDominantConnection(t),!e.connection){var n="A 'dominant' property was not supplied for the two collections in a many-to-many relationship. One side of the relationship between '"+o.collection+"' and '"+i.collection+"' needs a 'domiant: true' flag set so a join table can be created on the correct connection.";throw new Error(n)}return e.attributes={id:{primaryKey:!0,autoIncrement:!0,type:"integer"}},e.attributes[o.collection+"_"+o.attribute]=this.buildForeignKey(o,i),e.attributes[i.collection+"_"+i.attribute]=this.buildForeignKey(i,o),e.joinedAttributes.push(o.collection+"_"+o.attribute),e.joinedAttributes.push(i.collection+"_"+i.attribute),e},JoinTables.prototype.buildCollectionName=function(t){var e=t.column_one,o=t.column_two;return e.collection<o.collection?e.collection+"_"+e.attribute+"__"+o.collection+"_"+o.attribute:o.collection+"_"+o.attribute+"__"+e.collection+"_"+e.attribute},JoinTables.prototype.findDominantConnection=function(t){var e,o=this.collections[t.column_one.collection],i=this.collections[t.column_two.collection];return t.column_one.collection===t.column_two.collection?o.connection:(e=this.searchForAttribute(t.column_one.collection,"dominant"))?o.connection:(e=this.searchForAttribute(t.column_two.collection,"dominant"),e?i.connection:o.connection[0]===i.connection[0]?o.connection:!1)},JoinTables.prototype.searchForAttribute=function(t,e,o){var i,n,r=this.collections[t];return Object.keys(r.attributes).forEach(function(t){n=r.attributes[t],!o&&hop(n,e)&&(i=t),hop(n,e)&&n[e]===o&&(i=t)}),i},JoinTables.prototype.buildForeignKey=function(t,e){var o=this.findPrimaryKey(t.collection),i=t.collection+"_"+t.attribute,n=e.collection+"_"+t.via;return{columnName:i,type:o.attributes.type,foreignKey:!0,references:t.collection,on:o.name,via:n,groupKey:t.collection}},JoinTables.prototype.uniqueTables=function(t){var e=this;t.forEach(function(t){var o=!0;Object.keys(e.tables).forEach(function(i){var n=e.tables[i];-1!==n.joinedAttributes.indexOf(t.joinedAttributes[0])&&-1!==n.joinedAttributes.indexOf(t.joinedAttributes[1])&&(o=!1)}),hop(e.tables,t.identity)||o&&(e.tables[t.identity]=t)})},JoinTables.prototype.findPrimaryKey=function(t){var e,o,i=null;if(!this.collections[t])throw new Error("Trying to access a collection "+t+" that is not defined.");if(!this.collections[t].attributes)throw new Error("Collection, "+t+", has no attributes defined.");for(var n in this.collections[t].attributes)e=this.collections[t].attributes[n],hop(e,"primaryKey")&&(i={name:n,attributes:e});if(!i)throw o="Trying to create an association on a model that doesn't have a Primary Key.",new Error(o);return i},JoinTables.prototype.linkAttributes=function(){for(var t in this.collections){var e=this.collections[t].attributes;this.updateAttribute(t,e)}},JoinTables.prototype.updateAttribute=function(t,e){for(var o in e)if(hop(e[o],"collection")){var i=e[o],n=t,r=i.collection,l=i.via,c=this.findJoinTable(n,r,l);c.join&&hop(c.table.attributes,t+"_"+o)&&(this.collections[t].attributes[o]={collection:c.table.identity,references:c.table.identity,on:c.table.attributes[t+"_"+o].columnName})}},JoinTables.prototype.markCustomJoinTables=function(t){var e=this.collections[t].attributes;for(var o in e)if(hop(e[o],"through")){var i=e[o].through;this.collections[i].junctionTable=!0,e[o].collection=i,e[o].references=i;var n=this.findReference(t,i);e[o].on=n,delete e[o].through}},JoinTables.prototype.findReference=function(t,e){var o,i=this.collections[e].attributes;for(var n in i)if(hop(i[n],"foreignKey")&&hop(i[n],"references")&&i[n].references===t){o=i[n].columnName||n;break}return o},JoinTables.prototype.findJoinTable=function(t,e,o){var i,n=!1;for(var r in this.tables){var l=this.tables[r].tables;if(!(l.indexOf(t)<0||l.indexOf(e)<0)){var c=e+"_"+o;if(hop(this.tables[r].attributes,c)){n=!0,i=this.tables[r];break}}}return{join:n,table:i}};
},{"./utils":190,"lodash":126}],189:[function(require,module,exports){
function References(e){e=e||{},this.collections=_.clone(e);for(var o in e)this.addKeys(o);return this.collections}var _=require("lodash"),utils=require("./utils"),hop=utils.object.hasOwnProperty;module.exports=References,References.prototype.addKeys=function(e){var o,t=this.collections[e].attributes;for(var r in t)if(hop(t[r],"collection")&&(!t[r].references||!t[r].on))if(t[r].collection=t[r].collection,hop(t[r],"through")){if(o=this.findReference(t[r].collection.toLowerCase(),t[r].through.toLowerCase()),!o)continue;t[r].references=t[r].through,t[r].on=o,delete t[r].through}else o=this.findReference(e,t[r].collection.toLowerCase(),t[r]),o&&(t[r].references=t[r].collection.toLowerCase(),t[r].on=o)},References.prototype.findReference=function(e,o,t){if("object"!=typeof this.collections[o])throw new Error("Cannot find collection '"+o+"' referenced in "+e);var r,n=this.collections[o].attributes,i=[];for(var c in n)hop(n[c],"foreignKey")&&hop(n[c],"references")&&n[c].references===e&&i.push(c);if(0===i.length)throw new Error("Trying to associate a collection attribute to a model that doesn't have a Foreign Key. "+e+" is trying to reference a foreign key in "+o);if(i.length>1){if(!hop(t,"via"))throw new Error("Multiple foreign keys were found on "+o+". You need to specify a foreign key to use by adding in the `via` property to the collection association");var s,l=!1;if(i.forEach(function(e){e===t.via&&(l=n[e],s=e)}),!l)throw new Error("No matching attribute was found on "+o+" with the name "+t.via);return r=l.columnName||s}return r=n[i[0]].columnName||i[0]};
},{"./utils":190,"lodash":126}],190:[function(require,module,exports){
exports.reservedWords=["defaultsTo","primaryKey","autoIncrement","unique","index","columnName","foreignKey","references","on","through","groupKey","required","default","type","collection","model","via","dominant"],exports.object={};var hop=Object.prototype.hasOwnProperty;exports.object.hasOwnProperty=function(e,o){return hop.call(e,o)};
},{}],191:[function(require,module,exports){
Waterline=require("../lib/waterline");
},{"../lib/waterline":1}]},{},[1,191])


//# sourceMappingURL=bundle.map